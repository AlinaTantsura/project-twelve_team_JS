{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shopping-list.js","../src/js/pagination.js"],"sourcesContent":["// @ts-nocheck\nimport imgUrlAppleBook from '../img/appleBook@1x-min.png';\nimport imgUrlAmazon from '../img/amazon@1x-min.png';\nimport imgUrlAppleBook2x from '../img/appleBook@2x-min.png';\nimport imgUrlAmazon2x from '../img/amazon@2x-min.png';\nimport icons from '../img/InlineSprite.svg';\nimport { writeUserShoppingListToDatabase } from './sign-in';\nimport Swal from 'sweetalert2';\n\nconst bookList = document.querySelector('.books-list');\nconst noBooks = document.querySelector('.no-books');\nconst loader = document.querySelector('.loader-backdrop');\nlet localStorageKey = 'shoppingList';\n\nconst dataFromStorage = JSON.parse(localStorage.getItem(localStorageKey)) || [];\nshoppingMarkup(dataFromStorage);\n\n/*Function for card markup*/\n\nexport function shoppingMarkup(arr) {\n  const newDescription = 'Description will be added sooner';\n\n  const markup = arr\n    .map(\n      ({\n        _id,\n        book_image,\n        title,\n        list_name,\n        description,\n        author,\n        buy_links,\n      }) => {\n        return `\n      <li class=\"shopping-element\" data-book-id=\"${_id}\" id=\"${_id}\">\n        <img\n          src=\"${book_image}\"\n          alt=\"${title}\"\n          class=\"book-image\"\n        />\n        <div class=\"text-content\">\n          <h2 class=\"book-title\">${title}</h2>\n          <p class=\"book-category\">${list_name}</p>\n          <p class=\"book-description\">\n            ${description || newDescription}\n          </p>\n          <div class=\"author-buy\">\n            <p class=\"author-name\">${author}</p>\n            <ul class=\"buy-links\">\n              <li class=\"buy-link\">\n                <a href=\"${\n                  buy_links[0].url\n                }\" target=\"_blank\" class=\"amazon-link book-link \">\n                  <img\n                    src=\"${imgUrlAmazon}\"\n                    srcset=\"${imgUrlAmazon2x} 2x\"\n                    alt=\"Amazon\"\n                    width=\"32\"\n                    height=\"11\"\n                    class=\"buy-amazon\"\n                  />\n                </a>\n              </li>\n              <li class=\"buy-link\">\n                <a href=\"${\n                  buy_links[1].url\n                }\" target=\"_blank\" class=\"apple-book-link book-link \">\n                  <img\n                    src=\"${imgUrlAppleBook}\"\n                    srcset=\"${imgUrlAppleBook2x} 2x\"\n                    alt=\"Apple Books\"\n                    width=\"16\"\n                    class=\"buy-apple\"\n                  />\n                </a>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <button type=\"submit\" class=\"delete-item\" data-book-id=\"${_id}\">\n          <svg class=\"remove-bin\" width=\"16\" height=\"16\">\n            <use href=\"${icons}#trash-last\"></use>\n          </svg>\n        </button>\n      </li>\n    `;}).join('');\n  bookList.innerHTML = markup;\n  removeBooks();\n}\n\n/*function for deliting elements*/\nfunction removeBooks() {\n  const removeButtons = document.querySelectorAll('.delete-item');\n  removeButtons.forEach(button => button.addEventListener('click', removeFromShopping));\n}\n\nfunction removeFromShopping(event) {\n   switchLoader();\n  const bookId = event.target.closest('li').id;\n  let dataFromStorage = JSON.parse(localStorage.getItem('shoppingList')) || [];\n\n  dataFromStorage = dataFromStorage.filter(book => book._id !== bookId);\n  localStorage.setItem(localStorageKey, JSON.stringify(dataFromStorage));\n  writeUserShoppingListToDatabase(dataFromStorage);\n\n  const cardBookEl = document.getElementById(bookId);\n\n  if(cardBookEl) {\n    cardBookEl.remove();\n  }\n shoppingMarkup(dataFromStorage);\n switchLoader();\n   const Toast = Swal.mixin({\n    toast: true,\n    position: 'top-end',\n    showConfirmButton: false,\n    timer: 1500,\n    timerProgressBar: true,\n    didOpen: toast => {\n      toast.onmouseenter = Swal.stopTimer;\n      toast.onmouseleave = Swal.resumeTimer;\n    },\n  });\n  Toast.fire({\n    icon: 'success',\n    title: 'Book was deleted successfully',\n  });\n}\n\n/*Loader Function*/\n\nfunction switchLoader() {\n  loader?.classList.toggle('is-hidden');\n}\n\nif (bookList.children.length === 0 || dataFromStorage.length === 0 || dataFromStorage === []) {\n  noBooks.classList.remove('hidden');\n} else {\n  noBooks.classList.add('hidden');\n}\n","// @ts-nocheck\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport { shoppingMarkup } from './shopping-list';\n\nlet shoppingList = localStorage.getItem('shoppingList');\nlet shoppingListArray = JSON.parse(shoppingList);\nconst noBooks = document.querySelector('.no-books');\n\nlet visiblePages = 2;\nlet itemsPerPage = 4;\nif (window.innerWidth >= 768) {\n  visiblePages = 3;\n  itemsPerPage = 3;\n}\nconst options = {\n  totalItems: shoppingListArray.length,\n  itemsPerPage,\n  visiblePages,\n};\n\nconst container = document.getElementById('tui-pagination-container');\nconst pagination = new Pagination(container, options);\n\nif (shoppingListArray.length <= 3) {\n  container.classList.add('hidden');\n} else {\n  container.classList.remove('hidden');\n}\n\npagination.on('beforeMove', event => {\n  const currentPage = event.page;\n  shoppingMarkup(\n    shoppingListArray.slice(\n      (currentPage - 1) * itemsPerPage,\n      currentPage * itemsPerPage\n    )\n  );\n  deleteBooksFrom();\n});\n\npagination.movePageTo(1);\n\nfunction deleteBooksFrom() {\n  const removeButtons = document.querySelectorAll('.delete-item');\n  removeButtons.forEach(button => button.addEventListener('click', reloadPage));\n};\n\nfunction reloadPage() {\n  shoppingList = localStorage.getItem('shoppingList');\n  shoppingListArray = JSON.parse(shoppingList);\n\n  if (shoppingListArray.length === 0 || shoppingListArray === []) {\n    noBooks.classList.remove('hidden');\n  } else {\n    noBooks.classList.add('hidden');\n  }\n\n\n  let currentPage = pagination.getCurrentPage();\n  pagination.reset(shoppingListArray.length);\n  pagination.movePageTo(currentPage);\n  if (shoppingListArray.length / itemsPerPage <= 1 || shoppingListArray.length <= 3) {\n    container.classList.add('hidden');\n  }\n};\n\n"],"names":["bookList","noBooks","loader","localStorageKey","dataFromStorage","shoppingMarkup","arr","newDescription","markup","_id","book_image","title","list_name","description","author","buy_links","imgUrlAmazon","imgUrlAmazon2x","imgUrlAppleBook","imgUrlAppleBook2x","icons","removeBooks","button","removeFromShopping","event","switchLoader","bookId","book","writeUserShoppingListToDatabase","cardBookEl","Swal","toast","shoppingList","shoppingListArray","visiblePages","itemsPerPage","options","container","pagination","Pagination","currentPage","deleteBooksFrom","reloadPage"],"mappings":"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"}