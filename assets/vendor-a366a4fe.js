var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},as={},hm={get exports(){return as},set exports(t){as=t}};(function(t,e){(function(n,i){t.exports=i()})(nt,function(){function n(d,o){var c=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(c!=null){var u,m,w,C,A=[],R=!0,j=!1;try{if(w=(c=c.call(d)).next,o===0){if(Object(c)!==c)return;R=!1}else for(;!(R=(u=w.call(c)).done)&&(A.push(u.value),A.length!==o);R=!0);}catch(Cn){j=!0,m=Cn}finally{try{if(!R&&c.return!=null&&(C=c.return(),Object(C)!==C))return}finally{if(j)throw m}}return A}}function i(d){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i(d)}function r(d,o){if(!(d instanceof o))throw new TypeError("Cannot call a class as a function")}function s(d,o){for(var c=0;c<o.length;c++){var u=o[c];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(d,Th(u.key),u)}}function a(d,o,c){return o&&s(d.prototype,o),c&&s(d,c),Object.defineProperty(d,"prototype",{writable:!1}),d}function l(d,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(o&&o.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),o&&f(d,o)}function h(d){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},h(d)}function f(d,o){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,m){return u.__proto__=m,u},f(d,o)}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g(d,o,c){return p()?g=Reflect.construct.bind():g=function(m,w,C){var A=[null];A.push.apply(A,w);var R=Function.bind.apply(m,A),j=new R;return C&&f(j,C.prototype),j},g.apply(null,arguments)}function y(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function I(d,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(d)}function v(d){var o=p();return function(){var u=h(d),m;if(o){var w=h(this).constructor;m=Reflect.construct(u,arguments,w)}else m=u.apply(this,arguments);return I(this,m)}}function T(d,o){for(;!Object.prototype.hasOwnProperty.call(d,o)&&(d=h(d),d!==null););return d}function S(){return typeof Reflect<"u"&&Reflect.get?S=Reflect.get.bind():S=function(o,c,u){var m=T(o,c);if(m){var w=Object.getOwnPropertyDescriptor(m,c);return w.get?w.get.call(arguments.length<3?o:u):w.value}},S.apply(this,arguments)}function q(d,o){return J(d)||n(d,o)||Ae(d,o)||gn()}function z(d){return K(d)||He(d)||Ae(d)||mt()}function K(d){if(Array.isArray(d))return Ze(d)}function J(d){if(Array.isArray(d))return d}function He(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function Ae(d,o){if(d){if(typeof d=="string")return Ze(d,o);var c=Object.prototype.toString.call(d).slice(8,-1);if(c==="Object"&&d.constructor&&(c=d.constructor.name),c==="Map"||c==="Set")return Array.from(d);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Ze(d,o)}}function Ze(d,o){(o==null||o>d.length)&&(o=d.length);for(var c=0,u=new Array(o);c<o;c++)u[c]=d[c];return u}function mt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dr(d,o){if(typeof d!="object"||d===null)return d;var c=d[Symbol.toPrimitive];if(c!==void 0){var u=c.call(d,o||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(d)}function Th(d){var o=dr(d,"string");return typeof o=="symbol"?o:String(o)}function Uo(d,o){var c=Ho(d,o,"get");return Sh(d,c)}function Ch(d,o,c){var u=Ho(d,o,"set");return kh(d,u,c),c}function Ho(d,o,c){if(!o.has(d))throw new TypeError("attempted to "+c+" private field on non-instance");return o.get(d)}function Sh(d,o){return o.get?o.get.call(d):o.value}function kh(d,o,c){if(o.set)o.set.call(d,c);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=c}}function Ah(d,o){if(o.has(d))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rh(d,o,c){Ah(d,o),o.set(d,c)}var Oh=100,O={},Ph=function(){O.previousActiveElement instanceof HTMLElement?(O.previousActiveElement.focus(),O.previousActiveElement=null):document.body&&document.body.focus()},Nh=function(o){return new Promise(function(c){if(!o)return c();var u=window.scrollX,m=window.scrollY;O.restoreFocusTimeout=setTimeout(function(){Ph(),c()},Oh),window.scrollTo(u,m)})},jo="swal2-",Dh=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],_=Dh.reduce(function(d,o){return d[o]=jo+o,d},{}),xh=["success","warning","info","question","error"],ii=xh.reduce(function(d,o){return d[o]=jo+o,d},{}),Wo="SweetAlert2:",hr=function(o){return o.charAt(0).toUpperCase()+o.slice(1)},le=function(o){console.warn("".concat(Wo," ").concat(i(o)==="object"?o.join(" "):o))},gt=function(o){console.error("".concat(Wo," ").concat(o))},Vo=[],Lh=function(o){Vo.includes(o)||(Vo.push(o),le(o))},Mh=function(o,c){Lh('"'.concat(o,'" is deprecated and will be removed in the next major release. Please use "').concat(c,'" instead.'))},ri=function(o){return typeof o=="function"?o():o},fr=function(o){return o&&typeof o.toPromise=="function"},_n=function(o){return fr(o)?o.toPromise():Promise.resolve(o)},pr=function(o){return o&&Promise.resolve(o)===o},ce=function(){return document.body.querySelector(".".concat(_.container))},wn=function(o){var c=ce();return c?c.querySelector(o):null},he=function(o){return wn(".".concat(o))},F=function(){return he(_.popup)},yn=function(){return he(_.icon)},Fh=function(){return he(_["icon-content"])},$o=function(){return he(_.title)},mr=function(){return he(_["html-container"])},qo=function(){return he(_.image)},gr=function(){return he(_["progress-steps"])},si=function(){return he(_["validation-message"])},Re=function(){return wn(".".concat(_.actions," .").concat(_.confirm))},jt=function(){return wn(".".concat(_.actions," .").concat(_.cancel))},_t=function(){return wn(".".concat(_.actions," .").concat(_.deny))},Bh=function(){return he(_["input-label"])},Wt=function(){return wn(".".concat(_.loader))},vn=function(){return he(_.actions)},zo=function(){return he(_.footer)},oi=function(){return he(_["timer-progress-bar"])},_r=function(){return he(_.close)},Uh=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,wr=function(){var o=F();if(!o)return[];var c=o.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),u=Array.from(c).sort(function(C,A){var R=parseInt(C.getAttribute("tabindex")||"0"),j=parseInt(A.getAttribute("tabindex")||"0");return R>j?1:R<j?-1:0}),m=o.querySelectorAll(Uh),w=Array.from(m).filter(function(C){return C.getAttribute("tabindex")!=="-1"});return z(new Set(u.concat(w))).filter(function(C){return pe(C)})},yr=function(){return je(document.body,_.shown)&&!je(document.body,_["toast-shown"])&&!je(document.body,_["no-backdrop"])},ai=function(){var o=F();return o?je(o,_.toast):!1},Hh=function(){var o=F();return o?o.hasAttribute("data-loading"):!1},fe=function(o,c){if(o.textContent="",c){var u=new DOMParser,m=u.parseFromString(c,"text/html"),w=m.querySelector("head");w&&Array.from(w.childNodes).forEach(function(A){o.appendChild(A)});var C=m.querySelector("body");C&&Array.from(C.childNodes).forEach(function(A){A instanceof HTMLVideoElement||A instanceof HTMLAudioElement?o.appendChild(A.cloneNode(!0)):o.appendChild(A)})}},je=function(o,c){if(!c)return!1;for(var u=c.split(/\s+/),m=0;m<u.length;m++)if(!o.classList.contains(u[m]))return!1;return!0},jh=function(o,c){Array.from(o.classList).forEach(function(u){!Object.values(_).includes(u)&&!Object.values(ii).includes(u)&&!Object.values(c.showClass||{}).includes(u)&&o.classList.remove(u)})},_e=function(o,c,u){if(jh(o,c),c.customClass&&c.customClass[u]){if(typeof c.customClass[u]!="string"&&!c.customClass[u].forEach){le("Invalid type of customClass.".concat(u,'! Expected string or iterable object, got "').concat(i(c.customClass[u]),'"'));return}L(o,c.customClass[u])}},ci=function(o,c){if(!c)return null;switch(c){case"select":case"textarea":case"file":return o.querySelector(".".concat(_.popup," > .").concat(_[c]));case"checkbox":return o.querySelector(".".concat(_.popup," > .").concat(_.checkbox," input"));case"radio":return o.querySelector(".".concat(_.popup," > .").concat(_.radio," input:checked"))||o.querySelector(".".concat(_.popup," > .").concat(_.radio," input:first-child"));case"range":return o.querySelector(".".concat(_.popup," > .").concat(_.range," input"));default:return o.querySelector(".".concat(_.popup," > .").concat(_.input))}},Ko=function(o){if(o.focus(),o.type!=="file"){var c=o.value;o.value="",o.value=c}},Go=function(o,c,u){!o||!c||(typeof c=="string"&&(c=c.split(/\s+/).filter(Boolean)),c.forEach(function(m){Array.isArray(o)?o.forEach(function(w){u?w.classList.add(m):w.classList.remove(m)}):u?o.classList.add(m):o.classList.remove(m)}))},L=function(o,c){Go(o,c,!0)},Oe=function(o,c){Go(o,c,!1)},et=function(o,c){for(var u=Array.from(o.children),m=0;m<u.length;m++){var w=u[m];if(w instanceof HTMLElement&&je(w,c))return w}},wt=function(o,c,u){u==="".concat(parseInt(u))&&(u=parseInt(u)),u||parseInt(u)===0?o.style[c]=typeof u=="number"?"".concat(u,"px"):u:o.style.removeProperty(c)},Q=function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";o&&(o.style.display=c)},ie=function(o){o&&(o.style.display="none")},vr=function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";o&&new MutationObserver(function(){bn(o,o.innerHTML,c)}).observe(o,{childList:!0,subtree:!0})},Yo=function(o,c,u,m){var w=o.querySelector(c);w&&(w.style[u]=m)},bn=function(o,c){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";c?Q(o,u):ie(o)},pe=function(o){return!!(o&&(o.offsetWidth||o.offsetHeight||o.getClientRects().length))},Wh=function(){return!pe(Re())&&!pe(_t())&&!pe(jt())},Jo=function(o){return o.scrollHeight>o.clientHeight},Xo=function(o){var c=window.getComputedStyle(o),u=parseFloat(c.getPropertyValue("animation-duration")||"0"),m=parseFloat(c.getPropertyValue("transition-duration")||"0");return u>0||m>0},br=function(o){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=oi();u&&pe(u)&&(c&&(u.style.transition="none",u.style.width="100%"),setTimeout(function(){u.style.transition="width ".concat(o/1e3,"s linear"),u.style.width="0%"},10))},Vh=function(){var o=oi();if(o){var c=parseInt(window.getComputedStyle(o).width);o.style.removeProperty("transition"),o.style.width="100%";var u=parseInt(window.getComputedStyle(o).width),m=c/u*100;o.style.width="".concat(m,"%")}},Qo=function(){return typeof window>"u"||typeof document>"u"},$h=`
 <div aria-labelledby="`.concat(_.title,'" aria-describedby="').concat(_["html-container"],'" class="').concat(_.popup,`" tabindex="-1">
   <button type="button" class="`).concat(_.close,`"></button>
   <ul class="`).concat(_["progress-steps"],`"></ul>
   <div class="`).concat(_.icon,`"></div>
   <img class="`).concat(_.image,`" />
   <h2 class="`).concat(_.title,'" id="').concat(_.title,`"></h2>
   <div class="`).concat(_["html-container"],'" id="').concat(_["html-container"],`"></div>
   <input class="`).concat(_.input,'" id="').concat(_.input,`" />
   <input type="file" class="`).concat(_.file,`" />
   <div class="`).concat(_.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(_.select,'" id="').concat(_.select,`"></select>
   <div class="`).concat(_.radio,`"></div>
   <label class="`).concat(_.checkbox,`">
     <input type="checkbox" id="`).concat(_.checkbox,`" />
     <span class="`).concat(_.label,`"></span>
   </label>
   <textarea class="`).concat(_.textarea,'" id="').concat(_.textarea,`"></textarea>
   <div class="`).concat(_["validation-message"],'" id="').concat(_["validation-message"],`"></div>
   <div class="`).concat(_.actions,`">
     <div class="`).concat(_.loader,`"></div>
     <button type="button" class="`).concat(_.confirm,`"></button>
     <button type="button" class="`).concat(_.deny,`"></button>
     <button type="button" class="`).concat(_.cancel,`"></button>
   </div>
   <div class="`).concat(_.footer,`"></div>
   <div class="`).concat(_["timer-progress-bar-container"],`">
     <div class="`).concat(_["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),qh=function(){var o=ce();return o?(o.remove(),Oe([document.documentElement,document.body],[_["no-backdrop"],_["toast-shown"],_["has-column"]]),!0):!1},yt=function(){O.currentInstance.resetValidationMessage()},zh=function(){var o=F(),c=et(o,_.input),u=et(o,_.file),m=o.querySelector(".".concat(_.range," input")),w=o.querySelector(".".concat(_.range," output")),C=et(o,_.select),A=o.querySelector(".".concat(_.checkbox," input")),R=et(o,_.textarea);c.oninput=yt,u.onchange=yt,C.onchange=yt,A.onchange=yt,R.oninput=yt,m.oninput=function(){yt(),w.value=m.value},m.onchange=function(){yt(),w.value=m.value}},Kh=function(o){return typeof o=="string"?document.querySelector(o):o},Gh=function(o){var c=F();c.setAttribute("role",o.toast?"alert":"dialog"),c.setAttribute("aria-live",o.toast?"polite":"assertive"),o.toast||c.setAttribute("aria-modal","true")},Yh=function(o){window.getComputedStyle(o).direction==="rtl"&&L(ce(),_.rtl)},Jh=function(o){var c=qh();if(Qo()){gt("SweetAlert2 requires document to initialize");return}var u=document.createElement("div");u.className=_.container,c&&L(u,_["no-transition"]),fe(u,$h);var m=Kh(o.target);m.appendChild(u),Gh(o),Yh(m),zh()},Er=function(o,c){o instanceof HTMLElement?c.appendChild(o):i(o)==="object"?Xh(o,c):o&&fe(c,o)},Xh=function(o,c){o.jquery?Qh(c,o):fe(c,o.toString())},Qh=function(o,c){if(o.textContent="",0 in c)for(var u=0;u in c;u++)o.appendChild(c[u].cloneNode(!0));else o.appendChild(c.cloneNode(!0))},vt=function(){if(Qo())return!1;var d=document.createElement("div");return typeof d.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof d.style.animation<"u"?"animationend":!1}(),Zh=function(o,c){var u=vn(),m=Wt();!u||!m||(!c.showConfirmButton&&!c.showDenyButton&&!c.showCancelButton?ie(u):Q(u),_e(u,c,"actions"),ef(u,m,c),fe(m,c.loaderHtml||""),_e(m,c,"loader"))};function ef(d,o,c){var u=Re(),m=_t(),w=jt();!u||!m||!w||(Ir(u,"confirm",c),Ir(m,"deny",c),Ir(w,"cancel",c),tf(u,m,w,c),c.reverseButtons&&(c.toast?(d.insertBefore(w,u),d.insertBefore(m,u)):(d.insertBefore(w,o),d.insertBefore(m,o),d.insertBefore(u,o))))}function tf(d,o,c,u){if(!u.buttonsStyling){Oe([d,o,c],_.styled);return}L([d,o,c],_.styled),u.confirmButtonColor&&(d.style.backgroundColor=u.confirmButtonColor,L(d,_["default-outline"])),u.denyButtonColor&&(o.style.backgroundColor=u.denyButtonColor,L(o,_["default-outline"])),u.cancelButtonColor&&(c.style.backgroundColor=u.cancelButtonColor,L(c,_["default-outline"]))}function Ir(d,o,c){var u=hr(o);bn(d,c["show".concat(u,"Button")],"inline-block"),fe(d,c["".concat(o,"ButtonText")]||""),d.setAttribute("aria-label",c["".concat(o,"ButtonAriaLabel")]||""),d.className=_[o],_e(d,c,"".concat(o,"Button"))}var nf=function(o,c){var u=_r();u&&(fe(u,c.closeButtonHtml||""),_e(u,c,"closeButton"),bn(u,c.showCloseButton),u.setAttribute("aria-label",c.closeButtonAriaLabel||""))},rf=function(o,c){var u=ce();u&&(sf(u,c.backdrop),of(u,c.position),af(u,c.grow),_e(u,c,"container"))};function sf(d,o){typeof o=="string"?d.style.background=o:o||L([document.documentElement,document.body],_["no-backdrop"])}function of(d,o){o&&(o in _?L(d,_[o]):(le('The "position" parameter is not valid, defaulting to "center"'),L(d,_.center)))}function af(d,o){o&&L(d,_["grow-".concat(o)])}var H={innerParams:new WeakMap,domCache:new WeakMap},cf=["input","file","range","select","radio","checkbox","textarea"],lf=function(o,c){var u=F();if(u){var m=H.innerParams.get(o),w=!m||c.input!==m.input;cf.forEach(function(C){var A=et(u,_[C]);A&&(hf(C,c.inputAttributes),A.className=_[C],w&&ie(A))}),c.input&&(w&&uf(c),ff(c))}},uf=function(o){if(o.input){if(!G[o.input]){gt("Unexpected type of input! Expected ".concat(Object.keys(G).join(" | "),', got "').concat(o.input,'"'));return}var c=Zo(o.input),u=G[o.input](c,o);Q(c),o.inputAutoFocus&&setTimeout(function(){Ko(u)})}},df=function(o){for(var c=0;c<o.attributes.length;c++){var u=o.attributes[c].name;["id","type","value","style"].includes(u)||o.removeAttribute(u)}},hf=function(o,c){var u=ci(F(),o);if(u){df(u);for(var m in c)u.setAttribute(m,c[m])}},ff=function(o){var c=Zo(o.input);i(o.customClass)==="object"&&L(c,o.customClass.input)},Tr=function(o,c){(!o.placeholder||c.inputPlaceholder)&&(o.placeholder=c.inputPlaceholder)},En=function(o,c,u){if(u.inputLabel){var m=document.createElement("label"),w=_["input-label"];m.setAttribute("for",o.id),m.className=w,i(u.customClass)==="object"&&L(m,u.customClass.inputLabel),m.innerText=u.inputLabel,c.insertAdjacentElement("beforebegin",m)}},Zo=function(o){return et(F(),_[o]||_.input)},li=function(o,c){["string","number"].includes(i(c))?o.value="".concat(c):pr(c)||le('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(i(c),'"'))},G={};G.text=G.email=G.password=G.number=G.tel=G.url=G.search=G.date=G["datetime-local"]=G.time=G.week=G.month=function(d,o){return li(d,o.inputValue),En(d,d,o),Tr(d,o),d.type=o.input,d},G.file=function(d,o){return En(d,d,o),Tr(d,o),d},G.range=function(d,o){var c=d.querySelector("input"),u=d.querySelector("output");return li(c,o.inputValue),c.type=o.input,li(u,o.inputValue),En(c,d,o),d},G.select=function(d,o){if(d.textContent="",o.inputPlaceholder){var c=document.createElement("option");fe(c,o.inputPlaceholder),c.value="",c.disabled=!0,c.selected=!0,d.appendChild(c)}return En(d,d,o),d},G.radio=function(d){return d.textContent="",d},G.checkbox=function(d,o){var c=ci(F(),"checkbox");c.value="1",c.checked=Boolean(o.inputValue);var u=d.querySelector("span");return fe(u,o.inputPlaceholder),c},G.textarea=function(d,o){li(d,o.inputValue),Tr(d,o),En(d,d,o);var c=function(m){return parseInt(window.getComputedStyle(m).marginLeft)+parseInt(window.getComputedStyle(m).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var u=parseInt(window.getComputedStyle(F()).width),m=function(){if(document.body.contains(d)){var C=d.offsetWidth+c(d);C>u?F().style.width="".concat(C,"px"):wt(F(),"width",o.width)}};new MutationObserver(m).observe(d,{attributes:!0,attributeFilter:["style"]})}}),d};var pf=function(o,c){var u=mr();u&&(vr(u),_e(u,c,"htmlContainer"),c.html?(Er(c.html,u),Q(u,"block")):c.text?(u.textContent=c.text,Q(u,"block")):ie(u),lf(o,c))},mf=function(o,c){var u=zo();u&&(vr(u),bn(u,c.footer,"block"),c.footer&&Er(c.footer,u),_e(u,c,"footer"))},gf=function(o,c){var u=H.innerParams.get(o),m=yn();if(m){if(u&&c.icon===u.icon){ta(m,c),ea(m,c);return}if(!c.icon&&!c.iconHtml){ie(m);return}if(c.icon&&Object.keys(ii).indexOf(c.icon)===-1){gt('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(c.icon,'"')),ie(m);return}Q(m),ta(m,c),ea(m,c),L(m,c.showClass&&c.showClass.icon)}},ea=function(o,c){for(var u=0,m=Object.entries(ii);u<m.length;u++){var w=q(m[u],2),C=w[0],A=w[1];c.icon!==C&&Oe(o,A)}L(o,c.icon&&ii[c.icon]),vf(o,c),_f(),_e(o,c,"icon")},_f=function(){var o=F();if(o)for(var c=window.getComputedStyle(o).getPropertyValue("background-color"),u=o.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),m=0;m<u.length;m++)u[m].style.backgroundColor=c},wf=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,yf=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,ta=function(o,c){if(!(!c.icon&&!c.iconHtml)){var u=o.innerHTML,m="";if(c.iconHtml)m=na(c.iconHtml);else if(c.icon==="success")m=wf,u=u.replace(/ style=".*?"/g,"");else if(c.icon==="error")m=yf;else if(c.icon){var w={question:"?",warning:"!",info:"i"};m=na(w[c.icon])}u.trim()!==m.trim()&&fe(o,m)}},vf=function(o,c){if(c.iconColor){o.style.color=c.iconColor,o.style.borderColor=c.iconColor;for(var u=0,m=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];u<m.length;u++){var w=m[u];Yo(o,w,"backgroundColor",c.iconColor)}Yo(o,".swal2-success-ring","borderColor",c.iconColor)}},na=function(o){return'<div class="'.concat(_["icon-content"],'">').concat(o,"</div>")},bf=function(o,c){var u=qo();if(u){if(!c.imageUrl){ie(u);return}Q(u,""),u.setAttribute("src",c.imageUrl),u.setAttribute("alt",c.imageAlt||""),wt(u,"width",c.imageWidth),wt(u,"height",c.imageHeight),u.className=_.image,_e(u,c,"image")}},Ef=function(o,c){var u=ce(),m=F();if(!(!u||!m)){if(c.toast){wt(u,"width",c.width),m.style.width="100%";var w=Wt();w&&m.insertBefore(w,yn())}else wt(m,"width",c.width);wt(m,"padding",c.padding),c.color&&(m.style.color=c.color),c.background&&(m.style.background=c.background),ie(si()),If(m,c)}},If=function(o,c){var u=c.showClass||{};o.className="".concat(_.popup," ").concat(pe(o)?u.popup:""),c.toast?(L([document.documentElement,document.body],_["toast-shown"]),L(o,_.toast)):L(o,_.modal),_e(o,c,"popup"),typeof c.customClass=="string"&&L(o,c.customClass),c.icon&&L(o,_["icon-".concat(c.icon)])},Tf=function(o,c){var u=gr();if(u){var m=c.progressSteps,w=c.currentProgressStep;if(!m||m.length===0||w===void 0){ie(u);return}Q(u),u.textContent="",w>=m.length&&le("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),m.forEach(function(C,A){var R=Cf(C);if(u.appendChild(R),A===w&&L(R,_["active-progress-step"]),A!==m.length-1){var j=Sf(c);u.appendChild(j)}})}},Cf=function(o){var c=document.createElement("li");return L(c,_["progress-step"]),fe(c,o),c},Sf=function(o){var c=document.createElement("li");return L(c,_["progress-step-line"]),o.progressStepsDistance&&wt(c,"width",o.progressStepsDistance),c},kf=function(o,c){var u=$o();u&&(vr(u),bn(u,c.title||c.titleText,"block"),c.title&&Er(c.title,u),c.titleText&&(u.innerText=c.titleText),_e(u,c,"title"))},ia=function(o,c){Ef(o,c),rf(o,c),Tf(o,c),gf(o,c),bf(o,c),kf(o,c),nf(o,c),pf(o,c),Zh(o,c),mf(o,c);var u=F();typeof c.didRender=="function"&&u&&c.didRender(u)},Af=function(){return pe(F())},ra=function(){var o;return(o=Re())===null||o===void 0?void 0:o.click()},Rf=function(){var o;return(o=_t())===null||o===void 0?void 0:o.click()},Of=function(){var o;return(o=jt())===null||o===void 0?void 0:o.click()},Vt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),sa=function(o){o.keydownTarget&&o.keydownHandlerAdded&&(o.keydownTarget.removeEventListener("keydown",o.keydownHandler,{capture:o.keydownListenerCapture}),o.keydownHandlerAdded=!1)},Pf=function(o,c,u){sa(o),c.toast||(o.keydownHandler=function(m){return Df(c,m,u)},o.keydownTarget=c.keydownListenerCapture?window:F(),o.keydownListenerCapture=c.keydownListenerCapture,o.keydownTarget.addEventListener("keydown",o.keydownHandler,{capture:o.keydownListenerCapture}),o.keydownHandlerAdded=!0)},Cr=function(o,c){var u,m=wr();if(m.length){o=o+c,o===m.length?o=0:o===-1&&(o=m.length-1),m[o].focus();return}(u=F())===null||u===void 0||u.focus()},oa=["ArrowRight","ArrowDown"],Nf=["ArrowLeft","ArrowUp"],Df=function(o,c,u){o&&(c.isComposing||c.keyCode===229||(o.stopKeydownPropagation&&c.stopPropagation(),c.key==="Enter"?xf(c,o):c.key==="Tab"?Lf(c):[].concat(oa,Nf).includes(c.key)?Mf(c.key):c.key==="Escape"&&Ff(c,o,u)))},xf=function(o,c){if(ri(c.allowEnterKey)){var u=ci(F(),c.input);if(o.target&&u&&o.target instanceof HTMLElement&&o.target.outerHTML===u.outerHTML){if(["textarea","file"].includes(c.input))return;ra(),o.preventDefault()}}},Lf=function(o){for(var c=o.target,u=wr(),m=-1,w=0;w<u.length;w++)if(c===u[w]){m=w;break}o.shiftKey?Cr(m,-1):Cr(m,1),o.stopPropagation(),o.preventDefault()},Mf=function(o){var c=vn(),u=Re(),m=_t(),w=jt();if(!(!c||!u||!m||!w)){var C=[u,m,w];if(!(document.activeElement instanceof HTMLElement&&!C.includes(document.activeElement))){var A=oa.includes(o)?"nextElementSibling":"previousElementSibling",R=document.activeElement;if(R){for(var j=0;j<c.children.length;j++){if(R=R[A],!R)return;if(R instanceof HTMLButtonElement&&pe(R))break}R instanceof HTMLButtonElement&&R.focus()}}}},Ff=function(o,c,u){ri(c.allowEscapeKey)&&(o.preventDefault(),u(Vt.esc))},In={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Bf=function(){var o=Array.from(document.body.children);o.forEach(function(c){c===ce()||c.contains(ce())||(c.hasAttribute("aria-hidden")&&c.setAttribute("data-previous-aria-hidden",c.getAttribute("aria-hidden")||""),c.setAttribute("aria-hidden","true"))})},aa=function(){var o=Array.from(document.body.children);o.forEach(function(c){c.hasAttribute("data-previous-aria-hidden")?(c.setAttribute("aria-hidden",c.getAttribute("data-previous-aria-hidden")||""),c.removeAttribute("data-previous-aria-hidden")):c.removeAttribute("aria-hidden")})},ca=typeof window<"u"&&!!window.GestureEvent,Uf=function(){if(ca&&!je(document.body,_.iosfix)){var o=document.body.scrollTop;document.body.style.top="".concat(o*-1,"px"),L(document.body,_.iosfix),Hf()}},Hf=function(){var o=ce();if(o){var c;o.ontouchstart=function(u){c=jf(u)},o.ontouchmove=function(u){c&&(u.preventDefault(),u.stopPropagation())}}},jf=function(o){var c=o.target,u=ce(),m=mr();return!u||!m||Wf(o)||Vf(o)?!1:c===u||!Jo(u)&&c instanceof HTMLElement&&c.tagName!=="INPUT"&&c.tagName!=="TEXTAREA"&&!(Jo(m)&&m.contains(c))},Wf=function(o){return o.touches&&o.touches.length&&o.touches[0].touchType==="stylus"},Vf=function(o){return o.touches&&o.touches.length>1},$f=function(){if(je(document.body,_.iosfix)){var o=parseInt(document.body.style.top,10);Oe(document.body,_.iosfix),document.body.style.top="",document.body.scrollTop=o*-1}},qf=function(){var o=document.createElement("div");o.className=_["scrollbar-measure"],document.body.appendChild(o);var c=o.getBoundingClientRect().width-o.clientWidth;return document.body.removeChild(o),c},$t=null,zf=function(o){$t===null&&(document.body.scrollHeight>window.innerHeight||o==="scroll")&&($t=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat($t+qf(),"px"))},Kf=function(){$t!==null&&(document.body.style.paddingRight="".concat($t,"px"),$t=null)};function la(d,o,c,u){ai()?da(d,u):(Nh(c).then(function(){return da(d,u)}),sa(O)),ca?(o.setAttribute("style","display:none !important"),o.removeAttribute("class"),o.innerHTML=""):o.remove(),yr()&&(Kf(),$f(),aa()),Gf()}function Gf(){Oe([document.documentElement,document.body],[_.shown,_["height-auto"],_["no-backdrop"],_["toast-shown"]])}function tt(d){d=Jf(d);var o=In.swalPromiseResolve.get(this),c=Yf(this);this.isAwaitingPromise?d.isDismissed||(Tn(this),o(d)):c&&o(d)}var Yf=function(o){var c=F();if(!c)return!1;var u=H.innerParams.get(o);if(!u||je(c,u.hideClass.popup))return!1;Oe(c,u.showClass.popup),L(c,u.hideClass.popup);var m=ce();return Oe(m,u.showClass.backdrop),L(m,u.hideClass.backdrop),Xf(o,c,u),!0};function ua(d){var o=In.swalPromiseReject.get(this);Tn(this),o&&o(d)}var Tn=function(o){o.isAwaitingPromise&&(delete o.isAwaitingPromise,H.innerParams.get(o)||o._destroy())},Jf=function(o){return typeof o>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},o)},Xf=function(o,c,u){var m=ce(),w=vt&&Xo(c);typeof u.willClose=="function"&&u.willClose(c),w?Qf(o,c,m,u.returnFocus,u.didClose):la(o,m,u.returnFocus,u.didClose)},Qf=function(o,c,u,m,w){vt&&(O.swalCloseEventFinishedCallback=la.bind(null,o,u,m,w),c.addEventListener(vt,function(C){C.target===c&&(O.swalCloseEventFinishedCallback(),delete O.swalCloseEventFinishedCallback)}))},da=function(o,c){setTimeout(function(){typeof c=="function"&&c.bind(o.params)(),o._destroy&&o._destroy()})},qt=function(o){var c=F();if(c||new pi,c=F(),!!c){var u=Wt();ai()?ie(yn()):Zf(c,o),Q(u),c.setAttribute("data-loading","true"),c.setAttribute("aria-busy","true"),c.focus()}},Zf=function(o,c){var u=vn(),m=Wt();!u||!m||(!c&&pe(Re())&&(c=Re()),Q(u),c&&(ie(c),m.setAttribute("data-button-to-replace",c.className),u.insertBefore(m,c)),L([o,u],_.loading))},ep=function(o,c){c.input==="select"||c.input==="radio"?sp(o,c):["text","email","number","tel","textarea"].some(function(u){return u===c.input})&&(fr(c.inputValue)||pr(c.inputValue))&&(qt(Re()),op(o,c))},tp=function(o,c){var u=o.getInput();if(!u)return null;switch(c.input){case"checkbox":return np(u);case"radio":return ip(u);case"file":return rp(u);default:return c.inputAutoTrim?u.value.trim():u.value}},np=function(o){return o.checked?1:0},ip=function(o){return o.checked?o.value:null},rp=function(o){return o.files&&o.files.length?o.getAttribute("multiple")!==null?o.files:o.files[0]:null},sp=function(o,c){var u=F();if(u){var m=function(C){c.input==="select"?ap(u,ha(C),c):c.input==="radio"&&cp(u,ha(C),c)};fr(c.inputOptions)||pr(c.inputOptions)?(qt(Re()),_n(c.inputOptions).then(function(w){o.hideLoading(),m(w)})):i(c.inputOptions)==="object"?m(c.inputOptions):gt("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(i(c.inputOptions)))}},op=function(o,c){var u=o.getInput();u&&(ie(u),_n(c.inputValue).then(function(m){u.value=c.input==="number"?"".concat(parseFloat(m)||0):"".concat(m),Q(u),u.focus(),o.hideLoading()}).catch(function(m){gt("Error in inputValue promise: ".concat(m)),u.value="",Q(u),u.focus(),o.hideLoading()}))};function ap(d,o,c){var u=et(d,_.select);if(u){var m=function(C,A,R){var j=document.createElement("option");j.value=R,fe(j,A),j.selected=fa(R,c.inputValue),C.appendChild(j)};o.forEach(function(w){var C=w[0],A=w[1];if(Array.isArray(A)){var R=document.createElement("optgroup");R.label=C,R.disabled=!1,u.appendChild(R),A.forEach(function(j){return m(R,j[1],j[0])})}else m(u,A,C)}),u.focus()}}function cp(d,o,c){var u=et(d,_.radio);if(u){o.forEach(function(w){var C=w[0],A=w[1],R=document.createElement("input"),j=document.createElement("label");R.type="radio",R.name=_.radio,R.value=C,fa(C,c.inputValue)&&(R.checked=!0);var Cn=document.createElement("span");fe(Cn,A),Cn.className=_.label,j.appendChild(R),j.appendChild(Cn),u.appendChild(j)});var m=u.querySelectorAll("input");m.length&&m[0].focus()}}var ha=function d(o){var c=[];return o instanceof Map?o.forEach(function(u,m){var w=u;i(w)==="object"&&(w=d(w)),c.push([m,w])}):Object.keys(o).forEach(function(u){var m=o[u];i(m)==="object"&&(m=d(m)),c.push([u,m])}),c},fa=function(o,c){return!!c&&c.toString()===o.toString()},ui=void 0,lp=function(o){var c=H.innerParams.get(o);o.disableButtons(),c.input?pa(o,"confirm"):kr(o,!0)},up=function(o){var c=H.innerParams.get(o);o.disableButtons(),c.returnInputValueOnDeny?pa(o,"deny"):Sr(o,!1)},dp=function(o,c){o.disableButtons(),c(Vt.cancel)},pa=function(o,c){var u=H.innerParams.get(o);if(!u.input){gt('The "input" parameter is needed to be set when using returnInputValueOn'.concat(hr(c)));return}var m=o.getInput(),w=tp(o,u);u.inputValidator?hp(o,w,c):m&&!m.checkValidity()?(o.enableButtons(),o.showValidationMessage(u.validationMessage)):c==="deny"?Sr(o,w):kr(o,w)},hp=function(o,c,u){var m=H.innerParams.get(o);o.disableInput();var w=Promise.resolve().then(function(){return _n(m.inputValidator(c,m.validationMessage))});w.then(function(C){o.enableButtons(),o.enableInput(),C?o.showValidationMessage(C):u==="deny"?Sr(o,c):kr(o,c)})},Sr=function(o,c){var u=H.innerParams.get(o||ui);if(u.showLoaderOnDeny&&qt(_t()),u.preDeny){o.isAwaitingPromise=!0;var m=Promise.resolve().then(function(){return _n(u.preDeny(c,u.validationMessage))});m.then(function(w){w===!1?(o.hideLoading(),Tn(o)):o.close({isDenied:!0,value:typeof w>"u"?c:w})}).catch(function(w){return ga(o||ui,w)})}else o.close({isDenied:!0,value:c})},ma=function(o,c){o.close({isConfirmed:!0,value:c})},ga=function(o,c){o.rejectPromise(c)},kr=function(o,c){var u=H.innerParams.get(o||ui);if(u.showLoaderOnConfirm&&qt(),u.preConfirm){o.resetValidationMessage(),o.isAwaitingPromise=!0;var m=Promise.resolve().then(function(){return _n(u.preConfirm(c,u.validationMessage))});m.then(function(w){pe(si())||w===!1?(o.hideLoading(),Tn(o)):ma(o,typeof w>"u"?c:w)}).catch(function(w){return ga(o||ui,w)})}else ma(o,c)};function di(){var d=H.innerParams.get(this);if(d){var o=H.domCache.get(this);ie(o.loader),ai()?d.icon&&Q(yn()):fp(o),Oe([o.popup,o.actions],_.loading),o.popup.removeAttribute("aria-busy"),o.popup.removeAttribute("data-loading"),o.confirmButton.disabled=!1,o.denyButton.disabled=!1,o.cancelButton.disabled=!1}}var fp=function(o){var c=o.popup.getElementsByClassName(o.loader.getAttribute("data-button-to-replace"));c.length?Q(c[0],"inline-block"):Wh()&&ie(o.actions)};function _a(){var d=H.innerParams.get(this),o=H.domCache.get(this);return o?ci(o.popup,d.input):null}function wa(d,o,c){var u=H.domCache.get(d);o.forEach(function(m){u[m].disabled=c})}function ya(d,o){var c=F();if(!(!c||!d))if(d.type==="radio")for(var u=c.querySelectorAll('[name="'.concat(_.radio,'"]')),m=0;m<u.length;m++)u[m].disabled=o;else d.disabled=o}function va(){wa(this,["confirmButton","denyButton","cancelButton"],!1)}function ba(){wa(this,["confirmButton","denyButton","cancelButton"],!0)}function Ea(){ya(this.getInput(),!1)}function Ia(){ya(this.getInput(),!0)}function Ta(d){var o=H.domCache.get(this),c=H.innerParams.get(this);fe(o.validationMessage,d),o.validationMessage.className=_["validation-message"],c.customClass&&c.customClass.validationMessage&&L(o.validationMessage,c.customClass.validationMessage),Q(o.validationMessage);var u=this.getInput();u&&(u.setAttribute("aria-invalid","true"),u.setAttribute("aria-describedby",_["validation-message"]),Ko(u),L(u,_.inputerror))}function Ca(){var d=H.domCache.get(this);d.validationMessage&&ie(d.validationMessage);var o=this.getInput();o&&(o.removeAttribute("aria-invalid"),o.removeAttribute("aria-describedby"),Oe(o,_.inputerror))}var zt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},pp=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],mp={},gp=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Sa=function(o){return Object.prototype.hasOwnProperty.call(zt,o)},ka=function(o){return pp.indexOf(o)!==-1},Aa=function(o){return mp[o]},_p=function(o){Sa(o)||le('Unknown parameter "'.concat(o,'"'))},wp=function(o){gp.includes(o)&&le('The parameter "'.concat(o,'" is incompatible with toasts'))},yp=function(o){var c=Aa(o);c&&Mh(o,c)},vp=function(o){o.backdrop===!1&&o.allowOutsideClick&&le('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var c in o)_p(c),o.toast&&wp(c),yp(c)};function Ra(d){var o=F(),c=H.innerParams.get(this);if(!o||je(o,c.hideClass.popup)){le("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var u=bp(d),m=Object.assign({},c,u);ia(this,m),H.innerParams.set(this,m),Object.defineProperties(this,{params:{value:Object.assign({},this.params,d),writable:!1,enumerable:!0}})}var bp=function(o){var c={};return Object.keys(o).forEach(function(u){ka(u)?c[u]=o[u]:le("Invalid parameter to update: ".concat(u))}),c};function Oa(){var d=H.domCache.get(this),o=H.innerParams.get(this);if(!o){Pa(this);return}d.popup&&O.swalCloseEventFinishedCallback&&(O.swalCloseEventFinishedCallback(),delete O.swalCloseEventFinishedCallback),typeof o.didDestroy=="function"&&o.didDestroy(),Ep(this)}var Ep=function(o){Pa(o),delete o.params,delete O.keydownHandler,delete O.keydownTarget,delete O.currentInstance},Pa=function(o){o.isAwaitingPromise?(Ar(H,o),o.isAwaitingPromise=!0):(Ar(In,o),Ar(H,o),delete o.isAwaitingPromise,delete o.disableButtons,delete o.enableButtons,delete o.getInput,delete o.disableInput,delete o.enableInput,delete o.hideLoading,delete o.disableLoading,delete o.showValidationMessage,delete o.resetValidationMessage,delete o.close,delete o.closePopup,delete o.closeModal,delete o.closeToast,delete o.rejectPromise,delete o.update,delete o._destroy)},Ar=function(o,c){for(var u in o)o[u].delete(c)},Ip=Object.freeze({__proto__:null,_destroy:Oa,close:tt,closeModal:tt,closePopup:tt,closeToast:tt,disableButtons:ba,disableInput:Ia,disableLoading:di,enableButtons:va,enableInput:Ea,getInput:_a,handleAwaitingPromise:Tn,hideLoading:di,rejectPromise:ua,resetValidationMessage:Ca,showValidationMessage:Ta,update:Ra}),Tp=function(o,c,u){o.toast?Cp(o,c,u):(kp(c),Ap(c),Rp(o,c,u))},Cp=function(o,c,u){c.popup.onclick=function(){o&&(Sp(o)||o.timer||o.input)||u(Vt.close)}},Sp=function(o){return!!(o.showConfirmButton||o.showDenyButton||o.showCancelButton||o.showCloseButton)},hi=!1,kp=function(o){o.popup.onmousedown=function(){o.container.onmouseup=function(c){o.container.onmouseup=function(){},c.target===o.container&&(hi=!0)}}},Ap=function(o){o.container.onmousedown=function(){o.popup.onmouseup=function(c){o.popup.onmouseup=function(){},(c.target===o.popup||c.target instanceof HTMLElement&&o.popup.contains(c.target))&&(hi=!0)}}},Rp=function(o,c,u){c.container.onclick=function(m){if(hi){hi=!1;return}m.target===c.container&&ri(o.allowOutsideClick)&&u(Vt.backdrop)}},Op=function(o){return i(o)==="object"&&o.jquery},Na=function(o){return o instanceof Element||Op(o)},Pp=function(o){var c={};return i(o[0])==="object"&&!Na(o[0])?Object.assign(c,o[0]):["title","html","icon"].forEach(function(u,m){var w=o[m];typeof w=="string"||Na(w)?c[u]=w:w!==void 0&&gt("Unexpected type of ".concat(u,'! Expected "string" or "Element", got ').concat(i(w)))}),c};function Np(){for(var d=this,o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return g(d,c)}function Dp(d){var o=function(c){l(m,c);var u=v(m);function m(){return r(this,m),u.apply(this,arguments)}return a(m,[{key:"_main",value:function(C,A){return S(h(m.prototype),"_main",this).call(this,C,Object.assign({},d,A))}}]),m}(this);return o}var xp=function(){return O.timeout&&O.timeout.getTimerLeft()},Da=function(){if(O.timeout)return Vh(),O.timeout.stop()},xa=function(){if(O.timeout){var o=O.timeout.start();return br(o),o}},Lp=function(){var o=O.timeout;return o&&(o.running?Da():xa())},Mp=function(o){if(O.timeout){var c=O.timeout.increase(o);return br(c,!0),c}},Fp=function(){return!!(O.timeout&&O.timeout.isRunning())},La=!1,Rr={};function Bp(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Rr[d]=this,La||(document.body.addEventListener("click",Up),La=!0)}var Up=function(o){for(var c=o.target;c&&c!==document;c=c.parentNode)for(var u in Rr){var m=c.getAttribute(u);if(m){Rr[u].fire({template:m});return}}},Hp=Object.freeze({__proto__:null,argsToParams:Pp,bindClickHandler:Bp,clickCancel:Of,clickConfirm:ra,clickDeny:Rf,enableLoading:qt,fire:Np,getActions:vn,getCancelButton:jt,getCloseButton:_r,getConfirmButton:Re,getContainer:ce,getDenyButton:_t,getFocusableElements:wr,getFooter:zo,getHtmlContainer:mr,getIcon:yn,getIconContent:Fh,getImage:qo,getInputLabel:Bh,getLoader:Wt,getPopup:F,getProgressSteps:gr,getTimerLeft:xp,getTimerProgressBar:oi,getTitle:$o,getValidationMessage:si,increaseTimer:Mp,isDeprecatedParameter:Aa,isLoading:Hh,isTimerRunning:Fp,isUpdatableParameter:ka,isValidParameter:Sa,isVisible:Af,mixin:Dp,resumeTimer:xa,showLoading:qt,stopTimer:Da,toggleTimer:Lp}),jp=function(){function d(o,c){r(this,d),this.callback=o,this.remaining=c,this.running=!1,this.start()}return a(d,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(c){var u=this.running;return u&&this.stop(),this.remaining+=c,u&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),d}(),Ma=["swal-title","swal-html","swal-footer"],Wp=function(o){var c=typeof o.template=="string"?document.querySelector(o.template):o.template;if(!c)return{};var u=c.content;Jp(u);var m=Object.assign(Vp(u),$p(u),qp(u),zp(u),Kp(u),Gp(u),Yp(u,Ma));return m},Vp=function(o){var c={},u=Array.from(o.querySelectorAll("swal-param"));return u.forEach(function(m){bt(m,["name","value"]);var w=m.getAttribute("name"),C=m.getAttribute("value");typeof zt[w]=="boolean"?c[w]=C!=="false":i(zt[w])==="object"?c[w]=JSON.parse(C):c[w]=C}),c},$p=function(o){var c={},u=Array.from(o.querySelectorAll("swal-function-param"));return u.forEach(function(m){var w=m.getAttribute("name"),C=m.getAttribute("value");c[w]=new Function("return ".concat(C))()}),c},qp=function(o){var c={},u=Array.from(o.querySelectorAll("swal-button"));return u.forEach(function(m){bt(m,["type","color","aria-label"]);var w=m.getAttribute("type");c["".concat(w,"ButtonText")]=m.innerHTML,c["show".concat(hr(w),"Button")]=!0,m.hasAttribute("color")&&(c["".concat(w,"ButtonColor")]=m.getAttribute("color")),m.hasAttribute("aria-label")&&(c["".concat(w,"ButtonAriaLabel")]=m.getAttribute("aria-label"))}),c},zp=function(o){var c={},u=o.querySelector("swal-image");return u&&(bt(u,["src","width","height","alt"]),u.hasAttribute("src")&&(c.imageUrl=u.getAttribute("src")),u.hasAttribute("width")&&(c.imageWidth=u.getAttribute("width")),u.hasAttribute("height")&&(c.imageHeight=u.getAttribute("height")),u.hasAttribute("alt")&&(c.imageAlt=u.getAttribute("alt"))),c},Kp=function(o){var c={},u=o.querySelector("swal-icon");return u&&(bt(u,["type","color"]),u.hasAttribute("type")&&(c.icon=u.getAttribute("type")),u.hasAttribute("color")&&(c.iconColor=u.getAttribute("color")),c.iconHtml=u.innerHTML),c},Gp=function(o){var c={},u=o.querySelector("swal-input");u&&(bt(u,["type","label","placeholder","value"]),c.input=u.getAttribute("type")||"text",u.hasAttribute("label")&&(c.inputLabel=u.getAttribute("label")),u.hasAttribute("placeholder")&&(c.inputPlaceholder=u.getAttribute("placeholder")),u.hasAttribute("value")&&(c.inputValue=u.getAttribute("value")));var m=Array.from(o.querySelectorAll("swal-input-option"));return m.length&&(c.inputOptions={},m.forEach(function(w){bt(w,["value"]);var C=w.getAttribute("value"),A=w.innerHTML;c.inputOptions[C]=A})),c},Yp=function(o,c){var u={};for(var m in c){var w=c[m],C=o.querySelector(w);C&&(bt(C,[]),u[w.replace(/^swal-/,"")]=C.innerHTML.trim())}return u},Jp=function(o){var c=Ma.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(o.children).forEach(function(u){var m=u.tagName.toLowerCase();c.includes(m)||le("Unrecognized element <".concat(m,">"))})},bt=function(o,c){Array.from(o.attributes).forEach(function(u){c.indexOf(u.name)===-1&&le(['Unrecognized attribute "'.concat(u.name,'" on <').concat(o.tagName.toLowerCase(),">."),"".concat(c.length?"Allowed attributes are: ".concat(c.join(", ")):"To set the value, use HTML within the element.")])})},Fa=10,Xp=function(o){var c=ce(),u=F();typeof o.willOpen=="function"&&o.willOpen(u);var m=window.getComputedStyle(document.body),w=m.overflowY;tm(c,u,o),setTimeout(function(){Zp(c,u)},Fa),yr()&&(em(c,o.scrollbarPadding,w),Bf()),!ai()&&!O.previousActiveElement&&(O.previousActiveElement=document.activeElement),typeof o.didOpen=="function"&&setTimeout(function(){return o.didOpen(u)}),Oe(c,_["no-transition"])},Qp=function d(o){var c=F();if(!(o.target!==c||!vt)){var u=ce();c.removeEventListener(vt,d),u.style.overflowY="auto"}},Zp=function(o,c){vt&&Xo(c)?(o.style.overflowY="hidden",c.addEventListener(vt,Qp)):o.style.overflowY="auto"},em=function(o,c,u){Uf(),c&&u!=="hidden"&&zf(u),setTimeout(function(){o.scrollTop=0})},tm=function(o,c,u){L(o,u.showClass.backdrop),u.animation?(c.style.setProperty("opacity","0","important"),Q(c,"grid"),setTimeout(function(){L(c,u.showClass.popup),c.style.removeProperty("opacity")},Fa)):Q(c,"grid"),L([document.documentElement,document.body],_.shown),u.heightAuto&&u.backdrop&&!u.toast&&L([document.documentElement,document.body],_["height-auto"])},Ba={email:function(o,c){return/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(o)?Promise.resolve():Promise.resolve(c||"Invalid email address")},url:function(o,c){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(o)?Promise.resolve():Promise.resolve(c||"Invalid URL")}};function nm(d){d.inputValidator||(d.input==="email"&&(d.inputValidator=Ba.email),d.input==="url"&&(d.inputValidator=Ba.url))}function im(d){(!d.target||typeof d.target=="string"&&!document.querySelector(d.target)||typeof d.target!="string"&&!d.target.appendChild)&&(le('Target parameter is not valid, defaulting to "body"'),d.target="body")}function rm(d){nm(d),d.showLoaderOnConfirm&&!d.preConfirm&&le(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),im(d),typeof d.title=="string"&&(d.title=d.title.split(`
`).join("<br />")),Jh(d)}var Pe,fi=new WeakMap,Y=function(){function d(){if(r(this,d),Rh(this,fi,{writable:!0,value:void 0}),!(typeof window>"u")){Pe=this;for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var m=Object.freeze(this.constructor.argsToParams(c));this.params=m,this.isAwaitingPromise=!1,Ch(this,fi,this._main(Pe.params))}}return a(d,[{key:"_main",value:function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};vp(Object.assign({},u,c)),O.currentInstance&&(O.currentInstance._destroy(),yr()&&aa()),O.currentInstance=Pe;var m=om(c,u);rm(m),Object.freeze(m),O.timeout&&(O.timeout.stop(),delete O.timeout),clearTimeout(O.restoreFocusTimeout);var w=am(Pe);return ia(Pe,m),H.innerParams.set(Pe,m),sm(Pe,w,m)}},{key:"then",value:function(c){return Uo(this,fi).then(c)}},{key:"finally",value:function(c){return Uo(this,fi).finally(c)}}]),d}(),sm=function(o,c,u){return new Promise(function(m,w){var C=function(R){o.close({isDismissed:!0,dismiss:R})};In.swalPromiseResolve.set(o,m),In.swalPromiseReject.set(o,w),c.confirmButton.onclick=function(){lp(o)},c.denyButton.onclick=function(){up(o)},c.cancelButton.onclick=function(){dp(o,C)},c.closeButton.onclick=function(){C(Vt.close)},Tp(u,c,C),Pf(O,u,C),ep(o,u),Xp(u),cm(O,u,C),lm(c,u),setTimeout(function(){c.container.scrollTop=0})})},om=function(o,c){var u=Wp(o),m=Object.assign({},zt,c,u,o);return m.showClass=Object.assign({},zt.showClass,m.showClass),m.hideClass=Object.assign({},zt.hideClass,m.hideClass),m.animation===!1&&(m.showClass={backdrop:"swal2-noanimation"},m.hideClass={}),m},am=function(o){var c={popup:F(),container:ce(),actions:vn(),confirmButton:Re(),denyButton:_t(),cancelButton:jt(),loader:Wt(),closeButton:_r(),validationMessage:si(),progressSteps:gr()};return H.domCache.set(o,c),c},cm=function(o,c,u){var m=oi();ie(m),c.timer&&(o.timeout=new jp(function(){u("timer"),delete o.timeout},c.timer),c.timerProgressBar&&(Q(m),_e(m,c,"timerProgressBar"),setTimeout(function(){o.timeout&&o.timeout.running&&br(c.timer)})))},lm=function(o,c){if(!c.toast){if(!ri(c.allowEnterKey)){dm();return}um(o,c)||Cr(-1,1)}},um=function(o,c){return c.focusDeny&&pe(o.denyButton)?(o.denyButton.focus(),!0):c.focusCancel&&pe(o.cancelButton)?(o.cancelButton.focus(),!0):c.focusConfirm&&pe(o.confirmButton)?(o.confirmButton.focus(),!0):!1},dm=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Ua=new Date,Ha=localStorage.getItem("swal-initiation");Ha?(Ua.getTime()-Date.parse(Ha))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var d=document.createElement("audio");d.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",d.loop=!0,document.body.appendChild(d),setTimeout(function(){d.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Ua))}Y.prototype.disableButtons=ba,Y.prototype.enableButtons=va,Y.prototype.getInput=_a,Y.prototype.disableInput=Ia,Y.prototype.enableInput=Ea,Y.prototype.hideLoading=di,Y.prototype.disableLoading=di,Y.prototype.showValidationMessage=Ta,Y.prototype.resetValidationMessage=Ca,Y.prototype.close=tt,Y.prototype.closePopup=tt,Y.prototype.closeModal=tt,Y.prototype.closeToast=tt,Y.prototype.rejectPromise=ua,Y.prototype.update=Ra,Y.prototype._destroy=Oa,Object.assign(Y,Hp),Object.keys(Ip).forEach(function(d){Y[d]=function(){if(Pe&&Pe[d]){var o;return(o=Pe)[d].apply(o,arguments)}return null}}),Y.DismissReason=Vt,Y.version="11.10.0";var pi=Y;return pi.default=pi,pi}),typeof nt<"u"&&nt.Sweetalert2&&(nt.swal=nt.sweetAlert=nt.Swal=nt.SweetAlert=nt.Sweetalert2),typeof document<"u"&&function(n,i){var r=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(r),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=i);else try{r.innerHTML=i}catch{r.innerText=i}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')})(hm);const IC=as;function Tl(t,e){return function(){return t.apply(e,arguments)}}const{toString:fm}=Object.prototype,{getPrototypeOf:Us}=Object,Gi=(t=>e=>{const n=fm.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fe=t=>(t=t.toLowerCase(),e=>Gi(e)===t),Yi=t=>e=>typeof e===t,{isArray:cn}=Array,Fn=Yi("undefined");function pm(t){return t!==null&&!Fn(t)&&t.constructor!==null&&!Fn(t.constructor)&&ye(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Cl=Fe("ArrayBuffer");function mm(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Cl(t.buffer),e}const gm=Yi("string"),ye=Yi("function"),Sl=Yi("number"),Ji=t=>t!==null&&typeof t=="object",_m=t=>t===!0||t===!1,yi=t=>{if(Gi(t)!=="object")return!1;const e=Us(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},wm=Fe("Date"),ym=Fe("File"),vm=Fe("Blob"),bm=Fe("FileList"),Em=t=>Ji(t)&&ye(t.pipe),Im=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ye(t.append)&&((e=Gi(t))==="formdata"||e==="object"&&ye(t.toString)&&t.toString()==="[object FormData]"))},Tm=Fe("URLSearchParams"),Cm=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zn(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),cn(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let l;for(i=0;i<a;i++)l=s[i],e.call(null,t[l],l,t)}}function kl(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const Al=t=>!Fn(t)&&t!=={};function cs(){const{caseless:t}=Al(this)&&this||{},e={},n=(i,r)=>{const s=t&&kl(e,r)||r;yi(e[s])&&yi(i)?e[s]=cs(e[s],i):yi(i)?e[s]=cs({},i):cn(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&zn(arguments[i],n);return e}const Sm=(t,e,n,{allOwnKeys:i}={})=>(zn(e,(r,s)=>{n&&ye(r)?t[s]=Tl(r,n):t[s]=r},{allOwnKeys:i}),t),km=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Am=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Rm=(t,e,n,i)=>{let r,s,a;const l={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)a=r[s],(!i||i(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=n!==!1&&Us(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Om=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},Pm=t=>{if(!t)return null;if(cn(t))return t;let e=t.length;if(!Sl(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Nm=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Us(Uint8Array)),Dm=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(t,s[0],s[1])}},xm=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},Lm=Fe("HTMLFormElement"),Mm=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),ja=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Fm=Fe("RegExp"),Rl=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};zn(n,(r,s)=>{let a;(a=e(r,s,t))!==!1&&(i[s]=a||r)}),Object.defineProperties(t,i)},Bm=t=>{Rl(t,(e,n)=>{if(ye(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(ye(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Um=(t,e)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return cn(t)?i(t):i(String(t).split(e)),n},Hm=()=>{},jm=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Or="abcdefghijklmnopqrstuvwxyz",Wa="0123456789",Ol={DIGIT:Wa,ALPHA:Or,ALPHA_DIGIT:Or+Or.toUpperCase()+Wa},Wm=(t=16,e=Ol.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function Vm(t){return!!(t&&ye(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const $m=t=>{const e=new Array(10),n=(i,r)=>{if(Ji(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=cn(i)?[]:{};return zn(i,(a,l)=>{const h=n(a,r+1);!Fn(h)&&(s[l]=h)}),e[r]=void 0,s}}return i};return n(t,0)},qm=Fe("AsyncFunction"),zm=t=>t&&(Ji(t)||ye(t))&&ye(t.then)&&ye(t.catch),b={isArray:cn,isArrayBuffer:Cl,isBuffer:pm,isFormData:Im,isArrayBufferView:mm,isString:gm,isNumber:Sl,isBoolean:_m,isObject:Ji,isPlainObject:yi,isUndefined:Fn,isDate:wm,isFile:ym,isBlob:vm,isRegExp:Fm,isFunction:ye,isStream:Em,isURLSearchParams:Tm,isTypedArray:Nm,isFileList:bm,forEach:zn,merge:cs,extend:Sm,trim:Cm,stripBOM:km,inherits:Am,toFlatObject:Rm,kindOf:Gi,kindOfTest:Fe,endsWith:Om,toArray:Pm,forEachEntry:Dm,matchAll:xm,isHTMLForm:Lm,hasOwnProperty:ja,hasOwnProp:ja,reduceDescriptors:Rl,freezeMethods:Bm,toObjectSet:Um,toCamelCase:Mm,noop:Hm,toFiniteNumber:jm,findKey:kl,global:{},isContextDefined:Al,ALPHABET:Ol,generateString:Wm,isSpecCompliantForm:Vm,toJSONObject:$m,isAsyncFn:qm,isThenable:zm};function N(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}b.inherits(N,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:b.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Pl=N.prototype,Nl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Nl[t]={value:t}});Object.defineProperties(N,Nl);Object.defineProperty(Pl,"isAxiosError",{value:!0});N.from=(t,e,n,i,r,s)=>{const a=Object.create(Pl);return b.toFlatObject(t,a,function(h){return h!==Error.prototype},l=>l!=="isAxiosError"),N.call(a,t.message,e,n,i,r),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const Km=null;function ls(t){return b.isPlainObject(t)||b.isArray(t)}function Dl(t){return b.endsWith(t,"[]")?t.slice(0,-2):t}function Va(t,e,n){return t?t.concat(e).map(function(r,s){return r=Dl(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function Gm(t){return b.isArray(t)&&!t.some(ls)}const Ym=b.toFlatObject(b,{},null,function(e){return/^is[A-Z]/.test(e)});function Xi(t,e,n){if(!b.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=b.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,S){return!b.isUndefined(S[T])});const i=n.metaTokens,r=n.visitor||p,s=n.dots,a=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&b.isSpecCompliantForm(e);if(!b.isFunction(r))throw new TypeError("visitor must be a function");function f(v){if(v===null)return"";if(b.isDate(v))return v.toISOString();if(!h&&b.isBlob(v))throw new N("Blob is not supported. Use a Buffer instead.");return b.isArrayBuffer(v)||b.isTypedArray(v)?h&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function p(v,T,S){let q=v;if(v&&!S&&typeof v=="object"){if(b.endsWith(T,"{}"))T=i?T:T.slice(0,-2),v=JSON.stringify(v);else if(b.isArray(v)&&Gm(v)||(b.isFileList(v)||b.endsWith(T,"[]"))&&(q=b.toArray(v)))return T=Dl(T),q.forEach(function(K,J){!(b.isUndefined(K)||K===null)&&e.append(a===!0?Va([T],J,s):a===null?T:T+"[]",f(K))}),!1}return ls(v)?!0:(e.append(Va(S,T,s),f(v)),!1)}const g=[],y=Object.assign(Ym,{defaultVisitor:p,convertValue:f,isVisitable:ls});function I(v,T){if(!b.isUndefined(v)){if(g.indexOf(v)!==-1)throw Error("Circular reference detected in "+T.join("."));g.push(v),b.forEach(v,function(q,z){(!(b.isUndefined(q)||q===null)&&r.call(e,q,b.isString(z)?z.trim():z,T,y))===!0&&I(q,T?T.concat(z):[z])}),g.pop()}}if(!b.isObject(t))throw new TypeError("data must be an object");return I(t),e}function $a(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Hs(t,e){this._pairs=[],t&&Xi(t,this,e)}const xl=Hs.prototype;xl.append=function(e,n){this._pairs.push([e,n])};xl.toString=function(e){const n=e?function(i){return e.call(this,i,$a)}:$a;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Jm(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ll(t,e,n){if(!e)return t;const i=n&&n.encode||Jm,r=n&&n.serialize;let s;if(r?s=r(e,n):s=b.isURLSearchParams(e)?e.toString():new Hs(e,n).toString(i),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Xm{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){b.forEach(this.handlers,function(i){i!==null&&e(i)})}}const qa=Xm,Ml={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qm=typeof URLSearchParams<"u"?URLSearchParams:Hs,Zm=typeof FormData<"u"?FormData:null,eg=typeof Blob<"u"?Blob:null,tg={isBrowser:!0,classes:{URLSearchParams:Qm,FormData:Zm,Blob:eg},protocols:["http","https","file","blob","url","data"]},Fl=typeof window<"u"&&typeof document<"u",ng=(t=>Fl&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),ig=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),rg=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fl,hasStandardBrowserWebWorkerEnv:ig,hasStandardBrowserEnv:ng},Symbol.toStringTag,{value:"Module"})),Ne={...rg,...tg};function sg(t,e){return Xi(t,new Ne.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,s){return Ne.isNode&&b.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function og(t){return b.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ag(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}function Bl(t){function e(n,i,r,s){let a=n[s++];const l=Number.isFinite(+a),h=s>=n.length;return a=!a&&b.isArray(r)?r.length:a,h?(b.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!l):((!r[a]||!b.isObject(r[a]))&&(r[a]=[]),e(n,i,r[a],s)&&b.isArray(r[a])&&(r[a]=ag(r[a])),!l)}if(b.isFormData(t)&&b.isFunction(t.entries)){const n={};return b.forEachEntry(t,(i,r)=>{e(og(i),r,n,0)}),n}return null}function cg(t,e,n){if(b.isString(t))try{return(e||JSON.parse)(t),b.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const js={transitional:Ml,adapter:["xhr","http"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=b.isObject(e);if(s&&b.isHTMLForm(e)&&(e=new FormData(e)),b.isFormData(e))return r&&r?JSON.stringify(Bl(e)):e;if(b.isArrayBuffer(e)||b.isBuffer(e)||b.isStream(e)||b.isFile(e)||b.isBlob(e))return e;if(b.isArrayBufferView(e))return e.buffer;if(b.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return sg(e,this.formSerializer).toString();if((l=b.isFileList(e))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Xi(l?{"files[]":e}:e,h&&new h,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),cg(e)):e}],transformResponse:[function(e){const n=this.transitional||js.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&b.isString(e)&&(i&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?N.from(l,N.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ne.classes.FormData,Blob:Ne.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};b.forEach(["delete","get","head","post","put","patch"],t=>{js.headers[t]={}});const Ws=js,lg=b.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ug=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),i=a.substring(r+1).trim(),!(!n||e[n]&&lg[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},za=Symbol("internals");function Sn(t){return t&&String(t).trim().toLowerCase()}function vi(t){return t===!1||t==null?t:b.isArray(t)?t.map(vi):String(t)}function dg(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const hg=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Pr(t,e,n,i,r){if(b.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!b.isString(e)){if(b.isString(i))return e.indexOf(i)!==-1;if(b.isRegExp(i))return i.test(e)}}function fg(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function pg(t,e){const n=b.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,s,a){return this[i].call(this,e,r,s,a)},configurable:!0})})}class Qi{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function s(l,h,f){const p=Sn(h);if(!p)throw new Error("header name must be a non-empty string");const g=b.findKey(r,p);(!g||r[g]===void 0||f===!0||f===void 0&&r[g]!==!1)&&(r[g||h]=vi(l))}const a=(l,h)=>b.forEach(l,(f,p)=>s(f,p,h));return b.isPlainObject(e)||e instanceof this.constructor?a(e,n):b.isString(e)&&(e=e.trim())&&!hg(e)?a(ug(e),n):e!=null&&s(n,e,i),this}get(e,n){if(e=Sn(e),e){const i=b.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return dg(r);if(b.isFunction(n))return n.call(this,r,i);if(b.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Sn(e),e){const i=b.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Pr(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function s(a){if(a=Sn(a),a){const l=b.findKey(i,a);l&&(!n||Pr(i,i[l],l,n))&&(delete i[l],r=!0)}}return b.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!e||Pr(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,i={};return b.forEach(this,(r,s)=>{const a=b.findKey(i,s);if(a){n[a]=vi(r),delete n[s];return}const l=e?fg(s):String(s).trim();l!==s&&delete n[s],n[l]=vi(r),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return b.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&b.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[za]=this[za]={accessors:{}}).accessors,r=this.prototype;function s(a){const l=Sn(a);i[l]||(pg(r,a),i[l]=!0)}return b.isArray(e)?e.forEach(s):s(e),this}}Qi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);b.reduceDescriptors(Qi.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});b.freezeMethods(Qi);const ze=Qi;function Nr(t,e){const n=this||Ws,i=e||n,r=ze.from(i.headers);let s=i.data;return b.forEach(t,function(l){s=l.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function Ul(t){return!!(t&&t.__CANCEL__)}function Kn(t,e,n){N.call(this,t??"canceled",N.ERR_CANCELED,e,n),this.name="CanceledError"}b.inherits(Kn,N,{__CANCEL__:!0});function mg(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new N("Request failed with status code "+n.status,[N.ERR_BAD_REQUEST,N.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const gg=Ne.hasStandardBrowserEnv?function(){return{write:function(n,i,r,s,a,l){const h=[];h.push(n+"="+encodeURIComponent(i)),b.isNumber(r)&&h.push("expires="+new Date(r).toGMTString()),b.isString(s)&&h.push("path="+s),b.isString(a)&&h.push("domain="+a),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function _g(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function wg(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Hl(t,e){return t&&!_g(e)?wg(t,e):e}const yg=Ne.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(s){let a=s;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(a){const l=b.isString(a)?r(a):a;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}();function vg(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function bg(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,s=0,a;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),p=i[s];a||(a=f),n[r]=h,i[r]=f;let g=s,y=0;for(;g!==r;)y+=n[g++],g=g%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),f-a<e)return;const I=p&&f-p;return I?Math.round(y*1e3/I):void 0}}function Ka(t,e){let n=0;const i=bg(50,250);return r=>{const s=r.loaded,a=r.lengthComputable?r.total:void 0,l=s-n,h=i(l),f=s<=a;n=s;const p={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:h||void 0,estimated:h&&a&&f?(a-s)/h:void 0,event:r};p[e?"download":"upload"]=!0,t(p)}}const Eg=typeof XMLHttpRequest<"u",Ig=Eg&&function(t){return new Promise(function(n,i){let r=t.data;const s=ze.from(t.headers).normalize(),a=t.responseType;let l;function h(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let f;if(b.isFormData(r)){if(Ne.hasStandardBrowserEnv||Ne.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((f=s.getContentType())!==!1){const[v,...T]=f?f.split(";").map(S=>S.trim()).filter(Boolean):[];s.setContentType([v||"multipart/form-data",...T].join("; "))}}let p=new XMLHttpRequest;if(t.auth){const v=t.auth.username||"",T=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(v+":"+T))}const g=Hl(t.baseURL,t.url);p.open(t.method.toUpperCase(),Ll(g,t.params,t.paramsSerializer),!0),p.timeout=t.timeout;function y(){if(!p)return;const v=ze.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:v,config:t,request:p};mg(function(z){n(z),h()},function(z){i(z),h()},S),p=null}if("onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(y)},p.onabort=function(){p&&(i(new N("Request aborted",N.ECONNABORTED,t,p)),p=null)},p.onerror=function(){i(new N("Network Error",N.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let T=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const S=t.transitional||Ml;t.timeoutErrorMessage&&(T=t.timeoutErrorMessage),i(new N(T,S.clarifyTimeoutError?N.ETIMEDOUT:N.ECONNABORTED,t,p)),p=null},Ne.hasStandardBrowserEnv){const v=yg(g)&&t.xsrfCookieName&&gg.read(t.xsrfCookieName);v&&s.set(t.xsrfHeaderName,v)}r===void 0&&s.setContentType(null),"setRequestHeader"in p&&b.forEach(s.toJSON(),function(T,S){p.setRequestHeader(S,T)}),b.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),a&&a!=="json"&&(p.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&p.addEventListener("progress",Ka(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",Ka(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=v=>{p&&(i(!v||v.type?new Kn(null,t,p):v),p.abort(),p=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const I=vg(g);if(I&&Ne.protocols.indexOf(I)===-1){i(new N("Unsupported protocol "+I+":",N.ERR_BAD_REQUEST,t));return}p.send(r||null)})},us={http:Km,xhr:Ig};b.forEach(us,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ga=t=>`- ${t}`,Tg=t=>b.isFunction(t)||t===null||t===!1,jl={getAdapter:t=>{t=b.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let s=0;s<e;s++){n=t[s];let a;if(i=n,!Tg(n)&&(i=us[(a=String(n)).toLowerCase()],i===void 0))throw new N(`Unknown adapter '${a}'`);if(i)break;r[a||"#"+s]=i}if(!i){const s=Object.entries(r).map(([l,h])=>`adapter ${l} `+(h===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(Ga).join(`
`):" "+Ga(s[0]):"as no adapter specified";throw new N("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:us};function Dr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Kn(null,t)}function Ya(t){return Dr(t),t.headers=ze.from(t.headers),t.data=Nr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),jl.getAdapter(t.adapter||Ws.adapter)(t).then(function(i){return Dr(t),i.data=Nr.call(t,t.transformResponse,i),i.headers=ze.from(i.headers),i},function(i){return Ul(i)||(Dr(t),i&&i.response&&(i.response.data=Nr.call(t,t.transformResponse,i.response),i.response.headers=ze.from(i.response.headers))),Promise.reject(i)})}const Ja=t=>t instanceof ze?t.toJSON():t;function nn(t,e){e=e||{};const n={};function i(f,p,g){return b.isPlainObject(f)&&b.isPlainObject(p)?b.merge.call({caseless:g},f,p):b.isPlainObject(p)?b.merge({},p):b.isArray(p)?p.slice():p}function r(f,p,g){if(b.isUndefined(p)){if(!b.isUndefined(f))return i(void 0,f,g)}else return i(f,p,g)}function s(f,p){if(!b.isUndefined(p))return i(void 0,p)}function a(f,p){if(b.isUndefined(p)){if(!b.isUndefined(f))return i(void 0,f)}else return i(void 0,p)}function l(f,p,g){if(g in e)return i(f,p);if(g in t)return i(void 0,f)}const h={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(f,p)=>r(Ja(f),Ja(p),!0)};return b.forEach(Object.keys(Object.assign({},t,e)),function(p){const g=h[p]||r,y=g(t[p],e[p],p);b.isUndefined(y)&&g!==l||(n[p]=y)}),n}const Wl="1.6.1",Vs={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Vs[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const Xa={};Vs.transitional=function(e,n,i){function r(s,a){return"[Axios v"+Wl+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,l)=>{if(e===!1)throw new N(r(a," has been removed"+(n?" in "+n:"")),N.ERR_DEPRECATED);return n&&!Xa[a]&&(Xa[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,l):!0}};function Cg(t,e,n){if(typeof t!="object")throw new N("options must be an object",N.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],a=e[s];if(a){const l=t[s],h=l===void 0||a(l,s,t);if(h!==!0)throw new N("option "+s+" must be "+h,N.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new N("Unknown option "+s,N.ERR_BAD_OPTION)}}const ds={assertOptions:Cg,validators:Vs},it=ds.validators;class Si{constructor(e){this.defaults=e,this.interceptors={request:new qa,response:new qa}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=nn(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&ds.assertOptions(i,{silentJSONParsing:it.transitional(it.boolean),forcedJSONParsing:it.transitional(it.boolean),clarifyTimeoutError:it.transitional(it.boolean)},!1),r!=null&&(b.isFunction(r)?n.paramsSerializer={serialize:r}:ds.assertOptions(r,{encode:it.function,serialize:it.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&b.merge(s.common,s[n.method]);s&&b.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),n.headers=ze.concat(a,s);const l=[];let h=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(h=h&&T.synchronous,l.unshift(T.fulfilled,T.rejected))});const f=[];this.interceptors.response.forEach(function(T){f.push(T.fulfilled,T.rejected)});let p,g=0,y;if(!h){const v=[Ya.bind(this),void 0];for(v.unshift.apply(v,l),v.push.apply(v,f),y=v.length,p=Promise.resolve(n);g<y;)p=p.then(v[g++],v[g++]);return p}y=l.length;let I=n;for(g=0;g<y;){const v=l[g++],T=l[g++];try{I=v(I)}catch(S){T.call(this,S);break}}try{p=Ya.call(this,I)}catch(v){return Promise.reject(v)}for(g=0,y=f.length;g<y;)p=p.then(f[g++],f[g++]);return p}getUri(e){e=nn(this.defaults,e);const n=Hl(e.baseURL,e.url);return Ll(n,e.params,e.paramsSerializer)}}b.forEach(["delete","get","head","options"],function(e){Si.prototype[e]=function(n,i){return this.request(nn(i||{},{method:e,url:n,data:(i||{}).data}))}});b.forEach(["post","put","patch"],function(e){function n(i){return function(s,a,l){return this.request(nn(l||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Si.prototype[e]=n(),Si.prototype[e+"Form"]=n(!0)});const bi=Si;class $s{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(l=>{i.subscribe(l),s=l}).then(r);return a.cancel=function(){i.unsubscribe(s)},a},e(function(s,a,l){i.reason||(i.reason=new Kn(s,a,l),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new $s(function(r){e=r}),cancel:e}}}const Sg=$s;function kg(t){return function(n){return t.apply(null,n)}}function Ag(t){return b.isObject(t)&&t.isAxiosError===!0}const hs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hs).forEach(([t,e])=>{hs[e]=t});const Rg=hs;function Vl(t){const e=new bi(t),n=Tl(bi.prototype.request,e);return b.extend(n,bi.prototype,e,{allOwnKeys:!0}),b.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return Vl(nn(t,r))},n}const X=Vl(Ws);X.Axios=bi;X.CanceledError=Kn;X.CancelToken=Sg;X.isCancel=Ul;X.VERSION=Wl;X.toFormData=Xi;X.AxiosError=N;X.Cancel=X.CanceledError;X.all=function(e){return Promise.all(e)};X.spread=kg;X.isAxiosError=Ag;X.mergeConfig=nn;X.AxiosHeaders=ze;X.formToJSON=t=>Bl(b.isHTMLForm(t)?new FormData(t):t);X.getAdapter=jl.getAdapter;X.HttpStatusCode=Rg;X.default=X;const TC=X;const $l={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const E=function(t,e){if(!t)throw ln(e)},ln=function(t){return new Error("Firebase Database ("+$l.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};const ql=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Og=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],l=t[n++],h=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},qs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,l=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,p=s>>2,g=(s&3)<<4|l>>4;let y=(l&15)<<2|f>>6,I=f&63;h||(I=64,a||(y=64)),i.push(n[p],n[g],n[y],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ql(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Og(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||l==null||f==null||g==null)throw new Pg;const y=s<<2|l>>4;if(i.push(y),f!==64){const I=l<<4&240|f>>2;if(i.push(I),g!==64){const v=f<<6&192|g;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Pg extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zl=function(t){const e=ql(t);return qs.encodeByteArray(e,!0)},ki=function(t){return zl(t).replace(/\./g,"")},Ai=function(t){try{return qs.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ng(t){return Kl(void 0,t)}function Kl(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Dg(n)||(t[n]=Kl(t[n],e[n]));return t}function Dg(t){return t!=="__proto__"}function xg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Lg=()=>xg().__FIREBASE_DEFAULTS__,Mg=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Fg=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ai(t[1]);return e&&JSON.parse(e)},zs=()=>{try{return Lg()||Mg()||Fg()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gl=t=>{var e,n;return(n=(e=zs())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Bg=t=>{const e=Gl(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Yl=()=>{var t;return(t=zs())===null||t===void 0?void 0:t.config},Jl=t=>{var e;return(e=zs())===null||e===void 0?void 0:e[`_${t}`]};class Ks{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Ug(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[ki(JSON.stringify(n)),ki(JSON.stringify(a)),l].join(".")}function ae(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gs(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ae())}function Hg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Xl(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jg(){const t=ae();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ql(){return $l.NODE_ADMIN===!0}function Wg(){try{return typeof indexedDB=="object"}catch{return!1}}function Vg(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}const $g="FirebaseError";class Be extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=$g,Object.setPrototypeOf(this,Be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?qg(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Be(r,l,i)}}function qg(t,e){return t.replace(zg,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const zg=/\{\$([^}]+)}/g;function Bn(t){return JSON.parse(t)}function ne(t){return JSON.stringify(t)}const Zl=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=Bn(Ai(s[0])||""),n=Bn(Ai(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},Kg=function(t){const e=Zl(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Gg=function(t){const e=Zl(t).claims;return typeof e=="object"&&e.admin===!0};function Xe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function fs(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ri(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Oi(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(Qa(s)&&Qa(a)){if(!Oi(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Qa(t){return t!==null&&typeof t=="object"}function un(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Pn(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Nn(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class Yg{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)i[g]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let g=0;g<16;g++)i[g]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let g=16;g<80;g++){const y=i[g-3]^i[g-8]^i[g-14]^i[g-16];i[g]=(y<<1|y>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],h=this.chain_[4],f,p;for(let g=0;g<80;g++){g<40?g<20?(f=l^s&(a^l),p=1518500249):(f=s^a^l,p=1859775393):g<60?(f=s&a|l&(s|a),p=2400959708):(f=s^a^l,p=3395469782);const y=(r<<5|r>>>27)+f+h+p+i[g]&4294967295;h=l,l=a,a=(s<<30|s>>>2)&4294967295,s=r,r=y}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let a=this.inbuf_;for(;r<n;){if(a===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}else for(;r<n;)if(s[a]=e[r],++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function Jg(t,e){const n=new Xg(t,e);return n.subscribe.bind(n)}class Xg{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Qg(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=xr),r.error===void 0&&(r.error=xr),r.complete===void 0&&(r.complete=xr);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qg(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xr(){}function Zg(t,e){return`${t} failed: ${e} argument `}const e_=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,E(i<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(i)-56320;r=65536+(s<<10)+a}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Zi=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};function Qe(t){return t&&t._delegate?t._delegate:t}class ve{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Et="[DEFAULT]";class t_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ks;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(i_(e))try{this.getOrInitializeService({instanceIdentifier:Et})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Et){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Et){return this.instances.has(e)}getOptions(e=Et){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:n_(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Et){return this.component?this.component.multipleInstances?e:Et:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n_(t){return t===Et?void 0:t}function i_(t){return t.instantiationMode==="EAGER"}class r_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new t_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var B;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(B||(B={}));const s_={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},o_=B.INFO,a_={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},c_=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=a_[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ys{constructor(e){this.name=e,this._logLevel=o_,this._logHandler=c_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...e),this._logHandler(this,B.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...e),this._logHandler(this,B.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,B.INFO,...e),this._logHandler(this,B.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,B.WARN,...e),this._logHandler(this,B.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...e),this._logHandler(this,B.ERROR,...e)}}const l_=(t,e)=>e.some(n=>t instanceof n);let Za,ec;function u_(){return Za||(Za=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d_(){return ec||(ec=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eu=new WeakMap,ps=new WeakMap,tu=new WeakMap,Lr=new WeakMap,Js=new WeakMap;function h_(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(lt(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&eu.set(n,t)}).catch(()=>{}),Js.set(e,t),e}function f_(t){if(ps.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});ps.set(t,e)}let ms={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ps.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tu.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function p_(t){ms=t(ms)}function m_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Mr(this),e,...n);return tu.set(i,e.sort?e.sort():[e]),lt(i)}:d_().includes(t)?function(...e){return t.apply(Mr(this),e),lt(eu.get(this))}:function(...e){return lt(t.apply(Mr(this),e))}}function g_(t){return typeof t=="function"?m_(t):(t instanceof IDBTransaction&&f_(t),l_(t,u_())?new Proxy(t,ms):t)}function lt(t){if(t instanceof IDBRequest)return h_(t);if(Lr.has(t))return Lr.get(t);const e=g_(t);return e!==t&&(Lr.set(t,e),Js.set(e,t)),e}const Mr=t=>Js.get(t);function __(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=lt(a);return i&&a.addEventListener("upgradeneeded",h=>{i(lt(a.result),h.oldVersion,h.newVersion,lt(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),l.then(h=>{s&&h.addEventListener("close",()=>s()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const w_=["get","getKey","getAll","getAllKeys","count"],y_=["put","add","delete","clear"],Fr=new Map;function tc(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fr.get(e))return Fr.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=y_.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||w_.includes(n)))return;const s=async function(a,...l){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),r&&h.done]))[0]};return Fr.set(e,s),s}p_(t=>({...t,get:(e,n,i)=>tc(e,n)||t.get(e,n,i),has:(e,n)=>!!tc(e,n)||t.has(e,n)}));class v_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b_(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function b_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gs="@firebase/app",nc="0.9.23";const At=new Ys("@firebase/app"),E_="@firebase/app-compat",I_="@firebase/analytics-compat",T_="@firebase/analytics",C_="@firebase/app-check-compat",S_="@firebase/app-check",k_="@firebase/auth",A_="@firebase/auth-compat",R_="@firebase/database",O_="@firebase/database-compat",P_="@firebase/functions",N_="@firebase/functions-compat",D_="@firebase/installations",x_="@firebase/installations-compat",L_="@firebase/messaging",M_="@firebase/messaging-compat",F_="@firebase/performance",B_="@firebase/performance-compat",U_="@firebase/remote-config",H_="@firebase/remote-config-compat",j_="@firebase/storage",W_="@firebase/storage-compat",V_="@firebase/firestore",$_="@firebase/firestore-compat",q_="firebase",z_="10.6.0";const _s="[DEFAULT]",K_={[gs]:"fire-core",[E_]:"fire-core-compat",[T_]:"fire-analytics",[I_]:"fire-analytics-compat",[S_]:"fire-app-check",[C_]:"fire-app-check-compat",[k_]:"fire-auth",[A_]:"fire-auth-compat",[R_]:"fire-rtdb",[O_]:"fire-rtdb-compat",[P_]:"fire-fn",[N_]:"fire-fn-compat",[D_]:"fire-iid",[x_]:"fire-iid-compat",[L_]:"fire-fcm",[M_]:"fire-fcm-compat",[F_]:"fire-perf",[B_]:"fire-perf-compat",[U_]:"fire-rc",[H_]:"fire-rc-compat",[j_]:"fire-gcs",[W_]:"fire-gcs-compat",[V_]:"fire-fst",[$_]:"fire-fst-compat","fire-js":"fire-js",[q_]:"fire-js-all"};const Pi=new Map,ws=new Map;function G_(t,e){try{t.container.addComponent(e)}catch(n){At.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Se(t){const e=t.name;if(ws.has(e))return At.debug(`There were multiple attempts to register component ${e}.`),!1;ws.set(e,t);for(const n of Pi.values())G_(n,t);return!0}function Gn(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Y_={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ut=new Mt("app","Firebase",Y_);class J_{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ve("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ut.create("app-deleted",{appName:this._name})}}const Ft=z_;function X_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:_s,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ut.create("bad-app-name",{appName:String(r)});if(n||(n=Yl()),!n)throw ut.create("no-options");const s=Pi.get(r);if(s){if(Oi(n,s.options)&&Oi(i,s.config))return s;throw ut.create("duplicate-app",{appName:r})}const a=new r_(r);for(const h of ws.values())a.addComponent(h);const l=new J_(n,i,a);return Pi.set(r,l),l}function nu(t=_s){const e=Pi.get(t);if(!e&&t===_s&&Yl())return X_();if(!e)throw ut.create("no-app",{appName:t});return e}function de(t,e,n){var i;let r=(i=K_[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),At.warn(l.join(" "));return}Se(new ve(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Q_="firebase-heartbeat-database",Z_=1,Un="firebase-heartbeat-store";let Br=null;function iu(){return Br||(Br=__(Q_,Z_,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Un)}}}).catch(t=>{throw ut.create("idb-open",{originalErrorMessage:t.message})})),Br}async function ew(t){try{return await(await iu()).transaction(Un).objectStore(Un).get(ru(t))}catch(e){if(e instanceof Be)At.warn(e.message);else{const n=ut.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});At.warn(n.message)}}}async function ic(t,e){try{const i=(await iu()).transaction(Un,"readwrite");await i.objectStore(Un).put(e,ru(t)),await i.done}catch(n){if(n instanceof Be)At.warn(n.message);else{const i=ut.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});At.warn(i.message)}}}function ru(t){return`${t.name}!${t.options.appId}`}const tw=1024,nw=30*24*60*60*1e3;class iw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sw(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rc();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=nw}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rc(),{heartbeatsToSend:i,unsentEntries:r}=rw(this._heartbeatsCache.heartbeats),s=ki(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function rc(){return new Date().toISOString().substring(0,10)}function rw(t,e=tw){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),sc(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),sc(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class sw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wg()?Vg().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await ew(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return ic(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return ic(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sc(t){return ki(JSON.stringify({version:2,heartbeats:t})).length}function ow(t){Se(new ve("platform-logger",e=>new v_(e),"PRIVATE")),Se(new ve("heartbeat",e=>new iw(e),"PRIVATE")),de(gs,nc,t),de(gs,nc,"esm2017"),de("fire-js","")}ow("");var aw="firebase",cw="10.6.0";de(aw,cw,"app");function Xs(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function su(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lw=su,ou=new Mt("auth","Firebase",su());const Ni=new Ys("@firebase/auth");function uw(t,...e){Ni.logLevel<=B.WARN&&Ni.warn(`Auth (${Ft}): ${t}`,...e)}function Ei(t,...e){Ni.logLevel<=B.ERROR&&Ni.error(`Auth (${Ft}): ${t}`,...e)}function ke(t,...e){throw Qs(t,...e)}function xe(t,...e){return Qs(t,...e)}function dw(t,e,n){const i=Object.assign(Object.assign({},lw()),{[e]:n});return new Mt("auth","Firebase",i).create(e,{appName:t.name})}function Qs(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return ou.create(t,...e)}function k(t,e,...n){if(!t)throw Qs(e,...n)}function Ve(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ei(e),new Error(e)}function Ye(t,e){t||Ve(e)}function ys(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hw(){return oc()==="http:"||oc()==="https:"}function oc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function fw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hw()||Hg()||"connection"in navigator)?navigator.onLine:!0}function pw(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Yn{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ye(n>e,"Short delay should be less than long delay!"),this.isMobile=Gs()||Xl()}get(){return fw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zs(t,e){Ye(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class au{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const gw=new Yn(3e4,6e4);function Bt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pt(t,e,n,i,r={}){return cu(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const l=un(Object.assign({key:t.config.apiKey},a)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),au.fetch()(lu(t,t.config.apiHost,n,l),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},s))})}async function cu(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},mw),e);try{const r=new ww(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw mi(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[h,f]=l.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw mi(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw mi(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw mi(t,"user-disabled",a);const p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw dw(t,p,f);ke(t,p)}}catch(r){if(r instanceof Be)throw r;ke(t,"network-request-failed",{message:String(r)})}}async function er(t,e,n,i,r={}){const s=await pt(t,e,n,i,r);return"mfaPendingCredential"in s&&ke(t,"multi-factor-auth-required",{_serverResponse:s}),s}function lu(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Zs(t.config,r):`${t.config.apiScheme}://${r}`}function _w(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ww{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(xe(this.auth,"network-request-failed")),gw.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mi(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=xe(t,e,i);return r.customData._tokenResponse=n,r}function ac(t){return t!==void 0&&t.enterprise!==void 0}class yw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _w(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function vw(t,e){return pt(t,"GET","/v2/recaptchaConfig",Bt(t,e))}async function bw(t,e){return pt(t,"POST","/v1/accounts:delete",e)}async function Ew(t,e){return pt(t,"POST","/v1/accounts:lookup",e)}function Dn(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Iw(t,e=!1){const n=Qe(t),i=await n.getIdToken(e),r=eo(i);k(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Dn(Ur(r.auth_time)),issuedAtTime:Dn(Ur(r.iat)),expirationTime:Dn(Ur(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ur(t){return Number(t)*1e3}function eo(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Ei("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ai(n);return r?JSON.parse(r):(Ei("Failed to decode base64 JWT payload"),null)}catch(r){return Ei("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Tw(t){const e=eo(t);return k(e,"internal-error"),k(typeof e.exp<"u","internal-error"),k(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Hn(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Be&&Cw(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Cw({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Sw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class uu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dn(this.lastLoginAt),this.creationTime=Dn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Di(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Hn(t,Ew(n,{idToken:i}));k(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Rw(s.providerUserInfo):[],l=Aw(t.providerData,a),h=t.isAnonymous,f=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),p=h?f:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new uu(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function kw(t){const e=Qe(t);await Di(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Aw(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Rw(t){return t.map(e=>{var{providerId:n}=e,i=Xs(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function Ow(t,e){const n=await cu(t,{},async()=>{const i=un({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=lu(t,r,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",au.fetch()(a,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Pw(t,e){return pt(t,"POST","/v2/accounts:revokeToken",Bt(t,e))}class jn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k(e.idToken,"internal-error"),k(typeof e.idToken<"u","internal-error"),k(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return k(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await Ow(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new jn;return i&&(k(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(k(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(k(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jn,this.toJSON())}_performRefresh(){return Ve("not implemented")}}function rt(t,e){k(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class St{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Xs(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uu(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Hn(this,this.stsTokenManager.getToken(this.auth,e));return k(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Iw(this,e)}reload(){return kw(this)}_assign(e){this!==e&&(k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new St(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Di(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Hn(this,bw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,l,h,f,p;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(r=n.email)!==null&&r!==void 0?r:void 0,I=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(a=n.photoURL)!==null&&a!==void 0?a:void 0,T=(l=n.tenantId)!==null&&l!==void 0?l:void 0,S=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,q=(f=n.createdAt)!==null&&f!==void 0?f:void 0,z=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:K,emailVerified:J,isAnonymous:He,providerData:Ae,stsTokenManager:Ze}=n;k(K&&Ze,e,"internal-error");const mt=jn.fromJSON(this.name,Ze);k(typeof K=="string",e,"internal-error"),rt(g,e.name),rt(y,e.name),k(typeof J=="boolean",e,"internal-error"),k(typeof He=="boolean",e,"internal-error"),rt(I,e.name),rt(v,e.name),rt(T,e.name),rt(S,e.name),rt(q,e.name),rt(z,e.name);const gn=new St({uid:K,auth:e,email:y,emailVerified:J,displayName:g,isAnonymous:He,photoURL:v,phoneNumber:I,tenantId:T,stsTokenManager:mt,createdAt:q,lastLoginAt:z});return Ae&&Array.isArray(Ae)&&(gn.providerData=Ae.map(dr=>Object.assign({},dr))),S&&(gn._redirectEventId=S),gn}static async _fromIdTokenResponse(e,n,i=!1){const r=new jn;r.updateFromServerResponse(n);const s=new St({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Di(s),s}}const cc=new Map;function $e(t){Ye(t instanceof Function,"Expected a class definition");let e=cc.get(t);return e?(Ye(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cc.set(t,e),e)}class du{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}du.type="NONE";const lc=du;function Ii(t,e,n){return`firebase:${t}:${e}:${n}`}class Xt{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ii(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ii("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?St._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Xt($e(lc),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=r[0]||$e(lc);const a=Ii(i,e.config.apiKey,e.name);let l=null;for(const f of n)try{const p=await f._get(a);if(p){const g=St._fromJSON(e,p);f!==s&&(l=g),s=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Xt(s,e,i):(s=h[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new Xt(s,e,i))}}function uc(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pu(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hu(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gu(e))return"Blackberry";if(_u(e))return"Webos";if(to(e))return"Safari";if((e.includes("chrome/")||fu(e))&&!e.includes("edge/"))return"Chrome";if(mu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function hu(t=ae()){return/firefox\//i.test(t)}function to(t=ae()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fu(t=ae()){return/crios\//i.test(t)}function pu(t=ae()){return/iemobile/i.test(t)}function mu(t=ae()){return/android/i.test(t)}function gu(t=ae()){return/blackberry/i.test(t)}function _u(t=ae()){return/webos/i.test(t)}function tr(t=ae()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Nw(t=ae()){var e;return tr(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Dw(){return jg()&&document.documentMode===10}function wu(t=ae()){return tr(t)||mu(t)||_u(t)||gu(t)||/windows phone/i.test(t)||pu(t)}function xw(){try{return!!(window&&window!==window.top)}catch{return!1}}function yu(t,e=[]){let n;switch(t){case"Browser":n=uc(ae());break;case"Worker":n=`${uc(ae())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ft}/${i}`}class Lw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,l)=>{try{const h=e(s);a(h)}catch(h){l(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}async function Mw(t,e={}){return pt(t,"GET","/v2/passwordPolicy",Bt(t,e))}const Fw=6;class Bw{constructor(e){var n,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:Fw,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,a,l;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(r=h.containsLowercaseLetter)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(l=h.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),h}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Uw{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dc(this),this.idTokenSubscription=new dc(this),this.beforeStateQueue=new Lw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ou,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$e(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Xt.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===l)&&(h!=null&&h.user)&&(r=h.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return k(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Di(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Qe(e):null;return n&&k(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&k(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence($e(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Mw(this),n=new Bw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mt("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Pw(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$e(e)||this._popupRedirectResolver;k(n,this,"argument-error"),this.redirectPersistenceManager=await Xt.create(this,[$e(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(k(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&uw(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function dn(t){return Qe(t)}class dc{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jg(n=>this.observer=n)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hw(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function vu(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=xe("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",Hw().appendChild(i)})}function jw(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Ww="https://www.google.com/recaptcha/enterprise.js?render=",Vw="recaptcha-enterprise",$w="NO_RECAPTCHA";class qw{constructor(e){this.type=Vw,this.auth=dn(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{vw(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new yw(h);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,a(f.siteKey)}}).catch(h=>{l(h)})})}function r(s,a,l){const h=window.grecaptcha;ac(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(f=>{a(f)}).catch(()=>{a($w)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&ac(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}vu(Ww+l).then(()=>{r(l,s,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function hc(t,e,n,i=!1){const r=new qw(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function fc(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await hc(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await hc(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(s)})}function zw(t,e){const n=Gn(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Oi(s,e??{}))return r;ke(r,"already-initialized")}return n.initialize({options:e})}function Kw(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map($e);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Gw(t,e,n){const i=dn(t);k(i._canInitEmulator,i,"emulator-config-failed"),k(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=bu(e),{host:a,port:l}=Yw(e),h=l===null?"":`:${l}`;i.config.emulator={url:`${s}//${a}${h}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||Jw()}function bu(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Yw(t){const e=bu(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:pc(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:pc(a)}}}function pc(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Jw(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class no{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ve("not implemented")}_getIdTokenResponse(e){return Ve("not implemented")}_linkToIdToken(e,n){return Ve("not implemented")}_getReauthenticationResolver(e){return Ve("not implemented")}}async function Xw(t,e){return pt(t,"POST","/v1/accounts:signUp",e)}async function Qw(t,e){return er(t,"POST","/v1/accounts:signInWithPassword",Bt(t,e))}async function Zw(t,e){return er(t,"POST","/v1/accounts:signInWithEmailLink",Bt(t,e))}async function ey(t,e){return er(t,"POST","/v1/accounts:signInWithEmailLink",Bt(t,e))}class Wn extends no{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Wn(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Wn(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fc(e,n,"signInWithPassword",Qw);case"emailLink":return Zw(e,{email:this._email,oobCode:this._password});default:ke(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fc(e,i,"signUpPassword",Xw);case"emailLink":return ey(e,{idToken:n,email:this._email,oobCode:this._password});default:ke(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qt(t,e){return er(t,"POST","/v1/accounts:signInWithIdp",Bt(t,e))}const ty="http://localhost";class Rt extends no{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ke("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Xs(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Rt(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Qt(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Qt(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qt(e,n)}buildRequest(){const e={requestUri:ty,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=un(n)}return e}}function ny(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iy(t){const e=Pn(Nn(t)).link,n=e?Pn(Nn(e)).deep_link_id:null,i=Pn(Nn(t)).deep_link_id;return(i?Pn(Nn(i)).link:null)||i||n||e||t}class io{constructor(e){var n,i,r,s,a,l;const h=Pn(Nn(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,p=(i=h.oobCode)!==null&&i!==void 0?i:null,g=ny((r=h.mode)!==null&&r!==void 0?r:null);k(f&&p&&g,"argument-error"),this.apiKey=f,this.operation=g,this.code=p,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=h.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=iy(e);try{return new io(n)}catch{return null}}}class hn{constructor(){this.providerId=hn.PROVIDER_ID}static credential(e,n){return Wn._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=io.parseLink(n);return k(i,"argument-error"),Wn._fromEmailAndCode(e,i.code,i.tenantId)}}hn.PROVIDER_ID="password";hn.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Eu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Jn extends Eu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class st extends Jn{constructor(){super("facebook.com")}static credential(e){return Rt._fromParams({providerId:st.PROVIDER_ID,signInMethod:st.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return st.credentialFromTaggedObject(e)}static credentialFromError(e){return st.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return st.credential(e.oauthAccessToken)}catch{return null}}}st.FACEBOOK_SIGN_IN_METHOD="facebook.com";st.PROVIDER_ID="facebook.com";class ot extends Jn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rt._fromParams({providerId:ot.PROVIDER_ID,signInMethod:ot.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ot.credentialFromTaggedObject(e)}static credentialFromError(e){return ot.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ot.credential(n,i)}catch{return null}}}ot.GOOGLE_SIGN_IN_METHOD="google.com";ot.PROVIDER_ID="google.com";class at extends Jn{constructor(){super("github.com")}static credential(e){return Rt._fromParams({providerId:at.PROVIDER_ID,signInMethod:at.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return at.credentialFromTaggedObject(e)}static credentialFromError(e){return at.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return at.credential(e.oauthAccessToken)}catch{return null}}}at.GITHUB_SIGN_IN_METHOD="github.com";at.PROVIDER_ID="github.com";class ct extends Jn{constructor(){super("twitter.com")}static credential(e,n){return Rt._fromParams({providerId:ct.PROVIDER_ID,signInMethod:ct.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ct.credentialFromTaggedObject(e)}static credentialFromError(e){return ct.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ct.credential(n,i)}catch{return null}}}ct.TWITTER_SIGN_IN_METHOD="twitter.com";ct.PROVIDER_ID="twitter.com";class sn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await St._fromIdTokenResponse(e,i,r),a=mc(i);return new sn({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=mc(i);return new sn({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function mc(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class xi extends Be{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,xi.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new xi(e,n,i,r)}}function Iu(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xi._fromErrorAndOperation(t,s,e,i):s})}async function ry(t,e,n=!1){const i=await Hn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return sn._forOperation(t,"link",i)}async function sy(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await Hn(t,Iu(i,r,e,t),n);k(s.idToken,i,"internal-error");const a=eo(s.idToken);k(a,i,"internal-error");const{sub:l}=a;return k(t.uid===l,i,"user-mismatch"),sn._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ke(i,"user-mismatch"),s}}async function Tu(t,e,n=!1){const i="signIn",r=await Iu(t,i,e),s=await sn._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function oy(t,e){return Tu(dn(t),e)}async function ay(t){const e=dn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function CC(t,e,n){return oy(Qe(t),hn.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ay(t),i})}function cy(t,e,n,i){return Qe(t).onIdTokenChanged(e,n,i)}function ly(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}const Li="__sak";class Cu{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Li,"1"),this.storage.removeItem(Li),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}function uy(){const t=ae();return to(t)||tr(t)}const dy=1e3,hy=10;class Su extends Cu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=uy()&&xw(),this.fallbackToPolling=wu(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,h)=>{this.notifyListeners(a,h)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Dw()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,hy):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},dy)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Su.type="LOCAL";const fy=Su;class ku extends Cu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ku.type="SESSION";const Au=ku;function py(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class nr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new nr(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async f=>f(n.origin,s)),h=await py(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nr.receivers=[];function ro(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}class my{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,h)=>{const f=ro("",20);r.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const y=g;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(y.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Le(){return window}function gy(t){Le().location.href=t}function Ru(){return typeof Le().WorkerGlobalScope<"u"&&typeof Le().importScripts=="function"}async function _y(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wy(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function yy(){return Ru()?self:null}const Ou="firebaseLocalStorageDb",vy=1,Mi="firebaseLocalStorage",Pu="fbase_key";class Xn{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ir(t,e){return t.transaction([Mi],e?"readwrite":"readonly").objectStore(Mi)}function by(){const t=indexedDB.deleteDatabase(Ou);return new Xn(t).toPromise()}function vs(){const t=indexedDB.open(Ou,vy);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Mi,{keyPath:Pu})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Mi)?e(i):(i.close(),await by(),e(await vs()))})})}async function gc(t,e,n){const i=ir(t,!0).put({[Pu]:e,value:n});return new Xn(i).toPromise()}async function Ey(t,e){const n=ir(t,!1).get(e),i=await new Xn(n).toPromise();return i===void 0?null:i.value}function _c(t,e){const n=ir(t,!0).delete(e);return new Xn(n).toPromise()}const Iy=800,Ty=3;class Nu{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vs(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Ty)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ru()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nr._getInstance(yy()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _y(),!this.activeServiceWorker)return;this.sender=new my(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wy()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vs();return await gc(e,Li,"1"),await _c(e,Li),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>gc(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Ey(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_c(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=ir(r,!1).getAll();return new Xn(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Iy)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Nu.type="LOCAL";const Cy=Nu;new Yn(3e4,6e4);function Sy(t,e){return e?$e(e):(k(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class so extends no{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qt(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qt(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qt(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ky(t){return Tu(t.auth,new so(t),t.bypassAuthState)}function Ay(t){const{auth:e,user:n}=t;return k(n,e,"internal-error"),sy(n,new so(t),t.bypassAuthState)}async function Ry(t){const{auth:e,user:n}=t;return k(n,e,"internal-error"),ry(n,new so(t),t.bypassAuthState)}class Du{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ky;case"linkViaPopup":case"linkViaRedirect":return Ry;case"reauthViaPopup":case"reauthViaRedirect":return Ay;default:ke(this.auth,"internal-error")}}resolve(e){Ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Oy=new Yn(2e3,1e4);class Gt extends Du{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Gt.currentPopupAction&&Gt.currentPopupAction.cancel(),Gt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return k(e,this.auth,"internal-error"),e}async onExecution(){Ye(this.filter.length===1,"Popup operations only handle one event");const e=ro();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xe(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Oy.get())};e()}}Gt.currentPopupAction=null;const Py="pendingRedirect",Ti=new Map;class Ny extends Du{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ti.get(this.auth._key());if(!e){try{const i=await Dy(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ti.set(this.auth._key(),e)}return this.bypassAuthState||Ti.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Dy(t,e){const n=My(e),i=Ly(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function xy(t,e){Ti.set(t._key(),e)}function Ly(t){return $e(t._redirectPersistence)}function My(t){return Ii(Py,t.config.apiKey,t.name)}async function Fy(t,e,n=!1){const i=dn(t),r=Sy(i,e),a=await new Ny(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}const By=10*60*1e3;class Uy{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Hy(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!xu(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(xe(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=By&&this.cachedEventUids.clear(),this.cachedEventUids.has(wc(e))}saveEventToCache(e){this.cachedEventUids.add(wc(e)),this.lastProcessedEventTime=Date.now()}}function wc(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xu({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Hy(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xu(t);default:return!1}}async function jy(t,e={}){return pt(t,"GET","/v1/projects",e)}const Wy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vy=/^https?/;async function $y(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jy(t);for(const n of e)try{if(qy(n))return}catch{}ke(t,"unauthorized-domain")}function qy(t){const e=ys(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Vy.test(n))return!1;if(Wy.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const zy=new Yn(3e4,6e4);function yc(){const t=Le().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ky(t){return new Promise((e,n)=>{var i,r,s;function a(){yc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yc(),n(xe(t,"network-request-failed"))},timeout:zy.get()})}if(!((r=(i=Le().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Le().gapi)===null||s===void 0)&&s.load)a();else{const l=jw("iframefcb");return Le()[l]=()=>{gapi.load?a():n(xe(t,"network-request-failed"))},vu(`https://apis.google.com/js/api.js?onload=${l}`).catch(h=>n(h))}}).catch(e=>{throw Ci=null,e})}let Ci=null;function Gy(t){return Ci=Ci||Ky(t),Ci}const Yy=new Yn(5e3,15e3),Jy="__/auth/iframe",Xy="emulator/auth/iframe",Qy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ev(t){const e=t.config;k(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zs(e,Xy):`https://${t.config.authDomain}/${Jy}`,i={apiKey:e.apiKey,appName:t.name,v:Ft},r=Zy.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${un(i).slice(1)}`}async function tv(t){const e=await Gy(t),n=Le().gapi;return k(n,t,"internal-error"),e.open({where:document.body,url:ev(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qy,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=xe(t,"network-request-failed"),l=Le().setTimeout(()=>{s(a)},Yy.get());function h(){Le().clearTimeout(l),r(i)}i.ping(h).then(h,()=>{s(a)})}))}const nv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iv=500,rv=600,sv="_blank",ov="http://localhost";class vc{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function av(t,e,n,i=iv,r=rv){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const h=Object.assign(Object.assign({},nv),{width:i.toString(),height:r.toString(),top:s,left:a}),f=ae().toLowerCase();n&&(l=fu(f)?sv:n),hu(f)&&(e=e||ov,h.scrollbars="yes");const p=Object.entries(h).reduce((y,[I,v])=>`${y}${I}=${v},`,"");if(Nw(f)&&l!=="_self")return cv(e||"",l),new vc(null);const g=window.open(e||"",l,p);k(g,t,"popup-blocked");try{g.focus()}catch{}return new vc(g)}function cv(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const lv="__/auth/handler",uv="emulator/auth/handler",dv=encodeURIComponent("fac");async function bc(t,e,n,i,r,s){k(t.config.authDomain,t,"auth-domain-config-required"),k(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ft,eventId:r};if(e instanceof Eu){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",fs(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries(s||{}))a[p]=g}if(e instanceof Jn){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const h=await t._getAppCheckToken(),f=h?`#${dv}=${encodeURIComponent(h)}`:"";return`${hv(t)}?${un(l).slice(1)}${f}`}function hv({config:t}){return t.emulator?Zs(t,uv):`https://${t.authDomain}/${lv}`}const Hr="webStorageSupport";class fv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Au,this._completeRedirectFn=Fy,this._overrideRedirectResult=xy}async _openPopup(e,n,i,r){var s;Ye((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await bc(e,n,i,ys(),r);return av(e,a,ro())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await bc(e,n,i,ys(),r);return gy(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ye(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await tv(e),i=new Uy(e);return n.register("authEvent",r=>(k(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hr,{type:Hr},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Hr];a!==void 0&&n(!!a),ke(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$y(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wu()||to()||tr()}}const pv=fv;var Ec="@firebase/auth",Ic="1.4.0";class mv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gv(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function _v(t){Se(new ve("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;k(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yu(t)},f=new Uw(i,r,s,h);return Kw(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Se(new ve("auth-internal",e=>{const n=dn(e.getProvider("auth").getImmediate());return(i=>new mv(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),de(Ec,Ic,gv(t)),de(Ec,Ic,"esm2017")}const wv=5*60,yv=Jl("authIdTokenMaxAge")||wv;let Tc=null;const vv=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>yv)return;const r=n==null?void 0:n.token;Tc!==r&&(Tc=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function SC(t=nu()){const e=Gn(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zw(t,{popupRedirectResolver:pv,persistence:[Cy,fy,Au]}),i=Jl("authTokenSyncURL");if(i){const s=vv(i);ly(n,s,()=>s(n.currentUser)),cy(n,a=>s(a))}const r=Gl("auth");return r&&Gw(n,`http://${r}`),n}_v("Browser");const Cc="@firebase/database",Sc="1.0.1";let Lu="";function bv(t){Lu=t}class Ev{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ne(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Bn(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Iv{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Xe(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Mu=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ev(e)}}catch{}return new Iv},Tt=Mu("localStorage"),bs=Mu("sessionStorage");const Zt=new Ys("@firebase/database"),Tv=function(){let t=1;return function(){return t++}}(),Fu=function(t){const e=e_(t),n=new Yg;n.update(e);const i=n.digest();return qs.encodeByteArray(i)},Qn=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Qn.apply(null,i):typeof i=="object"?e+=ne(i):e+=i,e+=" "}return e};let kt=null,kc=!0;const Cv=function(t,e){E(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Zt.logLevel=B.VERBOSE,kt=Zt.log.bind(Zt),e&&bs.set("logging_enabled",!0)):typeof t=="function"?kt=t:(kt=null,bs.remove("logging_enabled"))},re=function(...t){if(kc===!0&&(kc=!1,kt===null&&bs.get("logging_enabled")===!0&&Cv(!0)),kt){const e=Qn.apply(null,t);kt(e)}},Zn=function(t){return function(...e){re(t,...e)}},Es=function(...t){const e="FIREBASE INTERNAL ERROR: "+Qn(...t);Zt.error(e)},Je=function(...t){const e=`FIREBASE FATAL ERROR: ${Qn(...t)}`;throw Zt.error(e),new Error(e)},me=function(...t){const e="FIREBASE WARNING: "+Qn(...t);Zt.warn(e)},Sv=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&me("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Bu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},kv=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},on="[MIN_NAME]",Ot="[MAX_NAME]",fn=function(t,e){if(t===e)return 0;if(t===on||e===Ot)return-1;if(e===on||t===Ot)return 1;{const n=Ac(t),i=Ac(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},Av=function(t,e){return t===e?0:t<e?-1:1},kn=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ne(e))},oo=function(t){if(typeof t!="object"||t===null)return ne(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=ne(e[i]),n+=":",n+=oo(t[e[i]]);return n+="}",n},Uu=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function be(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Hu=function(t){E(!Bu(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,a,l,h;t===0?(s=0,a=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=l+i,a=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,a=Math.round(t/Math.pow(2,1-i-n))));const f=[];for(h=n;h;h-=1)f.push(a%2?1:0),a=Math.floor(a/2);for(h=e;h;h-=1)f.push(s%2?1:0),s=Math.floor(s/2);f.push(r?1:0),f.reverse();const p=f.join("");let g="";for(h=0;h<64;h+=8){let y=parseInt(p.substr(h,8),2).toString(16);y.length===1&&(y="0"+y),g=g+y}return g.toLowerCase()},Rv=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ov=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Pv=new RegExp("^-?(0*)\\d{1,10}$"),Nv=-2147483648,Dv=2147483647,Ac=function(t){if(Pv.test(t)){const e=Number(t);if(e>=Nv&&e<=Dv)return e}return null},ei=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw me("Exception was thrown by user callback.",n),e},Math.floor(0))}},xv=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xn=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class Lv{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){me(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Mv{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(re("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',me(e)}}class en{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}en.OWNER="owner";const ao="5",ju="v",Wu="s",Vu="r",$u="f",qu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zu="ls",Ku="p",Is="ac",Gu="websocket",Yu="long_polling";class Ju{constructor(e,n,i,r,s=!1,a="",l=!1,h=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tt.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Tt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Fv(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Xu(t,e,n){E(typeof e=="string","typeof type must == string"),E(typeof n=="object","typeof params must == object");let i;if(e===Gu)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Yu)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Fv(t)&&(n.ns=t.namespace);const r=[];return be(n,(s,a)=>{r.push(s+"="+a)}),i+r.join("&")}class Bv{constructor(){this.counters_={}}incrementCounter(e,n=1){Xe(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ng(this.counters_)}}const jr={},Wr={};function co(t){const e=t.toString();return jr[e]||(jr[e]=new Bv),jr[e]}function Uv(t,e){const n=t.toString();return Wr[n]||(Wr[n]=e()),Wr[n]}class Hv{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&ei(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Rc="start",jv="close",Wv="pLPCommand",Vv="pRTLPCB",Qu="id",Zu="pw",ed="ser",$v="cb",qv="seg",zv="ts",Kv="d",Gv="dframe",td=1870,nd=30,Yv=td-nd,Jv=25e3,Xv=3e4;class Yt{constructor(e,n,i,r,s,a,l){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zn(e),this.stats_=co(n),this.urlFn=h=>(this.appCheckToken&&(h[Is]=this.appCheckToken),Xu(n,Yu,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Hv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Xv)),kv(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lo((...s)=>{const[a,l,h,f,p]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===Rc)this.id=l,this.password=h;else if(a===jv)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const i={};i[Rc]="t",i[ed]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[$v]=this.scriptTagHolder.uniqueCallbackIdentifier),i[ju]=ao,this.transportSessionId&&(i[Wu]=this.transportSessionId),this.lastSessionId&&(i[zu]=this.lastSessionId),this.applicationId&&(i[Ku]=this.applicationId),this.appCheckToken&&(i[Is]=this.appCheckToken),typeof location<"u"&&location.hostname&&qu.test(location.hostname)&&(i[Vu]=$u);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yt.forceAllow_=!0}static forceDisallow(){Yt.forceDisallow_=!0}static isAvailable(){return Yt.forceAllow_?!0:!Yt.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Rv()&&!Ov()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ne(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=zl(n),r=Uu(i,Yv);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[Gv]="t",i[Qu]=e,i[Zu]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ne(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class lo{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Tv(),window[Wv+this.uniqueCallbackIdentifier]=e,window[Vv+this.uniqueCallbackIdentifier]=n,this.myIFrame=lo.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){re("frame writing exception"),l.stack&&re(l.stack),re(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||re("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Qu]=this.myID,e[Zu]=this.myPW,e[ed]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+nd+i.length<=td;){const a=this.pendingSegs.shift();i=i+"&"+qv+r+"="+a.seg+"&"+zv+r+"="+a.ts+"&"+Kv+r+"="+a.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(Jv)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{re("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}const Qv=16384,Zv=45e3;let Fi=null;typeof MozWebSocket<"u"?Fi=MozWebSocket:typeof WebSocket<"u"&&(Fi=WebSocket);class Ee{constructor(e,n,i,r,s,a,l){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zn(this.connId),this.stats_=co(n),this.connURL=Ee.connectionURL_(n,a,l,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,s){const a={};return a[ju]=ao,typeof location<"u"&&location.hostname&&qu.test(location.hostname)&&(a[Vu]=$u),n&&(a[Wu]=n),i&&(a[zu]=i),r&&(a[Is]=r),s&&(a[Ku]=s),Xu(e,Gu,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tt.set("previous_websocket_failure",!0);try{let i;Ql(),this.mySock=new Fi(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Ee.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Fi!==null&&!Ee.forceDisallow_}static previouslyFailed(){return Tt.isInMemoryStorage||Tt.get("previous_websocket_failure")===!0}markConnectionHealthy(){Tt.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Bn(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(E(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=ne(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Uu(n,Qv);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Zv))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ee.responsesRequiredToBeHealthy=2;Ee.healthyTimeout=3e4;class Vn{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Yt,Ee]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ee&&Ee.isAvailable();let i=n&&!Ee.previouslyFailed();if(e.webSocketOnly&&(n||me("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ee];else{const r=this.transports_=[];for(const s of Vn.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);Vn.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Vn.globalTransportInitialized_=!1;const eb=6e4,tb=5e3,nb=10*1024,ib=100*1024,Vr="t",Oc="d",rb="s",Pc="r",sb="e",Nc="o",Dc="a",xc="n",Lc="p",ob="h";class ab{constructor(e,n,i,r,s,a,l,h,f,p){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=h,this.onKill_=f,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zn("c:"+this.id+":"),this.transportManager_=new Vn(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=xn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ib?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nb?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Vr in e){const n=e[Vr];n===Dc?this.upgradeIfSecondaryHealthy_():n===Pc?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Nc&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=kn("t",e),i=kn("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Lc,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Dc,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:xc,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=kn("t",e),i=kn("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=kn(Vr,e);if(Oc in e){const i=e[Oc];if(n===ob){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===xc){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===rb?this.onConnectionShutdown_(i):n===Pc?this.onReset_(i):n===sb?Es("Server Error: "+i):n===Nc?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Es("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ao!==i&&me("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),xn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(eb))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tb))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Lc,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class id{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}class rd{constructor(e){this.allowedEvents_=e,this.listeners_={},E(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){E(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class Bi extends rd{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Gs()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Bi}getInitialEvent(e){return E(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Mc=32,Fc=768;class ${constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function U(){return new $("")}function D(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ft(t){return t.pieces_.length-t.pieceNum_}function V(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new $(t.pieces_,e)}function sd(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function cb(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function od(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ad(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new $(e,0)}function te(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof $)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new $(n,0)}function P(t){return t.pieceNum_>=t.pieces_.length}function we(t,e){const n=D(t),i=D(e);if(n===null)return e;if(n===i)return we(V(t),V(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function cd(t,e){if(ft(t)!==ft(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Ie(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(ft(t)>ft(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class lb{constructor(e,n){this.errorPrefix_=n,this.parts_=od(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Zi(this.parts_[i]);ld(this)}}function ub(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Zi(e),ld(t)}function db(t){const e=t.parts_.pop();t.byteLength_-=Zi(e),t.parts_.length>0&&(t.byteLength_-=1)}function ld(t){if(t.byteLength_>Fc)throw new Error(t.errorPrefix_+"has a key path longer than "+Fc+" bytes ("+t.byteLength_+").");if(t.parts_.length>Mc)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Mc+") or object contains a cycle "+It(t))}function It(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}class uo extends rd{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new uo}getInitialEvent(e){return E(e==="visible","Unknown event type: "+e),[this.visible_]}}const An=1e3,hb=60*5*1e3,Bc=30*1e3,fb=1.3,pb=3e4,mb="server_kill",Uc=3;class Ke extends id{constructor(e,n,i,r,s,a,l,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=h,this.id=Ke.nextPersistentConnectionId_++,this.log_=Zn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=An,this.maxReconnectDelay_=hb,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!Ql())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uo.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Bi.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(ne(s)),E(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Ks,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),E(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},a="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,l=>{const h=l.d,f=l.s;Ke.warnOnListenWarnings_(h,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",l),f!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(f,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Xe(e,"w")){const i=rn(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();me(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Gg(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Bc)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Kg(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,a=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},a="n";r&&(s.q=i,s.t=r),this.sendRequest(a,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const a={p:n,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ne(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Es("Unrecognized action received from server: "+ne(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){E(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=An,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=An,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pb&&(this.reconnectDelay_=An),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fb)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ke.nextConnectionId_++,s=this.lastSessionId;let a=!1,l=null;const h=function(){l?l.close():(a=!0,i())},f=function(g){E(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(g)};this.realtime_={close:h,sendRequest:f};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,y]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?re("getToken() completed but was canceled"):(re("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,l=new ab(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,I=>{me(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(mb)},s))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&me(g),h())}}}interrupt(e){re("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){re("Resuming connection for reason: "+e),delete this.interruptReasons_[e],fs(this.interruptReasons_)&&(this.reconnectDelay_=An,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>oo(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new $(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){re("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Uc&&(this.reconnectDelay_=Bc,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){re("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Uc&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Lu.replace(/\./g,"-")]=1,Gs()?e["framework.cordova"]=1:Xl()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Bi.getInstance().currentlyOnline();return fs(this.interruptReasons_)&&e}}Ke.nextPersistentConnectionId_=0;Ke.nextConnectionId_=0;class x{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new x(e,n)}}class rr{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new x(on,e),r=new x(on,n);return this.compare(i,r)!==0}minPost(){return x.MIN}}let gi;class ud extends rr{static get __EMPTY_NODE(){return gi}static set __EMPTY_NODE(e){gi=e}compare(e,n){return fn(e.name,n.name)}isDefinedOn(e){throw ln("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return x.MIN}maxPost(){return new x(Ot,gi)}makePost(e,n){return E(typeof e=="string","KeyIndex indexValue must always be a string."),new x(e,gi)}toString(){return".key"}}const tn=new ud;class _i{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?i(e.key,n):1,r&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ee{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??ee.RED,this.left=r??ue.EMPTY_NODE,this.right=s??ue.EMPTY_NODE}copy(e,n,i,r,s){return new ee(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ue.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return ue.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ee.RED=!0;ee.BLACK=!1;class gb{copy(e,n,i,r,s){return this}insert(e,n,i){return new ee(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ue{constructor(e,n=ue.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ue(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ee.BLACK,null,null))}remove(e){return new ue(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ee.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _i(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new _i(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new _i(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new _i(this.root_,null,this.comparator_,!0,e)}}ue.EMPTY_NODE=new gb;function _b(t,e){return fn(t.name,e.name)}function ho(t,e){return fn(t,e)}let Ts;function wb(t){Ts=t}const dd=function(t){return typeof t=="number"?"number:"+Hu(t):"string:"+t},hd=function(t){if(t.isLeafNode()){const e=t.val();E(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Xe(e,".sv"),"Priority must be a string or number.")}else E(t===Ts||t.isEmpty(),"priority of unexpected type.");E(t===Ts||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Hc;class Z{constructor(e,n=Z.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,E(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),hd(this.priorityNode_)}static set __childrenNodeConstructor(e){Hc=e}static get __childrenNodeConstructor(){return Hc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Z(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Z.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return P(e)?this:D(e)===".priority"?this.priorityNode_:Z.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Z.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=D(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(E(i!==".priority"||ft(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Z.__childrenNodeConstructor.EMPTY_NODE.updateChild(V(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+dd(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Hu(this.value_):e+=this.value_,this.lazyHash_=Fu(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Z.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Z.__childrenNodeConstructor?-1:(E(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=Z.VALUE_TYPE_ORDER.indexOf(n),s=Z.VALUE_TYPE_ORDER.indexOf(i);return E(r>=0,"Unknown leaf type: "+n),E(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Z.VALUE_TYPE_ORDER=["object","boolean","number","string"];let fd,pd;function yb(t){fd=t}function vb(t){pd=t}class bb extends rr{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?fn(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return x.MIN}maxPost(){return new x(Ot,new Z("[PRIORITY-POST]",pd))}makePost(e,n){const i=fd(e);return new x(n,new Z("[PRIORITY-POST]",i))}toString(){return".priority"}}const oe=new bb;const Eb=Math.log(2);class Ib{constructor(e){const n=s=>parseInt(Math.log(s)/Eb,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ui=function(t,e,n,i){t.sort(e);const r=function(h,f){const p=f-h;let g,y;if(p===0)return null;if(p===1)return g=t[h],y=n?n(g):g,new ee(y,g.node,ee.BLACK,null,null);{const I=parseInt(p/2,10)+h,v=r(h,I),T=r(I+1,f);return g=t[I],y=n?n(g):g,new ee(y,g.node,ee.BLACK,v,T)}},s=function(h){let f=null,p=null,g=t.length;const y=function(v,T){const S=g-v,q=g;g-=v;const z=r(S+1,q),K=t[S],J=n?n(K):K;I(new ee(J,K.node,T,null,z))},I=function(v){f?(f.left=v,f=v):(p=v,f=v)};for(let v=0;v<h.count;++v){const T=h.nextBitIsOne(),S=Math.pow(2,h.count-(v+1));T?y(S,ee.BLACK):(y(S,ee.BLACK),y(S,ee.RED))}return p},a=new Ib(t.length),l=s(a);return new ue(i||e,l)};let $r;const Kt={};class qe{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return E(Kt&&oe,"ChildrenNode.ts has not been loaded"),$r=$r||new qe({".priority":Kt},{".priority":oe}),$r}get(e){const n=rn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ue?n:null}hasIndex(e){return Xe(this.indexSet_,e.toString())}addIndex(e,n){E(e!==tn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(x.Wrap);let a=s.getNext();for(;a;)r=r||e.isDefinedOn(a.node),i.push(a),a=s.getNext();let l;r?l=Ui(i,e.getCompare()):l=Kt;const h=e.toString(),f=Object.assign({},this.indexSet_);f[h]=e;const p=Object.assign({},this.indexes_);return p[h]=l,new qe(p,f)}addToIndexes(e,n){const i=Ri(this.indexes_,(r,s)=>{const a=rn(this.indexSet_,s);if(E(a,"Missing index implementation for "+s),r===Kt)if(a.isDefinedOn(e.node)){const l=[],h=n.getIterator(x.Wrap);let f=h.getNext();for(;f;)f.name!==e.name&&l.push(f),f=h.getNext();return l.push(e),Ui(l,a.getCompare())}else return Kt;else{const l=n.get(e.name);let h=r;return l&&(h=h.remove(new x(e.name,l))),h.insert(e,e.node)}});return new qe(i,this.indexSet_)}removeFromIndexes(e,n){const i=Ri(this.indexes_,r=>{if(r===Kt)return r;{const s=n.get(e.name);return s?r.remove(new x(e.name,s)):r}});return new qe(i,this.indexSet_)}}let Rn;class M{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&hd(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Rn||(Rn=new M(new ue(ho),null,qe.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Rn}updatePriority(e){return this.children_.isEmpty()?this:new M(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Rn:n}}getChild(e){const n=D(e);return n===null?this:this.getImmediateChild(n).getChild(V(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(E(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new x(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const a=r.isEmpty()?Rn:this.priorityNode_;return new M(r,a,s)}}updateChild(e,n){const i=D(e);if(i===null)return n;{E(D(e)!==".priority"||ft(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(V(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(oe,(a,l)=>{n[a]=l.val(e),i++,s&&M.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):s=!1}),!e&&s&&r<2*i){const a=[];for(const l in n)a[l]=n[l];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+dd(this.getPriority().val())+":"),this.forEachChild(oe,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":Fu(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new x(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new x(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new x(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,x.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,x.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ti?-1:0}withIndex(e){if(e===tn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new M(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===tn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(oe),r=n.getIterator(oe);let s=i.getNext(),a=r.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=r.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===tn?null:this.indexMap_.get(e.toString())}}M.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Tb extends M{constructor(){super(new ue(ho),M.EMPTY_NODE,qe.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return M.EMPTY_NODE}isEmpty(){return!1}}const ti=new Tb;Object.defineProperties(x,{MIN:{value:new x(on,M.EMPTY_NODE)},MAX:{value:new x(Ot,ti)}});ud.__EMPTY_NODE=M.EMPTY_NODE;Z.__childrenNodeConstructor=M;wb(ti);vb(ti);const Cb=!0;function se(t,e=null){if(t===null)return M.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),E(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Z(n,se(e))}if(!(t instanceof Array)&&Cb){const n=[];let i=!1;if(be(t,(a,l)=>{if(a.substring(0,1)!=="."){const h=se(l);h.isEmpty()||(i=i||!h.getPriority().isEmpty(),n.push(new x(a,h)))}}),n.length===0)return M.EMPTY_NODE;const s=Ui(n,_b,a=>a.name,ho);if(i){const a=Ui(n,oe.getCompare());return new M(s,se(e),new qe({".priority":a},{".priority":oe}))}else return new M(s,se(e),qe.Default)}else{let n=M.EMPTY_NODE;return be(t,(i,r)=>{if(Xe(t,i)&&i.substring(0,1)!=="."){const s=se(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(se(e))}}yb(se);class Sb extends rr{constructor(e){super(),this.indexPath_=e,E(!P(e)&&D(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?fn(e.name,n.name):s}makePost(e,n){const i=se(e),r=M.EMPTY_NODE.updateChild(this.indexPath_,i);return new x(n,r)}maxPost(){const e=M.EMPTY_NODE.updateChild(this.indexPath_,ti);return new x(Ot,e)}toString(){return od(this.indexPath_,0).join("/")}}class kb extends rr{compare(e,n){const i=e.node.compareTo(n.node);return i===0?fn(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return x.MIN}maxPost(){return x.MAX}makePost(e,n){const i=se(e);return new x(n,i)}toString(){return".value"}}const Ab=new kb;function Rb(t){return{type:"value",snapshotNode:t}}function Ob(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Pb(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function jc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Nb(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}class fo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return E(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return E(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:on}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return E(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ot}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return E(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){const e=new fo;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Wc(t){const e={};if(t.isDefault())return e;let n;if(t.index_===oe?n="$priority":t.index_===Ab?n="$value":t.index_===tn?n="$key":(E(t.index_ instanceof Sb,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ne(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=ne(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+ne(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=ne(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+ne(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Vc(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==oe&&(e.i=t.index_.toString()),e}class Hi extends id{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Zn("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(E(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=Hi.getListenId_(e,i),l={};this.listens_[a]=l;const h=Wc(e._queryParams);this.restRequest_(s+".json",h,(f,p)=>{let g=p;if(f===404&&(g=null,f=null),f===null&&this.onDataUpdate_(s,g,!1,i),rn(this.listens_,a)===l){let y;f?f===401?y="permission_denied":y="rest_error:"+f:y="ok",r(y,null)}})}unlisten(e,n){const i=Hi.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Wc(e._queryParams),i=e._path.toString(),r=new Ks;return this.restRequest_(i+".json",n,(s,a)=>{let l=a;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(i,l,!1,null),r.resolve(l)):r.reject(new Error(l))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+un(n);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&l.readyState===4){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let h=null;if(l.status>=200&&l.status<300){try{h=Bn(l.responseText)}catch{me("Failed to parse JSON response for "+a+": "+l.responseText)}i(null,h)}else l.status!==401&&l.status!==404&&me("Got unsuccessful REST response for "+a+" Status: "+l.status),i(l.status);i=null}},l.open("GET",a,!0),l.send()})}}class Db{constructor(){this.rootNode_=M.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function ji(){return{value:null,children:new Map}}function md(t,e,n){if(P(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=D(e);t.children.has(i)||t.children.set(i,ji());const r=t.children.get(i);e=V(e),md(r,e,n)}}function Cs(t,e,n){t.value!==null?n(e,t.value):xb(t,(i,r)=>{const s=new $(e.toString()+"/"+i);Cs(r,s,n)})}function xb(t,e){t.children.forEach((n,i)=>{e(i,n)})}class Lb{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&be(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}const $c=10*1e3,Mb=30*1e3,Fb=5*60*1e3;class Bb{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Lb(e);const i=$c+(Mb-$c)*Math.random();xn(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;be(e,(r,s)=>{s>0&&Xe(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),xn(this.reportStats_.bind(this),Math.floor(Math.random()*2*Fb))}}var De;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(De||(De={}));function gd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _d(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function wd(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Wi{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=De.ACK_USER_WRITE,this.source=gd()}operationForChild(e){if(P(this.path)){if(this.affectedTree.value!=null)return E(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new $(e));return new Wi(U(),n,this.revert)}}else return E(D(this.path)===e,"operationForChild called for unrelated child."),new Wi(V(this.path),this.affectedTree,this.revert)}}class Pt{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=De.OVERWRITE}operationForChild(e){return P(this.path)?new Pt(this.source,U(),this.snap.getImmediateChild(e)):new Pt(this.source,V(this.path),this.snap)}}class $n{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=De.MERGE}operationForChild(e){if(P(this.path)){const n=this.children.subtree(new $(e));return n.isEmpty()?null:n.value?new Pt(this.source,U(),n.value):new $n(this.source,U(),n)}else return E(D(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $n(this.source,V(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class po{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(P(e))return this.isFullyInitialized()&&!this.filtered_;const n=D(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Ub(t,e,n,i){const r=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(Nb(a.childName,a.snapshotNode))}),On(t,r,"child_removed",e,i,n),On(t,r,"child_added",e,i,n),On(t,r,"child_moved",s,i,n),On(t,r,"child_changed",e,i,n),On(t,r,"value",e,i,n),r}function On(t,e,n,i,r,s){const a=i.filter(l=>l.type===n);a.sort((l,h)=>jb(t,l,h)),a.forEach(l=>{const h=Hb(t,l,s);r.forEach(f=>{f.respondsTo(l.type)&&e.push(f.createEvent(h,t.query_))})})}function Hb(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function jb(t,e,n){if(e.childName==null||n.childName==null)throw ln("Should only compare child_ events.");const i=new x(e.childName,e.snapshotNode),r=new x(n.childName,n.snapshotNode);return t.index_.compare(i,r)}function yd(t,e){return{eventCache:t,serverCache:e}}function Ln(t,e,n,i){return yd(new po(e,n,i),t.serverCache)}function vd(t,e,n,i){return yd(t.eventCache,new po(e,n,i))}function Ss(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Nt(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let qr;const Wb=()=>(qr||(qr=new ue(Av)),qr);class W{constructor(e,n=Wb()){this.value=e,this.children=n}static fromObject(e){let n=new W(null);return be(e,(i,r)=>{n=n.set(new $(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:U(),value:this.value};if(P(e))return null;{const i=D(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(V(e),n);return s!=null?{path:te(new $(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(P(e))return this;{const n=D(e),i=this.children.get(n);return i!==null?i.subtree(V(e)):new W(null)}}set(e,n){if(P(e))return new W(n,this.children);{const i=D(e),s=(this.children.get(i)||new W(null)).set(V(e),n),a=this.children.insert(i,s);return new W(this.value,a)}}remove(e){if(P(e))return this.children.isEmpty()?new W(null):new W(null,this.children);{const n=D(e),i=this.children.get(n);if(i){const r=i.remove(V(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new W(null):new W(this.value,s)}else return this}}get(e){if(P(e))return this.value;{const n=D(e),i=this.children.get(n);return i?i.get(V(e)):null}}setTree(e,n){if(P(e))return n;{const i=D(e),s=(this.children.get(i)||new W(null)).setTree(V(e),n);let a;return s.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,s),new W(this.value,a)}}fold(e){return this.fold_(U(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(te(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,U(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(P(e))return null;{const s=D(e),a=this.children.get(s);return a?a.findOnPath_(V(e),te(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,U(),n)}foreachOnPath_(e,n,i){if(P(e))return this;{this.value&&i(n,this.value);const r=D(e),s=this.children.get(r);return s?s.foreachOnPath_(V(e),te(n,r),i):new W(null)}}foreach(e){this.foreach_(U(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(te(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}class Ce{constructor(e){this.writeTree_=e}static empty(){return new Ce(new W(null))}}function Mn(t,e,n){if(P(e))return new Ce(new W(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const a=we(r,e);return s=s.updateChild(a,n),new Ce(t.writeTree_.set(r,s))}else{const r=new W(n),s=t.writeTree_.setTree(e,r);return new Ce(s)}}}function qc(t,e,n){let i=t;return be(n,(r,s)=>{i=Mn(i,te(e,r),s)}),i}function zc(t,e){if(P(e))return Ce.empty();{const n=t.writeTree_.setTree(e,new W(null));return new Ce(n)}}function ks(t,e){return Ut(t,e)!=null}function Ut(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(we(n.path,e)):null}function Kc(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(oe,(i,r)=>{e.push(new x(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new x(i,r.value))}),e}function dt(t,e){if(P(e))return t;{const n=Ut(t,e);return n!=null?new Ce(new W(n)):new Ce(t.writeTree_.subtree(e))}}function As(t){return t.writeTree_.isEmpty()}function an(t,e){return bd(U(),t.writeTree_,e)}function bd(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(E(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=bd(te(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(te(t,".priority"),i)),n}}function Ed(t,e){return kd(e,t)}function Vb(t,e,n,i,r){E(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Mn(t.visibleWrites,e,n)),t.lastWriteId=i}function $b(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function qb(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);E(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,a=t.allWrites.length-1;for(;r&&a>=0;){const l=t.allWrites[a];l.visible&&(a>=n&&zb(l,i.path)?r=!1:Ie(i.path,l.path)&&(s=!0)),a--}if(r){if(s)return Kb(t),!0;if(i.snap)t.visibleWrites=zc(t.visibleWrites,i.path);else{const l=i.children;be(l,h=>{t.visibleWrites=zc(t.visibleWrites,te(i.path,h))})}return!0}else return!1}function zb(t,e){if(t.snap)return Ie(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ie(te(t.path,n),e))return!0;return!1}function Kb(t){t.visibleWrites=Id(t.allWrites,Gb,U()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Gb(t){return t.visible}function Id(t,e,n){let i=Ce.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const a=s.path;let l;if(s.snap)Ie(n,a)?(l=we(n,a),i=Mn(i,l,s.snap)):Ie(a,n)&&(l=we(a,n),i=Mn(i,U(),s.snap.getChild(l)));else if(s.children){if(Ie(n,a))l=we(n,a),i=qc(i,l,s.children);else if(Ie(a,n))if(l=we(a,n),P(l))i=qc(i,U(),s.children);else{const h=rn(s.children,D(l));if(h){const f=h.getChild(V(l));i=Mn(i,U(),f)}}}else throw ln("WriteRecord should have .snap or .children")}}return i}function Td(t,e,n,i,r){if(!i&&!r){const s=Ut(t.visibleWrites,e);if(s!=null)return s;{const a=dt(t.visibleWrites,e);if(As(a))return n;if(n==null&&!ks(a,U()))return null;{const l=n||M.EMPTY_NODE;return an(a,l)}}}else{const s=dt(t.visibleWrites,e);if(!r&&As(s))return n;if(!r&&n==null&&!ks(s,U()))return null;{const a=function(f){return(f.visible||r)&&(!i||!~i.indexOf(f.writeId))&&(Ie(f.path,e)||Ie(e,f.path))},l=Id(t.allWrites,a,e),h=n||M.EMPTY_NODE;return an(l,h)}}}function Yb(t,e,n){let i=M.EMPTY_NODE;const r=Ut(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(oe,(s,a)=>{i=i.updateImmediateChild(s,a)}),i;if(n){const s=dt(t.visibleWrites,e);return n.forEachChild(oe,(a,l)=>{const h=an(dt(s,new $(a)),l);i=i.updateImmediateChild(a,h)}),Kc(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{const s=dt(t.visibleWrites,e);return Kc(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function Jb(t,e,n,i,r){E(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=te(e,n);if(ks(t.visibleWrites,s))return null;{const a=dt(t.visibleWrites,s);return As(a)?r.getChild(n):an(a,r.getChild(n))}}function Xb(t,e,n,i){const r=te(e,n),s=Ut(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const a=dt(t.visibleWrites,r);return an(a,i.getNode().getImmediateChild(n))}else return null}function Qb(t,e){return Ut(t.visibleWrites,e)}function Zb(t,e,n,i,r,s,a){let l;const h=dt(t.visibleWrites,e),f=Ut(h,U());if(f!=null)l=f;else if(n!=null)l=an(h,n);else return[];if(l=l.withIndex(a),!l.isEmpty()&&!l.isLeafNode()){const p=[],g=a.getCompare(),y=s?l.getReverseIteratorFrom(i,a):l.getIteratorFrom(i,a);let I=y.getNext();for(;I&&p.length<r;)g(I,i)!==0&&p.push(I),I=y.getNext();return p}else return[]}function eE(){return{visibleWrites:Ce.empty(),allWrites:[],lastWriteId:-1}}function Rs(t,e,n,i){return Td(t.writeTree,t.treePath,e,n,i)}function Cd(t,e){return Yb(t.writeTree,t.treePath,e)}function Gc(t,e,n,i){return Jb(t.writeTree,t.treePath,e,n,i)}function Vi(t,e){return Qb(t.writeTree,te(t.treePath,e))}function tE(t,e,n,i,r,s){return Zb(t.writeTree,t.treePath,e,n,i,r,s)}function mo(t,e,n){return Xb(t.writeTree,t.treePath,e,n)}function Sd(t,e){return kd(te(t.treePath,e),t.writeTree)}function kd(t,e){return{treePath:t,writeTree:e}}class nE{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;E(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),E(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,jc(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,Pb(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,Ob(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,jc(i,e.snapshotNode,r.oldSnap));else throw ln("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}class iE{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const Ad=new iE;class go{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new po(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mo(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Nt(this.viewCache_),s=tE(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}function rE(t,e){E(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),E(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function sE(t,e,n,i,r){const s=new nE;let a,l;if(n.type===De.OVERWRITE){const f=n;f.source.fromUser?a=Os(t,e,f.path,f.snap,i,r,s):(E(f.source.fromServer,"Unknown source."),l=f.source.tagged||e.serverCache.isFiltered()&&!P(f.path),a=$i(t,e,f.path,f.snap,i,r,l,s))}else if(n.type===De.MERGE){const f=n;f.source.fromUser?a=aE(t,e,f.path,f.children,i,r,s):(E(f.source.fromServer,"Unknown source."),l=f.source.tagged||e.serverCache.isFiltered(),a=Ps(t,e,f.path,f.children,i,r,l,s))}else if(n.type===De.ACK_USER_WRITE){const f=n;f.revert?a=uE(t,e,f.path,i,r,s):a=cE(t,e,f.path,f.affectedTree,i,r,s)}else if(n.type===De.LISTEN_COMPLETE)a=lE(t,e,n.path,i,s);else throw ln("Unknown operation type: "+n.type);const h=s.getChanges();return oE(e,a,h),{viewCache:a,changes:h}}function oE(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Ss(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Rb(Ss(e)))}}function Rd(t,e,n,i,r,s){const a=e.eventCache;if(Vi(i,n)!=null)return e;{let l,h;if(P(n))if(E(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=Nt(e),p=f instanceof M?f:M.EMPTY_NODE,g=Cd(i,p);l=t.filter.updateFullNode(e.eventCache.getNode(),g,s)}else{const f=Rs(i,Nt(e));l=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const f=D(n);if(f===".priority"){E(ft(n)===1,"Can't have a priority with additional path components");const p=a.getNode();h=e.serverCache.getNode();const g=Gc(i,n,p,h);g!=null?l=t.filter.updatePriority(p,g):l=a.getNode()}else{const p=V(n);let g;if(a.isCompleteForChild(f)){h=e.serverCache.getNode();const y=Gc(i,n,a.getNode(),h);y!=null?g=a.getNode().getImmediateChild(f).updateChild(p,y):g=a.getNode().getImmediateChild(f)}else g=mo(i,f,e.serverCache);g!=null?l=t.filter.updateChild(a.getNode(),f,g,p,r,s):l=a.getNode()}}return Ln(e,l,a.isFullyInitialized()||P(n),t.filter.filtersNodes())}}function $i(t,e,n,i,r,s,a,l){const h=e.serverCache;let f;const p=a?t.filter:t.filter.getIndexedFilter();if(P(n))f=p.updateFullNode(h.getNode(),i,null);else if(p.filtersNodes()&&!h.isFiltered()){const I=h.getNode().updateChild(n,i);f=p.updateFullNode(h.getNode(),I,null)}else{const I=D(n);if(!h.isCompleteForPath(n)&&ft(n)>1)return e;const v=V(n),S=h.getNode().getImmediateChild(I).updateChild(v,i);I===".priority"?f=p.updatePriority(h.getNode(),S):f=p.updateChild(h.getNode(),I,S,v,Ad,null)}const g=vd(e,f,h.isFullyInitialized()||P(n),p.filtersNodes()),y=new go(r,g,s);return Rd(t,g,n,r,y,l)}function Os(t,e,n,i,r,s,a){const l=e.eventCache;let h,f;const p=new go(r,e,s);if(P(n))f=t.filter.updateFullNode(e.eventCache.getNode(),i,a),h=Ln(e,f,!0,t.filter.filtersNodes());else{const g=D(n);if(g===".priority")f=t.filter.updatePriority(e.eventCache.getNode(),i),h=Ln(e,f,l.isFullyInitialized(),l.isFiltered());else{const y=V(n),I=l.getNode().getImmediateChild(g);let v;if(P(y))v=i;else{const T=p.getCompleteChild(g);T!=null?sd(y)===".priority"&&T.getChild(ad(y)).isEmpty()?v=T:v=T.updateChild(y,i):v=M.EMPTY_NODE}if(I.equals(v))h=e;else{const T=t.filter.updateChild(l.getNode(),g,v,y,p,a);h=Ln(e,T,l.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function Yc(t,e){return t.eventCache.isCompleteForChild(e)}function aE(t,e,n,i,r,s,a){let l=e;return i.foreach((h,f)=>{const p=te(n,h);Yc(e,D(p))&&(l=Os(t,l,p,f,r,s,a))}),i.foreach((h,f)=>{const p=te(n,h);Yc(e,D(p))||(l=Os(t,l,p,f,r,s,a))}),l}function Jc(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Ps(t,e,n,i,r,s,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,f;P(n)?f=i:f=new W(null).setTree(n,i);const p=e.serverCache.getNode();return f.children.inorderTraversal((g,y)=>{if(p.hasChild(g)){const I=e.serverCache.getNode().getImmediateChild(g),v=Jc(t,I,y);h=$i(t,h,new $(g),v,r,s,a,l)}}),f.children.inorderTraversal((g,y)=>{const I=!e.serverCache.isCompleteForChild(g)&&y.value===null;if(!p.hasChild(g)&&!I){const v=e.serverCache.getNode().getImmediateChild(g),T=Jc(t,v,y);h=$i(t,h,new $(g),T,r,s,a,l)}}),h}function cE(t,e,n,i,r,s,a){if(Vi(r,n)!=null)return e;const l=e.serverCache.isFiltered(),h=e.serverCache;if(i.value!=null){if(P(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return $i(t,e,n,h.getNode().getChild(n),r,s,l,a);if(P(n)){let f=new W(null);return h.getNode().forEachChild(tn,(p,g)=>{f=f.set(new $(p),g)}),Ps(t,e,n,f,r,s,l,a)}else return e}else{let f=new W(null);return i.foreach((p,g)=>{const y=te(n,p);h.isCompleteForPath(y)&&(f=f.set(p,h.getNode().getChild(y)))}),Ps(t,e,n,f,r,s,l,a)}}function lE(t,e,n,i,r){const s=e.serverCache,a=vd(e,s.getNode(),s.isFullyInitialized()||P(n),s.isFiltered());return Rd(t,a,n,i,Ad,r)}function uE(t,e,n,i,r,s){let a;if(Vi(i,n)!=null)return e;{const l=new go(i,e,r),h=e.eventCache.getNode();let f;if(P(n)||D(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=Rs(i,Nt(e));else{const g=e.serverCache.getNode();E(g instanceof M,"serverChildren would be complete if leaf node"),p=Cd(i,g)}p=p,f=t.filter.updateFullNode(h,p,s)}else{const p=D(n);let g=mo(i,p,e.serverCache);g==null&&e.serverCache.isCompleteForChild(p)&&(g=h.getImmediateChild(p)),g!=null?f=t.filter.updateChild(h,p,g,V(n),l,s):e.eventCache.getNode().hasChild(p)?f=t.filter.updateChild(h,p,M.EMPTY_NODE,V(n),l,s):f=h,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Rs(i,Nt(e)),a.isLeafNode()&&(f=t.filter.updateFullNode(f,a,s)))}return a=e.serverCache.isFullyInitialized()||Vi(i,U())!=null,Ln(e,f,a,t.filter.filtersNodes())}}function dE(t,e){const n=Nt(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!P(e)&&!n.getImmediateChild(D(e)).isEmpty())?n.getChild(e):null}function Xc(t,e,n,i){e.type===De.MERGE&&e.source.queryId!==null&&(E(Nt(t.viewCache_),"We should always have a full cache before handling merges"),E(Ss(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=sE(t.processor_,r,e,n,i);return rE(t.processor_,s.viewCache),E(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,hE(t,s.changes,s.viewCache.eventCache.getNode(),null)}function hE(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return Ub(t.eventGenerator_,e,n,r)}let Qc;function fE(t){E(!Qc,"__referenceConstructor has already been defined"),Qc=t}function _o(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return E(s!=null,"SyncTree gave us an op for an invalid query."),Xc(s,e,n,i)}else{let s=[];for(const a of t.views.values())s=s.concat(Xc(a,e,n,i));return s}}function wo(t,e){let n=null;for(const i of t.views.values())n=n||dE(i,e);return n}let Zc;function pE(t){E(!Zc,"__referenceConstructor has already been defined"),Zc=t}class el{constructor(e){this.listenProvider_=e,this.syncPointTree_=new W(null),this.pendingWriteTree_=eE(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function mE(t,e,n,i,r){return Vb(t.pendingWriteTree_,e,n,i,r),r?or(t,new Pt(gd(),e,n)):[]}function Jt(t,e,n=!1){const i=$b(t.pendingWriteTree_,e);if(qb(t.pendingWriteTree_,e)){let s=new W(null);return i.snap!=null?s=s.set(U(),!0):be(i.children,a=>{s=s.set(new $(a),!0)}),or(t,new Wi(i.path,s,n))}else return[]}function sr(t,e,n){return or(t,new Pt(_d(),e,n))}function gE(t,e,n){const i=W.fromObject(n);return or(t,new $n(_d(),e,i))}function _E(t,e,n,i){const r=Dd(t,i);if(r!=null){const s=xd(r),a=s.path,l=s.queryId,h=we(a,e),f=new Pt(wd(l),h,n);return Ld(t,a,f)}else return[]}function wE(t,e,n,i){const r=Dd(t,i);if(r){const s=xd(r),a=s.path,l=s.queryId,h=we(a,e),f=W.fromObject(n),p=new $n(wd(l),h,f);return Ld(t,a,p)}else return[]}function Od(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(a,l)=>{const h=we(a,e),f=wo(l,h);if(f)return f});return Td(r,e,s,n,!0)}function or(t,e){return Pd(e,t.syncPointTree_,null,Ed(t.pendingWriteTree_,U()))}function Pd(t,e,n,i){if(P(t.path))return Nd(t,e,n,i);{const r=e.get(U());n==null&&r!=null&&(n=wo(r,U()));let s=[];const a=D(t.path),l=t.operationForChild(a),h=e.children.get(a);if(h&&l){const f=n?n.getImmediateChild(a):null,p=Sd(i,a);s=s.concat(Pd(l,h,f,p))}return r&&(s=s.concat(_o(r,t,i,n))),s}}function Nd(t,e,n,i){const r=e.get(U());n==null&&r!=null&&(n=wo(r,U()));let s=[];return e.children.inorderTraversal((a,l)=>{const h=n?n.getImmediateChild(a):null,f=Sd(i,a),p=t.operationForChild(a);p&&(s=s.concat(Nd(p,l,h,f)))}),r&&(s=s.concat(_o(r,t,i,n))),s}function Dd(t,e){return t.tagToQueryMap.get(e)}function xd(t){const e=t.indexOf("$");return E(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $(t.substr(0,e))}}function Ld(t,e,n){const i=t.syncPointTree_.get(e);E(i,"Missing sync point for query tag that we're tracking");const r=Ed(t.pendingWriteTree_,e);return _o(i,n,r,null)}class yo{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new yo(n)}node(){return this.node_}}class vo{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=te(this.path_,e);return new vo(this.syncTree_,n)}node(){return Od(this.syncTree_,this.path_)}}const yE=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},tl=function(t,e,n){if(!t||typeof t!="object")return t;if(E(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return vE(t[".sv"],e,n);if(typeof t[".sv"]=="object")return bE(t[".sv"],e);E(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},vE=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:E(!1,"Unexpected server value: "+t)}},bE=function(t,e,n){t.hasOwnProperty("increment")||E(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&E(!1,"Unexpected increment value: "+i);const r=e.node();if(E(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const a=r.getValue();return typeof a!="number"?i:a+i},EE=function(t,e,n,i){return bo(e,new vo(n,t),i)},IE=function(t,e,n){return bo(t,new yo(e),n)};function bo(t,e,n){const i=t.getPriority().val(),r=tl(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const a=t,l=tl(a.getValue(),e,n);return l!==a.getValue()||r!==a.getPriority().val()?new Z(l,se(r)):t}else{const a=t;return s=a,r!==a.getPriority().val()&&(s=s.updatePriority(new Z(r))),a.forEachChild(oe,(l,h)=>{const f=bo(h,e.getImmediateChild(l),n);f!==h&&(s=s.updateImmediateChild(l,f))}),s}}class Eo{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Io(t,e){let n=e instanceof $?e:new $(e),i=t,r=D(n);for(;r!==null;){const s=rn(i.node.children,r)||{children:{},childCount:0};i=new Eo(r,i,s),n=V(n),r=D(n)}return i}function pn(t){return t.node.value}function Md(t,e){t.node.value=e,Ns(t)}function Fd(t){return t.node.childCount>0}function TE(t){return pn(t)===void 0&&!Fd(t)}function ar(t,e){be(t.node.children,(n,i)=>{e(new Eo(n,t,i))})}function Bd(t,e,n,i){n&&!i&&e(t),ar(t,r=>{Bd(r,e,!0,i)}),n&&i&&e(t)}function CE(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function ni(t){return new $(t.parent===null?t.name:ni(t.parent)+"/"+t.name)}function Ns(t){t.parent!==null&&SE(t.parent,t.name,t)}function SE(t,e,n){const i=TE(n),r=Xe(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,Ns(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,Ns(t))}const kE=/[\[\].#$\/\u0000-\u001F\u007F]/,AE=/[\[\].#$\u0000-\u001F\u007F]/,zr=10*1024*1024,Ud=function(t){return typeof t=="string"&&t.length!==0&&!kE.test(t)},RE=function(t){return typeof t=="string"&&t.length!==0&&!AE.test(t)},OE=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),RE(t)},Hd=function(t,e,n){const i=n instanceof $?new lb(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+It(i));if(typeof e=="function")throw new Error(t+"contains a function "+It(i)+" with contents = "+e.toString());if(Bu(e))throw new Error(t+"contains "+e.toString()+" "+It(i));if(typeof e=="string"&&e.length>zr/3&&Zi(e)>zr)throw new Error(t+"contains a string greater than "+zr+" utf8 bytes "+It(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(be(e,(a,l)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!Ud(a)))throw new Error(t+" contains an invalid key ("+a+") "+It(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ub(i,a),Hd(t,l,i),db(i)}),r&&s)throw new Error(t+' contains ".value" child '+It(i)+" in addition to actual children.")}},PE=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ud(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!OE(n))throw new Error(Zg(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class NE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function DE(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!cd(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function Ht(t,e,n){DE(t,n),xE(t,i=>Ie(i,e)||Ie(e,i))}function xE(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(LE(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function LE(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();kt&&re("event: "+n.toString()),ei(i)}}}const ME="repo_interrupt",FE=25;class BE{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ji(),this.transactionQueueTree_=new Eo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function UE(t,e,n){if(t.stats_=co(t.repoInfo_),t.forceRestClient_||xv())t.server_=new Hi(t.repoInfo_,(i,r,s,a)=>{nl(t,i,r,s,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>il(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ne(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Ke(t.repoInfo_,e,(i,r,s,a)=>{nl(t,i,r,s,a)},i=>{il(t,i)},i=>{jE(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=Uv(t.repoInfo_,()=>new Bb(t.stats_,t.server_)),t.infoData_=new Db,t.infoSyncTree_=new el({startListening:(i,r,s,a)=>{let l=[];const h=t.infoData_.getNode(i._path);return h.isEmpty()||(l=sr(t.infoSyncTree_,i._path,h),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),To(t,"connected",!1),t.serverSyncTree_=new el({startListening:(i,r,s,a)=>(t.server_.listen(i,s,r,(l,h)=>{const f=a(l,h);Ht(t.eventQueue_,i._path,f)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function HE(t){const n=t.infoData_.getNode(new $(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function jd(t){return yE({timestamp:HE(t)})}function nl(t,e,n,i,r){t.dataUpdateCount++;const s=new $(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(r)if(i){const h=Ri(n,f=>se(f));a=wE(t.serverSyncTree_,s,h,r)}else{const h=se(n);a=_E(t.serverSyncTree_,s,h,r)}else if(i){const h=Ri(n,f=>se(f));a=gE(t.serverSyncTree_,s,h)}else{const h=se(n);a=sr(t.serverSyncTree_,s,h)}let l=s;a.length>0&&(l=So(t,s)),Ht(t.eventQueue_,l,a)}function il(t,e){To(t,"connected",e),e===!1&&VE(t)}function jE(t,e){be(e,(n,i)=>{To(t,n,i)})}function To(t,e,n){const i=new $("/.info/"+e),r=se(n);t.infoData_.updateSnapshot(i,r);const s=sr(t.infoSyncTree_,i,r);Ht(t.eventQueue_,i,s)}function WE(t){return t.nextWriteId_++}function VE(t){Wd(t,"onDisconnectEvents");const e=jd(t),n=ji();Cs(t.onDisconnect_,U(),(r,s)=>{const a=EE(r,s,t.serverSyncTree_,e);md(n,r,a)});let i=[];Cs(n,U(),(r,s)=>{i=i.concat(sr(t.serverSyncTree_,r,s));const a=KE(t,r);So(t,a)}),t.onDisconnect_=ji(),Ht(t.eventQueue_,U(),i)}function $E(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ME)}function Wd(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),re(n,...e)}function Vd(t,e,n){return Od(t.serverSyncTree_,e,n)||M.EMPTY_NODE}function Co(t,e=t.transactionQueueTree_){if(e||cr(t,e),pn(e)){const n=qd(t,e);E(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&qE(t,ni(e),n)}else Fd(e)&&ar(e,n=>{Co(t,n)})}function qE(t,e,n){const i=n.map(f=>f.currentWriteId),r=Vd(t,e,i);let s=r;const a=r.hash();for(let f=0;f<n.length;f++){const p=n[f];E(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const g=we(e,p.path);s=s.updateChild(g,p.currentOutputSnapshotRaw)}const l=s.val(!0),h=e;t.server_.put(h.toString(),l,f=>{Wd(t,"transaction put response",{path:h.toString(),status:f});let p=[];if(f==="ok"){const g=[];for(let y=0;y<n.length;y++)n[y].status=2,p=p.concat(Jt(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&g.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();cr(t,Io(t.transactionQueueTree_,e)),Co(t,t.transactionQueueTree_),Ht(t.eventQueue_,e,p);for(let y=0;y<g.length;y++)ei(g[y])}else{if(f==="datastale")for(let g=0;g<n.length;g++)n[g].status===3?n[g].status=4:n[g].status=0;else{me("transaction at "+h.toString()+" failed: "+f);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=f}So(t,e)}},a)}function So(t,e){const n=$d(t,e),i=ni(n),r=qd(t,n);return zE(t,r,i),i}function zE(t,e,n){if(e.length===0)return;const i=[];let r=[];const a=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const h=e[l],f=we(n,h.path);let p=!1,g;if(E(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)p=!0,g=h.abortReason,r=r.concat(Jt(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=FE)p=!0,g="maxretry",r=r.concat(Jt(t.serverSyncTree_,h.currentWriteId,!0));else{const y=Vd(t,h.path,a);h.currentInputSnapshot=y;const I=e[l].update(y.val());if(I!==void 0){Hd("transaction failed: Data returned ",I,h.path);let v=se(I);typeof I=="object"&&I!=null&&Xe(I,".priority")||(v=v.updatePriority(y.getPriority()));const S=h.currentWriteId,q=jd(t),z=IE(v,y,q);h.currentOutputSnapshotRaw=v,h.currentOutputSnapshotResolved=z,h.currentWriteId=WE(t),a.splice(a.indexOf(S),1),r=r.concat(mE(t.serverSyncTree_,h.path,z,h.currentWriteId,h.applyLocally)),r=r.concat(Jt(t.serverSyncTree_,S,!0))}else p=!0,g="nodata",r=r.concat(Jt(t.serverSyncTree_,h.currentWriteId,!0))}Ht(t.eventQueue_,n,r),r=[],p&&(e[l].status=2,function(y){setTimeout(y,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(g==="nodata"?i.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):i.push(()=>e[l].onComplete(new Error(g),!1,null))))}cr(t,t.transactionQueueTree_);for(let l=0;l<i.length;l++)ei(i[l]);Co(t,t.transactionQueueTree_)}function $d(t,e){let n,i=t.transactionQueueTree_;for(n=D(e);n!==null&&pn(i)===void 0;)i=Io(i,n),e=V(e),n=D(e);return i}function qd(t,e){const n=[];return zd(t,e,n),n.sort((i,r)=>i.order-r.order),n}function zd(t,e,n){const i=pn(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);ar(e,r=>{zd(t,r,n)})}function cr(t,e){const n=pn(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,Md(e,n.length>0?n:void 0)}ar(e,i=>{cr(t,i)})}function KE(t,e){const n=ni($d(t,e)),i=Io(t.transactionQueueTree_,e);return CE(i,r=>{Kr(t,r)}),Kr(t,i),Bd(i,r=>{Kr(t,r)}),n}function Kr(t,e){const n=pn(e);if(n){const i=[];let r=[],s=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(E(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(E(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),r=r.concat(Jt(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&i.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Md(e,void 0):n.length=s+1,Ht(t.eventQueue_,ni(e),r);for(let a=0;a<i.length;a++)ei(i[a])}}function GE(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function YE(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):me(`Invalid query segment '${n}' in query '${t}'`)}return e}const rl=function(t,e){const n=JE(t),i=n.namespace;n.domain==="firebase.com"&&Je(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Je("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Sv();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ju(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new $(n.pathString)}},JE=function(t){let e="",n="",i="",r="",s="",a=!0,l="https",h=443;if(typeof t=="string"){let f=t.indexOf("//");f>=0&&(l=t.substring(0,f-1),t=t.substring(f+2));let p=t.indexOf("/");p===-1&&(p=t.length);let g=t.indexOf("?");g===-1&&(g=t.length),e=t.substring(0,Math.min(p,g)),p<g&&(r=GE(t.substring(p,g)));const y=YE(t.substring(Math.min(t.length,g)));f=e.indexOf(":"),f>=0?(a=l==="https"||l==="wss",h=parseInt(e.substring(f+1),10)):f=e.length;const I=e.slice(0,f);if(I.toLowerCase()==="localhost")n="localhost";else if(I.split(".").length<=2)n=I;else{const v=e.indexOf(".");i=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=i}"ns"in y&&(s=y.ns)}return{host:e,port:h,domain:n,subdomain:i,secure:a,scheme:l,pathString:r,namespace:s}};class ko{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return P(this._path)?null:sd(this._path)}get ref(){return new mn(this._repo,this._path)}get _queryIdentifier(){const e=Vc(this._queryParams),n=oo(e);return n==="{}"?"default":n}get _queryObject(){return Vc(this._queryParams)}isEqual(e){if(e=Qe(e),!(e instanceof ko))return!1;const n=this._repo===e._repo,i=cd(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+cb(this._path)}}class mn extends ko{constructor(e,n){super(e,n,new fo,!1)}get parent(){const e=ad(this._path);return e===null?null:new mn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}fE(mn);pE(mn);const XE="FIREBASE_DATABASE_EMULATOR_HOST",Ds={};let QE=!1;function ZE(t,e,n,i){t.repoInfo_=new Ju(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function eI(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||Je("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),re("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=rl(s,r),l=a.repoInfo,h,f;typeof process<"u"&&process.env&&(f=process.env[XE]),f?(h=!0,s=`http://${f}?ns=${l.namespace}`,a=rl(s,r),l=a.repoInfo):h=!a.repoInfo.secure;const p=r&&h?new en(en.OWNER):new Mv(t.name,t.options,e);PE("Invalid Firebase Database URL",a),P(a.path)||Je("Database URL must point to the root of a Firebase Database (not including a child path).");const g=nI(l,t,p,new Lv(t.name,n));return new iI(g,t)}function tI(t,e){const n=Ds[e];(!n||n[t.key]!==t)&&Je(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$E(t),delete n[t.key]}function nI(t,e,n,i){let r=Ds[e.name];r||(r={},Ds[e.name]=r);let s=r[t.toURLString()];return s&&Je("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new BE(t,QE,n,i),r[t.toURLString()]=s,s}class iI{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(UE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mn(this._repo,U())),this._rootInternal}_delete(){return this._rootInternal!==null&&(tI(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Je("Cannot call "+e+" on a deleted database.")}}function kC(t=nu(),e){const n=Gn(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=Bg("database");i&&rI(n,...i)}return n}function rI(t,e,n,i={}){t=Qe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Je("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Je('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new en(en.OWNER);else if(i.mockUserToken){const a=typeof i.mockUserToken=="string"?i.mockUserToken:Ug(i.mockUserToken,t.app.options.projectId);s=new en(a)}ZE(r,e,n,s)}function sI(t){bv(Ft),Se(new ve("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return eI(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),de(Cc,Sc,t),de(Cc,Sc,"esm2017")}Ke.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ke.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};sI();const Kd="firebasestorage.googleapis.com",oI="storageBucket",aI=2*60*1e3,cI=10*60*1e3;class Ue extends Be{constructor(e,n,i=0){super(Gr(e),`Firebase Storage: ${n} (${Gr(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ue.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gr(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Me;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Me||(Me={}));function Gr(t){return"storage/"+t}function lI(){const t="An unknown error occurred, please check the error payload for server response.";return new Ue(Me.UNKNOWN,t)}function uI(){return new Ue(Me.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dI(){return new Ue(Me.CANCELED,"User canceled the upload/download.")}function hI(t){return new Ue(Me.INVALID_URL,"Invalid URL '"+t+"'.")}function fI(t){return new Ue(Me.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function sl(t){return new Ue(Me.INVALID_ARGUMENT,t)}function Gd(){return new Ue(Me.APP_DELETED,"The Firebase app was deleted.")}function pI(t){return new Ue(Me.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Te{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Te.makeFromUrl(e,n)}catch{return new Te(e,"")}if(i.path==="")return i;throw fI(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+r+a,"i"),h={bucket:1,path:3};function f(J){J.path_=decodeURIComponent(J.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",I=new RegExp(`^https?://${g}/${p}/b/${r}/o${y}`,"i"),v={bucket:1,path:3},T=n===Kd?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",q=new RegExp(`^https?://${T}/${r}/${S}`,"i"),K=[{regex:l,indices:h,postModify:s},{regex:I,indices:v,postModify:f},{regex:q,indices:{bucket:1,path:2},postModify:f}];for(let J=0;J<K.length;J++){const He=K[J],Ae=He.regex.exec(e);if(Ae){const Ze=Ae[He.indices.bucket];let mt=Ae[He.indices.path];mt||(mt=""),i=new Te(Ze,mt),He.postModify(i);break}}if(i==null)throw hI(e);return i}}class mI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function gI(t,e,n){let i=1,r=null,s=null,a=!1,l=0;function h(){return l===2}let f=!1;function p(...S){f||(f=!0,e.apply(null,S))}function g(S){r=setTimeout(()=>{r=null,t(I,h())},S)}function y(){s&&clearTimeout(s)}function I(S,...q){if(f){y();return}if(S){y(),p.call(null,S,...q);return}if(h()||a){y(),p.call(null,S,...q);return}i<64&&(i*=2);let K;l===1?(l=2,K=0):K=(i+Math.random())*1e3,g(K)}let v=!1;function T(S){v||(v=!0,y(),!f&&(r!==null?(S||(l=2),clearTimeout(r),g(0)):S||(l=1)))}return g(0),s=setTimeout(()=>{a=!0,T(!0)},n),T}function _I(t){t(!1)}function wI(t){return t!==void 0}function ol(t,e,n,i){if(i<e)throw sl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw sl(`Invalid value for '${t}'. Expected ${n} or less.`)}function yI(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var qi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(qi||(qi={}));function vI(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}class bI{constructor(e,n,i,r,s,a,l,h,f,p,g,y=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,v)=>{this.resolve_=I,this.reject_=v,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new wi(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=l=>{const h=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const l=s.getErrorCode()===qi.NO_ERROR,h=s.getStatus();if(!l||vI(h,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===qi.ABORT;i(!1,new wi(!1,null,p));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new wi(f,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(l,l.getResponse());wI(h)?s(h):s()}catch(h){a(h)}else if(l!==null){const h=lI();h.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,h)):a(h)}else if(r.canceled){const h=this.appDelete_?Gd():dI();a(h)}else{const h=uI();a(h)}};this.canceled_?n(!1,new wi(!1,null,!0)):this.backoffId_=gI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_I(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wi{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function EI(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function II(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function TI(t,e){e&&(t["X-Firebase-GMPID"]=e)}function CI(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function SI(t,e,n,i,r,s,a=!0){const l=yI(t.urlParams),h=t.url+l,f=Object.assign({},t.headers);return TI(f,e),EI(f,n),II(f,s),CI(f,i),new bI(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a)}function kI(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function AI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class zi{constructor(e,n){this._service=e,n instanceof Te?this._location=n:this._location=Te.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new zi(e,n)}get root(){const e=new Te(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AI(this._location.path)}get storage(){return this._service}get parent(){const e=kI(this._location.path);if(e===null)return null;const n=new Te(this._location.bucket,e);return new zi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pI(e)}}function al(t,e){const n=e==null?void 0:e[oI];return n==null?null:Te.makeFromBucketSpec(n,t)}class RI{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Kd,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aI,this._maxUploadRetryTime=cI,this._requests=new Set,r!=null?this._bucket=Te.makeFromBucketSpec(r,this._host):this._bucket=al(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Te.makeFromBucketSpec(this._url,e):this._bucket=al(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ol("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ol("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zi(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new mI(Gd());{const a=SI(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const cl="@firebase/storage",ll="0.11.2";const OI="storage";function PI(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new RI(n,i,r,e,Ft)}function NI(){Se(new ve(OI,PI,"PUBLIC").setMultipleInstances(!0)),de(cl,ll,""),de(cl,ll,"esm2017")}NI();const DI=(t,e)=>e.some(n=>t instanceof n);let ul,dl;function xI(){return ul||(ul=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LI(){return dl||(dl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yd=new WeakMap,xs=new WeakMap,Jd=new WeakMap,Yr=new WeakMap,Ao=new WeakMap;function MI(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(ht(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Yd.set(n,t)}).catch(()=>{}),Ao.set(e,t),e}function FI(t){if(xs.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});xs.set(t,e)}let Ls={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xs.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jd.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ht(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BI(t){Ls=t(Ls)}function UI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Jr(this),e,...n);return Jd.set(i,e.sort?e.sort():[e]),ht(i)}:LI().includes(t)?function(...e){return t.apply(Jr(this),e),ht(Yd.get(this))}:function(...e){return ht(t.apply(Jr(this),e))}}function HI(t){return typeof t=="function"?UI(t):(t instanceof IDBTransaction&&FI(t),DI(t,xI())?new Proxy(t,Ls):t)}function ht(t){if(t instanceof IDBRequest)return MI(t);if(Yr.has(t))return Yr.get(t);const e=HI(t);return e!==t&&(Yr.set(t,e),Ao.set(e,t)),e}const Jr=t=>Ao.get(t);function jI(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=ht(a);return i&&a.addEventListener("upgradeneeded",h=>{i(ht(a.result),h.oldVersion,h.newVersion,ht(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),l.then(h=>{s&&h.addEventListener("close",()=>s()),r&&h.addEventListener("versionchange",()=>r())}).catch(()=>{}),l}const WI=["get","getKey","getAll","getAllKeys","count"],VI=["put","add","delete","clear"],Xr=new Map;function hl(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xr.get(e))return Xr.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=VI.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||WI.includes(n)))return;const s=async function(a,...l){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),r&&h.done]))[0]};return Xr.set(e,s),s}BI(t=>({...t,get:(e,n,i)=>hl(e,n)||t.get(e,n,i),has:(e,n)=>!!hl(e,n)||t.has(e,n)}));const Xd="@firebase/installations",Ro="0.6.4";const Qd=1e4,Zd=`w:${Ro}`,eh="FIS_v2",$I="https://firebaseinstallations.googleapis.com/v1",qI=60*60*1e3,zI="installations",KI="Installations";const GI={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},Dt=new Mt(zI,KI,GI);function th(t){return t instanceof Be&&t.code.includes("request-failed")}function nh({projectId:t}){return`${$I}/projects/${t}/installations`}function ih(t){return{token:t.token,requestStatus:2,expiresIn:JI(t.expiresIn),creationTime:Date.now()}}async function rh(t,e){const i=(await e.json()).error;return Dt.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function sh({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function YI(t,{refreshToken:e}){const n=sh(t);return n.append("Authorization",XI(e)),n}async function oh(t){const e=await t();return e.status>=500&&e.status<600?t():e}function JI(t){return Number(t.replace("s","000"))}function XI(t){return`${eh} ${t}`}async function QI({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=nh(t),r=sh(t),s=e.getImmediate({optional:!0});if(s){const f=await s.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const a={fid:n,authVersion:eh,appId:t.appId,sdkVersion:Zd},l={method:"POST",headers:r,body:JSON.stringify(a)},h=await oh(()=>fetch(i,l));if(h.ok){const f=await h.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:ih(f.authToken)}}else throw await rh("Create Installation",h)}function ah(t){return new Promise(e=>{setTimeout(e,t)})}function ZI(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const eT=/^[cdef][\w-]{21}$/,Ms="";function tT(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=nT(t);return eT.test(n)?n:Ms}catch{return Ms}}function nT(t){return ZI(t).substr(0,22)}function lr(t){return`${t.appName}!${t.appId}`}const ch=new Map;function lh(t,e){const n=lr(t);uh(n,e),iT(n,e)}function uh(t,e){const n=ch.get(t);if(n)for(const i of n)i(e)}function iT(t,e){const n=rT();n&&n.postMessage({key:t,fid:e}),sT()}let Ct=null;function rT(){return!Ct&&"BroadcastChannel"in self&&(Ct=new BroadcastChannel("[Firebase] FID Change"),Ct.onmessage=t=>{uh(t.data.key,t.data.fid)}),Ct}function sT(){ch.size===0&&Ct&&(Ct.close(),Ct=null)}const oT="firebase-installations-database",aT=1,xt="firebase-installations-store";let Qr=null;function Oo(){return Qr||(Qr=jI(oT,aT,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xt)}}})),Qr}async function Ki(t,e){const n=lr(t),r=(await Oo()).transaction(xt,"readwrite"),s=r.objectStore(xt),a=await s.get(n);return await s.put(e,n),await r.done,(!a||a.fid!==e.fid)&&lh(t,e.fid),e}async function dh(t){const e=lr(t),i=(await Oo()).transaction(xt,"readwrite");await i.objectStore(xt).delete(e),await i.done}async function ur(t,e){const n=lr(t),r=(await Oo()).transaction(xt,"readwrite"),s=r.objectStore(xt),a=await s.get(n),l=e(a);return l===void 0?await s.delete(n):await s.put(l,n),await r.done,l&&(!a||a.fid!==l.fid)&&lh(t,l.fid),l}async function Po(t){let e;const n=await ur(t.appConfig,i=>{const r=cT(i),s=lT(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Ms?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function cT(t){const e=t||{fid:tT(),registrationStatus:0};return hh(e)}function lT(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Dt.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=uT(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:dT(t)}:{installationEntry:e}}async function uT(t,e){try{const n=await QI(t,e);return Ki(t.appConfig,n)}catch(n){throw th(n)&&n.customData.serverCode===409?await dh(t.appConfig):await Ki(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function dT(t){let e=await fl(t.appConfig);for(;e.registrationStatus===1;)await ah(100),e=await fl(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Po(t);return i||n}return e}function fl(t){return ur(t,e=>{if(!e)throw Dt.create("installation-not-found");return hh(e)})}function hh(t){return hT(t)?{fid:t.fid,registrationStatus:0}:t}function hT(t){return t.registrationStatus===1&&t.registrationTime+Qd<Date.now()}async function fT({appConfig:t,heartbeatServiceProvider:e},n){const i=pT(t,n),r=YI(t,n),s=e.getImmediate({optional:!0});if(s){const f=await s.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const a={installation:{sdkVersion:Zd,appId:t.appId}},l={method:"POST",headers:r,body:JSON.stringify(a)},h=await oh(()=>fetch(i,l));if(h.ok){const f=await h.json();return ih(f)}else throw await rh("Generate Auth Token",h)}function pT(t,{fid:e}){return`${nh(t)}/${e}/authTokens:generate`}async function No(t,e=!1){let n;const i=await ur(t.appConfig,s=>{if(!fh(s))throw Dt.create("not-registered");const a=s.authToken;if(!e&&_T(a))return s;if(a.requestStatus===1)return n=mT(t,e),s;{if(!navigator.onLine)throw Dt.create("app-offline");const l=yT(s);return n=gT(t,l),l}});return n?await n:i.authToken}async function mT(t,e){let n=await pl(t.appConfig);for(;n.authToken.requestStatus===1;)await ah(100),n=await pl(t.appConfig);const i=n.authToken;return i.requestStatus===0?No(t,e):i}function pl(t){return ur(t,e=>{if(!fh(e))throw Dt.create("not-registered");const n=e.authToken;return vT(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function gT(t,e){try{const n=await fT(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Ki(t.appConfig,i),n}catch(n){if(th(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await dh(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ki(t.appConfig,i)}throw n}}function fh(t){return t!==void 0&&t.registrationStatus===2}function _T(t){return t.requestStatus===2&&!wT(t)}function wT(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+qI}function yT(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function vT(t){return t.requestStatus===1&&t.requestTime+Qd<Date.now()}async function bT(t){const e=t,{installationEntry:n,registrationPromise:i}=await Po(e);return i?i.catch(console.error):No(e).catch(console.error),n.fid}async function ET(t,e=!1){const n=t;return await IT(n),(await No(n,e)).token}async function IT(t){const{registrationPromise:e}=await Po(t);e&&await e}function TT(t){if(!t||!t.options)throw Zr("App Configuration");if(!t.name)throw Zr("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Zr(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Zr(t){return Dt.create("missing-app-config-values",{valueName:t})}const ph="installations",CT="installations-internal",ST=t=>{const e=t.getProvider("app").getImmediate(),n=TT(e),i=Gn(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},kT=t=>{const e=t.getProvider("app").getImmediate(),n=Gn(e,ph).getImmediate();return{getId:()=>bT(n),getToken:r=>ET(n,r)}};function AT(){Se(new ve(ph,ST,"PUBLIC")),Se(new ve(CT,kT,"PRIVATE"))}AT();de(Xd,Ro);de(Xd,Ro,"esm2017");const RT=(t,e)=>e.some(n=>t instanceof n);let ml,gl;function OT(){return ml||(ml=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PT(){return gl||(gl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mh=new WeakMap,Fs=new WeakMap,gh=new WeakMap,es=new WeakMap,Do=new WeakMap;function NT(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ge(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&mh.set(n,t)}).catch(()=>{}),Do.set(e,t),e}function DT(t){if(Fs.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Fs.set(t,e)}let Bs={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fs.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gh.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ge(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xT(t){Bs=t(Bs)}function LT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(ts(this),e,...n);return gh.set(i,e.sort?e.sort():[e]),Ge(i)}:PT().includes(t)?function(...e){return t.apply(ts(this),e),Ge(mh.get(this))}:function(...e){return Ge(t.apply(ts(this),e))}}function MT(t){return typeof t=="function"?LT(t):(t instanceof IDBTransaction&&DT(t),RT(t,OT())?new Proxy(t,Bs):t)}function Ge(t){if(t instanceof IDBRequest)return NT(t);if(es.has(t))return es.get(t);const e=MT(t);return e!==t&&(es.set(t,e),Do.set(e,t)),e}const ts=t=>Do.get(t);function _h(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=Ge(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Ge(a.result),h.oldVersion,h.newVersion,Ge(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),l.then(h=>{s&&h.addEventListener("close",()=>s()),r&&h.addEventListener("versionchange",()=>r())}).catch(()=>{}),l}function ns(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Ge(n).then(()=>{})}const FT=["get","getKey","getAll","getAllKeys","count"],BT=["put","add","delete","clear"],is=new Map;function _l(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(is.get(e))return is.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=BT.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||FT.includes(n)))return;const s=async function(a,...l){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),r&&h.done]))[0]};return is.set(e,s),s}xT(t=>({...t,get:(e,n,i)=>_l(e,n)||t.get(e,n,i),has:(e,n)=>!!_l(e,n)||t.has(e,n)}));const UT="/firebase-messaging-sw.js",HT="/firebase-cloud-messaging-push-scope",wh="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",jT="https://fcmregistrations.googleapis.com/v1",yh="google.c.a.c_id",WT="google.c.a.c_l",VT="google.c.a.ts",$T="google.c.a.e";var wl;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(wl||(wl={}));var qn;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(qn||(qn={}));function We(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qT(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}const rs="fcm_token_details_db",zT=5,yl="fcm_token_object_Store";async function KT(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(rs))return null;let e=null;return(await _h(rs,zT,{upgrade:async(i,r,s,a)=>{var l;if(r<2||!i.objectStoreNames.contains(yl))return;const h=a.objectStore(yl),f=await h.index("fcmSenderId").get(t);if(await h.clear(),!!f){if(r===2){const p=f;if(!p.auth||!p.p256dh||!p.endpoint)return;e={token:p.fcmToken,createTime:(l=p.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:typeof p.vapidKey=="string"?p.vapidKey:We(p.vapidKey)}}}else if(r===3){const p=f;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:We(p.auth),p256dh:We(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:We(p.vapidKey)}}}else if(r===4){const p=f;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:We(p.auth),p256dh:We(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:We(p.vapidKey)}}}}}})).close(),await ns(rs),await ns("fcm_vapid_details_db"),await ns("undefined"),GT(e)?e:null}function GT(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const YT="firebase-messaging-database",JT=1,Lt="firebase-messaging-store";let ss=null;function xo(){return ss||(ss=_h(YT,JT,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Lt)}}})),ss}async function vh(t){const e=Mo(t),i=await(await xo()).transaction(Lt).objectStore(Lt).get(e);if(i)return i;{const r=await KT(t.appConfig.senderId);if(r)return await Lo(t,r),r}}async function Lo(t,e){const n=Mo(t),r=(await xo()).transaction(Lt,"readwrite");return await r.objectStore(Lt).put(e,n),await r.done,e}async function XT(t){const e=Mo(t),i=(await xo()).transaction(Lt,"readwrite");await i.objectStore(Lt).delete(e),await i.done}function Mo({appConfig:t}){return t.appId}const QT={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ge=new Mt("messaging","Messaging",QT);async function ZT(t,e){const n=await Bo(t),i=Eh(e),r={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{s=await(await fetch(Fo(t.appConfig),r)).json()}catch(a){throw ge.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ge.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw ge.create("token-subscribe-no-token");return s.token}async function eC(t,e){const n=await Bo(t),i=Eh(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{s=await(await fetch(`${Fo(t.appConfig)}/${e.token}`,r)).json()}catch(a){throw ge.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ge.create("token-update-failed",{errorInfo:a})}if(!s.token)throw ge.create("token-update-no-token");return s.token}async function bh(t,e){const i={method:"DELETE",headers:await Bo(t)};try{const s=await(await fetch(`${Fo(t.appConfig)}/${e}`,i)).json();if(s.error){const a=s.error.message;throw ge.create("token-unsubscribe-failed",{errorInfo:a})}}catch(r){throw ge.create("token-unsubscribe-failed",{errorInfo:r==null?void 0:r.toString()})}}function Fo({projectId:t}){return`${jT}/projects/${t}/registrations`}async function Bo({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function Eh({p256dh:t,auth:e,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:e,p256dh:t}};return i!==wh&&(r.web.applicationPubKey=i),r}const tC=7*24*60*60*1e3;async function nC(t){const e=await sC(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:We(e.getKey("auth")),p256dh:We(e.getKey("p256dh"))},i=await vh(t.firebaseDependencies);if(i){if(oC(i.subscriptionOptions,n))return Date.now()>=i.createTime+tC?rC(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await bh(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return vl(t.firebaseDependencies,n)}else return vl(t.firebaseDependencies,n)}async function iC(t){const e=await vh(t.firebaseDependencies);e&&(await bh(t.firebaseDependencies,e.token),await XT(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function rC(t,e){try{const n=await eC(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Lo(t.firebaseDependencies,i),n}catch(n){throw await iC(t),n}}async function vl(t,e){const i={token:await ZT(t,e),createTime:Date.now(),subscriptionOptions:e};return await Lo(t,i),i.token}async function sC(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qT(e)})}function oC(t,e){const n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,r=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&i&&r&&s}function bl(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return aC(e,t),cC(e,t),lC(e,t),e}function aC(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const i=e.notification.body;i&&(t.notification.body=i);const r=e.notification.image;r&&(t.notification.image=r);const s=e.notification.icon;s&&(t.notification.icon=s)}function cC(t,e){e.data&&(t.data=e.data)}function lC(t,e){var n,i,r,s,a;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const l=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;l&&(t.fcmOptions.link=l);const h=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;h&&(t.fcmOptions.analyticsLabel=h)}function uC(t){return typeof t=="object"&&!!t&&yh in t}Ih("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");Ih("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Ih(t,e){const n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}function dC(t){if(!t||!t.options)throw os("App Configuration Object");if(!t.name)throw os("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const i of e)if(!n[i])throw os(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function os(t){return ge.create("missing-app-config-values",{valueName:t})}class hC{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=dC(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}}async function fC(t){try{t.swRegistration=await navigator.serviceWorker.register(UT,{scope:HT}),t.swRegistration.update().catch(()=>{})}catch(e){throw ge.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function pC(t,e){if(!e&&!t.swRegistration&&await fC(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ge.create("invalid-sw-registration");t.swRegistration=e}}async function mC(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=wh)}async function gC(t,e){if(!navigator)throw ge.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ge.create("permission-blocked");return await mC(t,e==null?void 0:e.vapidKey),await pC(t,e==null?void 0:e.serviceWorkerRegistration),nC(t)}async function _C(t,e,n){const i=wC(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[yh],message_name:n[WT],message_time:n[VT],message_device_time:Math.floor(Date.now()/1e3)})}function wC(t){switch(t){case qn.NOTIFICATION_CLICKED:return"notification_open";case qn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function yC(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===qn.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(bl(n)):t.onMessageHandler.next(bl(n)));const i=n.data;uC(i)&&i[$T]==="1"&&await _C(t,n.messageType,i)}const El="@firebase/messaging",Il="0.12.4";const vC=t=>{const e=new hC(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>yC(e,n)),e},bC=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:i=>gC(e,i)}};function EC(){Se(new ve("messaging",vC,"PUBLIC")),Se(new ve("messaging-internal",bC,"PRIVATE")),de(El,Il),de(El,Il,"esm2017")}EC();export{IC as S,TC as a,SC as b,kC as g,X_ as i,CC as s};
//# sourceMappingURL=vendor-a366a4fe.js.map
