{"version":3,"file":"commonHelpers.js","sources":["../src/js/requests.js","../src/js/book-block.js","../src/js/categories.js","../src/js/books-each-category.js"],"sourcesContent":["import axios from \"axios\";\n\n// CREATION DEFAULT CLASS FOR REQUESTS TO BOOKS API\nexport default class GetBooksFromApi {\n    // API adresses for send requests\n    #BASE_URL = 'https://books-backend.p.goit.global/books';\n    #BEST_BOOKS = '/top-books';\n    #ALL_CATEGORIES = '/category-list';\n    #CATEGORY = '/category?category=';\n\n    constructor() {}\n\n    // FUNCTION FOR REQUEST BESTSELLERS BOOKS LIST\n    async getBooks() {\n            const booksBest = await axios.get(`${this.#BASE_URL}${this.#BEST_BOOKS}`);\n            return booksBest.data;\n    }\n\n    // FUNCTION FOR REQUEST LIST OF ALL CATEGORIES\n    async getAllCategories() {\n        const allCategories = await axios.get(`${this.#BASE_URL}${this.#ALL_CATEGORIES}`);\n        return allCategories.data;\n    }\n\n    // FUNCTION FOR REQUEST BOOK BY ID\n    async getBookById(id) {\n        const bookById = await axios.get(`${this.#BASE_URL}/${id}`);\n        return bookById.data;\n    }\n\n    // FUNCTION FOR REQUEST ALL BOOKS FROM ONE CATEGORY\n    async getBooksFromCategory(categoryName) {\n        const category = await axios.get(`${this.#BASE_URL}${this.#CATEGORY}${categoryName}`);\n        return category.data;\n    }\n}","import GetBooksFromApi from \"./requests\";\nimport Notiflix from \"notiflix\";\n\n// LOADER ===================================================\nconst loader = document.querySelector('.loader-backdrop');\n\nexport function switchLoader() {\n    loader?.classList.toggle('is-hidden');\n}\n// ============================================================\n\nconst booksList = document.querySelector('.book-block-list');\n\n// FUNCTION FOR CREATE BOOK MARKUP\nexport function createBook(book) {\n    return `<li class=\"book-card\" id=\"${book._id}\">\n    <div class=\"book-card-box\">\n    <img class=\"book-card-img\" src=\"${book.book_image}\" alt=\"Book cover ${book.title}\" loading=\"lazy\" />\n    </div>\n    <h3 class=\"book-card-title\">${book.title}</h3>\n    <p class=\"book-card-text\">${book.author}</p>\n    </li>`;\n}\n\n// FUNCTION FOR CREATE MARKUP LIST OF BESTSELLERS\nexport function createBestBooksMarkup(books) {\nconst bestBooks = [];\n  for (let i = 0; i < books.length; i += 1) {\n   const cardMarkup = books[i].books.map((book, idx) => {\n        if (idx < 5) {\n            return createBook(book);\n        }\n    }).join('');\n    const markupBests = `<h2 class=\"best-category-title\">${books[i].list_name}</h2>\n    <ul class=\"best-category-list\">${cardMarkup}</ul>\n    <div class=\"see-more-btn-box\">\n    <button class=\"see-more-btn\" name=\"${books[i].list_name}\" type=\"button\">See more</button></div>`;\n\n    bestBooks.push(markupBests);\n}\n// @ts-ignore\nbooksList.innerHTML = bestBooks.join('');\n}\n// =========================================================================================================\n// CREATION MARKUP WHEN OPEN HOME PAGE\n\nconst getBooksFromApi = new GetBooksFromApi();\nexport async function onLoadPage() {\n    switchLoader();\n    try {\n       const response = await getBooksFromApi.getBooks();\n       if (response.length === 0) {\n        Notiflix.Notify.warning('Sorry, there are no bestsellers books yet');\n       }\n       createBestBooksMarkup(response);\n    } catch (error) {\n        Notiflix.Notify.failure('Something went wrong!');\n    } finally {\n        switchLoader();\n    }\n}\nonLoadPage();\n// ====================================================================================================","import GetBooksFromApi from './requests';\nimport { Notify } from 'notiflix';\n\n\n/* Функція створення элемента категорії */\n\nconst createCategoryElement = (category, index) => {\n  const categoryLi = document.createElement('li');\n  categoryLi.classList.add('categories-item');\n\n  const categoryId = `categoryRadio${index + 1}`;\n\n  const categoryRadio = document.createElement('input');\n  categoryRadio.setAttribute('type', 'radio');\n  categoryRadio.setAttribute('name', 'category');\n  categoryRadio.setAttribute('id', categoryId);\n  categoryRadio.classList.add('categories-button');\n\n  const categoryLabel = document.createElement('label');\n  categoryLabel.textContent = category.list_name;\n  categoryLabel.setAttribute('for', categoryId);\n  categoryLabel.classList.add('categories-label');\n\n  categoryLi.appendChild(categoryRadio);\n  categoryLi.appendChild(categoryLabel);\n\n  return categoryLi;\n};\n\n/* Функція виведення елементів на сторінку */\n\nasync function fetchAndDisplayCategories() {\n\n  const categoryRequest = await new GetBooksFromApi().getAllCategories();\n  categoryRequest.sort((a, b) => a.list_name.localeCompare(b.list_name));\n  const categoryListElement = document.querySelector('.categories-list');\n  categoryRequest.forEach((category, index) => {\n    const categoryElement = createCategoryElement(category, index);\n    // @ts-ignore\n    categoryListElement.appendChild(categoryElement);\n  });\n\n  try {\n    const categoryRequest = await new GetBooksFromApi().getAllCategories();\n    categoryRequest.sort((a, b) => a.list_name.localeCompare(b.list_name));\n    const categoryListElement = document.querySelector('.categories-list');\n    categoryRequest.forEach((category, index) => {\n      const categoryElement = createCategoryElement(category, index);\n      categoryListElement.appendChild(categoryElement);\n    });\n  } catch (error) {\n    Notify.failure('Something went wrong!');\n  }\n\n}\n\nfetchAndDisplayCategories();","import GetBooksFromApi from \"./requests\";\nimport { createBook } from \"./book-block\";\nimport { onLoadPage } from \"./book-block\";\nimport { switchLoader } from \"./book-block\";\nimport Notiflix from \"notiflix\";\n\n// Create new Class for take all functions from default class\nconst getBooksFromApi = new GetBooksFromApi();\n\n// constants from html \nconst bestsellerList = document.querySelector('.book-block-list');\nconst categoryTitle = document.querySelector('.book-block-title');\nconst categoryListItems = document.querySelector('.categories-list');\n\n// Add event listener to buttons \"See More\" in Bestsellers Books\nbestsellerList?.addEventListener('click', onSeeMore);\n\n// Callback function when we click on button \"See more\"\nfunction onSeeMore(event) {\n    event.preventDefault();\n\n// If click on 'See More' and show all books of one category automatically scroll up\n   if (window.innerWidth >= 1440) {\n    window.scrollTo(window.innerHeight, 0);\n   } else if (window.innerWidth >= 768 && window.innerWidth < 1440) {\n    window.scrollTo(window.innerHeight, 500);\n   } else {\n    window.scrollTo(window.innerHeight, 820);\n   }\n\n    // For make active category in categories list\n    const listOfLabels = document.querySelectorAll('label');\n    listOfLabels.forEach(label => {\n        if(label.textContent === event.target.name) {\n            label.classList.add('active');\n        } else {\n            label.classList.remove('active');\n        }\n    })\n    // ===========================================\n    \n    if(event.target.nodeName === 'BUTTON') {\n        // @ts-ignore\n        categoryTitle.style.display = 'none';\n        renderBooksCategory(event.target.name);\n    }\n};\n// ==========================================================================================\n// Add event listener to list of categories\ncategoryListItems?.addEventListener('click', onClick);\n\n// Callback function when we click on some category in list of categories\nfunction onClick(event) {\n    event.preventDefault();\n    // For make active the choosen category in categories list\n    const listOfLabels = document.querySelectorAll('label');\n    listOfLabels.forEach(label => {\n        if (label === event.target) {\n           label.classList.add('active')\n        }\n        label.classList.remove('active');\n    })\n    // =============================\n\n    const labelElem = event.target;\n    if(labelElem.nodeName === 'LABEL' && labelElem.textContent !== 'All Categories') {\n        labelElem.classList.add('active');\n        // @ts-ignore\n        categoryTitle.style.display = 'none';\n        renderBooksCategory(labelElem.textContent);\n    } else if(labelElem.textContent === 'All Categories') {\n        // @ts-ignore\n        categoryTitle.style.display = 'block';\n        labelElem.classList.add('active');\n        onLoadPage();\n    }\n};\n\n\n// ===================================================================================================\n// ======= ADDIOTIONAL FUNCTIONS ====================================================================\n// FUNCTION FOR RENDERING BOOKS ONE CATEGORY\nasync function renderBooksCategory(category) {\n    try {\n        switchLoader();\n      const allBooksCategory = await getBooksFromApi.getBooksFromCategory(category);\n      markupCat(allBooksCategory, category);\n    } catch (error) {\n        Notiflix.Notify.failure('Sorry, no books in this category');\n    } finally {\n        switchLoader();\n    }\n}\n\n// FUNCTION FOR MARKUP CATEGORY\nfunction markupCat(arr, category) {\n    const bookItem = arr.map(book => {\n        const markup = createBook(book);\n        return markup;\n    }).join('');\n\n    const categories = category.split(' ');\n\n    let lastItemIndex = categories.length - 1;\n    let lastItem = categories[lastItemIndex];\n    let firstTitle = categories.splice(0, lastItemIndex).join(' ');\n\n    const catItems = `<h2 class=\"book-block-title\">${firstTitle}&nbsp;<span class=\"book-block-title-accent\">${lastItem}</span>\n    </h2>\n    <ul class=\"category-books-wrapper\">${bookItem}</ul>`;\n\n    // @ts-ignore\n    bestsellerList.innerHTML = catItems;\n    const bookCard = document.querySelectorAll('.book-card');\n    // @ts-ignore\n    bookCard.forEach(item => item.style.display = 'block');\n};"],"names":["GetBooksFromApi","__privateAdd","_BASE_URL","_BEST_BOOKS","_ALL_CATEGORIES","_CATEGORY","axios","__privateGet","id","categoryName","loader","switchLoader","booksList","createBook","book","createBestBooksMarkup","books","bestBooks","i","cardMarkup","idx","markupBests","getBooksFromApi","onLoadPage","response","Notiflix","createCategoryElement","category","index","categoryLi","categoryId","categoryRadio","categoryLabel","fetchAndDisplayCategories","categoryRequest","a","b","categoryListElement","categoryElement","Notify","bestsellerList","categoryTitle","categoryListItems","onSeeMore","event","label","renderBooksCategory","onClick","labelElem","allBooksCategory","markupCat","arr","bookItem","categories","lastItemIndex","lastItem","catItems","item"],"mappings":"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"}